<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>水球进度控制</title>
  <style>
    body {
      background: #0a1f33;
      height: 300px;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 24px;
      color: #fff;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    .gauge {
      width: 220px;
      height: 220px;
      border-radius: 50%;
      overflow: hidden;            /* 保证只在圆内可见 */
      border: 3px solid #3ba5ff;   /* 圆边框 */
      position: relative;
    }
    .percent {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      font-size: 20px;
      font-weight: 700;
      pointer-events: none;
    }
    .slider {
      width: 300px;
      height: 6px;
      border-radius: 3px;
      outline: none;
      appearance: none;
      background: #3ba5ff55;
    }
    /* 自定义滑块小圆点 */
    .slider::-webkit-slider-thumb {
      appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: #3ba5ff;
      cursor: pointer;
      border: none;
      box-shadow: 0 0 4px rgba(0,0,0,0.3);
    }
    .slider::-moz-range-thumb {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: #3ba5ff;
      cursor: pointer;
      border: none;
      box-shadow: 0 0 4px rgba(0,0,0,0.3);
    }

    /* 波浪水平流动动画 */
    @keyframes wave-scroll {
      0%   { transform: translateX(0); }
      100% { transform: translateX(-200px); }
    }
    .wave-level {
      will-change: transform;
    }
    .wave-path {
      fill: #3ba5ff;
      animation: wave-scroll 4s linear infinite;
      will-change: transform;
    }
  </style>
</head>
<body>
  <div class="gauge" id="gauge">
    <svg viewBox="0 0 200 200" width="100%" height="100%" preserveAspectRatio="none">
      <g id="waveLevel" class="wave-level" transform="translate(0, 120)">
        <!-- d=：定义一条波浪路径 -->
        <path id="wavePath" class="wave-path"
          d="
            M 0 0
            C 25 -10, 25 10, 50 0
            C 75 -10, 75 10, 100 0
            C 125 -10, 125 10, 150 0
            C 175 -10, 175 10, 200 0
            C 225 -10, 225 10, 250 0
            C 275 -10, 275 10, 300 0
            C 325 -10, 325 10, 350 0
            C 375 -10, 375 10, 400 0
            V 200 H 0 Z
          "
        />
      </g>
    </svg>
    <div class="percent" id="percentText">分配率 50.00%</div>
  </div>

  <!-- 新增进度条 -->
  <input id="slider" class="slider" type="range" min="0" max="100" step="0.1" value="50" />

  <script>
    const slider = document.getElementById('slider');
    const text   = document.getElementById('percentText');
    const waveLevel = document.getElementById('waveLevel');

    function setPercent(p) {
      const percent = Math.max(0, Math.min(100, Number(p) || 0));
      text.textContent = `分配率 ${percent.toFixed(2)}%`;
      const offsetY = 200 - (percent / 100) * 200;
      waveLevel.setAttribute('transform', `translate(0, ${offsetY})`);
    }

    slider.addEventListener('input', e => setPercent(e.target.value));
    setPercent(slider.value); // 初始化
  </script>
</body>
</html>
