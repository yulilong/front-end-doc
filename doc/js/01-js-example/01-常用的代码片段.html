<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>常用代码片段 | 前端知识</title>
    <meta name="description" content="一个总结前端知识的文档网站">
    <link rel="icon" href="/logo.png">
  <script defer="defer" src="/static/jquery.slim.min.js"></script>
  <script defer="defer" src="/static/jquery.fancybox.min.js"></script>
  <link defer="defer" rel="stylesheet" type="text/css" href="/static/jquery.fancybox.min.css">
    
    <link rel="preload" href="/assets/css/0.styles.76f153c4.css" as="style"><link rel="preload" href="/assets/js/app.488c6ca2.js" as="script"><link rel="preload" href="/assets/js/155.f7018a76.js" as="script"><link rel="prefetch" href="/assets/js/10.fcc2aa4e.js"><link rel="prefetch" href="/assets/js/100.ac9e2cee.js"><link rel="prefetch" href="/assets/js/101.4d84add3.js"><link rel="prefetch" href="/assets/js/102.0f3836ba.js"><link rel="prefetch" href="/assets/js/103.5c1b38ae.js"><link rel="prefetch" href="/assets/js/104.d16a6024.js"><link rel="prefetch" href="/assets/js/105.c7f2dbf8.js"><link rel="prefetch" href="/assets/js/106.4c7831d8.js"><link rel="prefetch" href="/assets/js/107.9ba54cc7.js"><link rel="prefetch" href="/assets/js/108.6566aead.js"><link rel="prefetch" href="/assets/js/109.fea32e3b.js"><link rel="prefetch" href="/assets/js/11.18d3fa16.js"><link rel="prefetch" href="/assets/js/110.c347cb80.js"><link rel="prefetch" href="/assets/js/111.13bbcc83.js"><link rel="prefetch" href="/assets/js/112.e16bc7da.js"><link rel="prefetch" href="/assets/js/113.8c3ec16b.js"><link rel="prefetch" href="/assets/js/114.9d67504e.js"><link rel="prefetch" href="/assets/js/115.d9dc980e.js"><link rel="prefetch" href="/assets/js/116.cceda218.js"><link rel="prefetch" href="/assets/js/117.04c70cb1.js"><link rel="prefetch" href="/assets/js/118.21971819.js"><link rel="prefetch" href="/assets/js/119.0f3e035f.js"><link rel="prefetch" href="/assets/js/12.0313b74c.js"><link rel="prefetch" href="/assets/js/120.81681a17.js"><link rel="prefetch" href="/assets/js/121.c8a896d0.js"><link rel="prefetch" href="/assets/js/122.d653cfea.js"><link rel="prefetch" href="/assets/js/123.0a4fd0ed.js"><link rel="prefetch" href="/assets/js/124.2c706e1a.js"><link rel="prefetch" href="/assets/js/125.e3c36a6b.js"><link rel="prefetch" href="/assets/js/126.8daaa383.js"><link rel="prefetch" href="/assets/js/127.1373621a.js"><link rel="prefetch" href="/assets/js/128.0ac7f0b7.js"><link rel="prefetch" href="/assets/js/129.315e3350.js"><link rel="prefetch" href="/assets/js/13.d4c98bc3.js"><link rel="prefetch" href="/assets/js/130.ac9f1b4d.js"><link rel="prefetch" href="/assets/js/131.d57bb123.js"><link rel="prefetch" href="/assets/js/132.bad929f2.js"><link rel="prefetch" href="/assets/js/133.927b5f48.js"><link rel="prefetch" href="/assets/js/134.603065a6.js"><link rel="prefetch" href="/assets/js/135.6e072766.js"><link rel="prefetch" href="/assets/js/136.d666aab8.js"><link rel="prefetch" href="/assets/js/137.da2870ad.js"><link rel="prefetch" href="/assets/js/138.70c637b2.js"><link rel="prefetch" href="/assets/js/139.3c06b77e.js"><link rel="prefetch" href="/assets/js/14.d2661fef.js"><link rel="prefetch" href="/assets/js/140.09addeac.js"><link rel="prefetch" href="/assets/js/141.3401888e.js"><link rel="prefetch" href="/assets/js/142.d4be7d06.js"><link rel="prefetch" href="/assets/js/143.6ede3cbe.js"><link rel="prefetch" href="/assets/js/144.65c0a1c0.js"><link rel="prefetch" href="/assets/js/145.2b9b7af2.js"><link rel="prefetch" href="/assets/js/146.d84d1354.js"><link rel="prefetch" href="/assets/js/147.5c31ced0.js"><link rel="prefetch" href="/assets/js/148.9929b86f.js"><link rel="prefetch" href="/assets/js/149.b1acb31c.js"><link rel="prefetch" href="/assets/js/15.73ad3ea7.js"><link rel="prefetch" href="/assets/js/150.8246e3f7.js"><link rel="prefetch" href="/assets/js/151.de2ec522.js"><link rel="prefetch" href="/assets/js/152.0b2c8d25.js"><link rel="prefetch" href="/assets/js/153.402a6101.js"><link rel="prefetch" href="/assets/js/154.bf5b21e2.js"><link rel="prefetch" href="/assets/js/156.52bc474f.js"><link rel="prefetch" href="/assets/js/157.09a8d951.js"><link rel="prefetch" href="/assets/js/158.a6bda80b.js"><link rel="prefetch" href="/assets/js/159.3aa05399.js"><link rel="prefetch" href="/assets/js/16.c277f496.js"><link rel="prefetch" href="/assets/js/160.09d218f3.js"><link rel="prefetch" href="/assets/js/161.fa98f9b8.js"><link rel="prefetch" href="/assets/js/162.5b32cc43.js"><link rel="prefetch" href="/assets/js/163.dfcc275d.js"><link rel="prefetch" href="/assets/js/164.981b75ed.js"><link rel="prefetch" href="/assets/js/165.a467b631.js"><link rel="prefetch" href="/assets/js/166.789991be.js"><link rel="prefetch" href="/assets/js/167.d69d48e1.js"><link rel="prefetch" href="/assets/js/168.2d3ec034.js"><link rel="prefetch" href="/assets/js/169.cefabf7d.js"><link rel="prefetch" href="/assets/js/17.38459ec9.js"><link rel="prefetch" href="/assets/js/170.e6b98c5d.js"><link rel="prefetch" href="/assets/js/171.43fcc790.js"><link rel="prefetch" href="/assets/js/172.e5fc9e58.js"><link rel="prefetch" href="/assets/js/173.a97ef26e.js"><link rel="prefetch" href="/assets/js/174.ee11026f.js"><link rel="prefetch" href="/assets/js/175.c3a5db14.js"><link rel="prefetch" href="/assets/js/176.4bbb5d9f.js"><link rel="prefetch" href="/assets/js/177.14851192.js"><link rel="prefetch" href="/assets/js/178.07ebf7d5.js"><link rel="prefetch" href="/assets/js/179.938ee81b.js"><link rel="prefetch" href="/assets/js/18.94d695a0.js"><link rel="prefetch" href="/assets/js/180.5b1c3f76.js"><link rel="prefetch" href="/assets/js/181.e0f3927c.js"><link rel="prefetch" href="/assets/js/182.e07fc186.js"><link rel="prefetch" href="/assets/js/183.f6ab4a94.js"><link rel="prefetch" href="/assets/js/184.b09ee1f6.js"><link rel="prefetch" href="/assets/js/185.2e636e79.js"><link rel="prefetch" href="/assets/js/186.3408c000.js"><link rel="prefetch" href="/assets/js/187.ab04b465.js"><link rel="prefetch" href="/assets/js/188.89ba47a3.js"><link rel="prefetch" href="/assets/js/189.d9ace9b8.js"><link rel="prefetch" href="/assets/js/19.ff281af4.js"><link rel="prefetch" href="/assets/js/190.cd51e1ae.js"><link rel="prefetch" href="/assets/js/191.1a195d93.js"><link rel="prefetch" href="/assets/js/192.c9b554db.js"><link rel="prefetch" href="/assets/js/193.9ae5e7f8.js"><link rel="prefetch" href="/assets/js/194.4b0ff7fc.js"><link rel="prefetch" href="/assets/js/195.0490fc4c.js"><link rel="prefetch" href="/assets/js/196.765f834b.js"><link rel="prefetch" href="/assets/js/197.54409b93.js"><link rel="prefetch" href="/assets/js/198.80d2610b.js"><link rel="prefetch" href="/assets/js/199.cccc9f86.js"><link rel="prefetch" href="/assets/js/20.89a504a6.js"><link rel="prefetch" href="/assets/js/200.5ab3eca6.js"><link rel="prefetch" href="/assets/js/201.ebf404c2.js"><link rel="prefetch" href="/assets/js/202.35cb40fc.js"><link rel="prefetch" href="/assets/js/203.8656bd46.js"><link rel="prefetch" href="/assets/js/204.b7f53355.js"><link rel="prefetch" href="/assets/js/205.ed04d8bc.js"><link rel="prefetch" href="/assets/js/206.6217e67e.js"><link rel="prefetch" href="/assets/js/207.60117759.js"><link rel="prefetch" href="/assets/js/208.3f7cfaae.js"><link rel="prefetch" href="/assets/js/209.9fc2f379.js"><link rel="prefetch" href="/assets/js/21.149e4329.js"><link rel="prefetch" href="/assets/js/210.e0db30b2.js"><link rel="prefetch" href="/assets/js/211.786a55db.js"><link rel="prefetch" href="/assets/js/212.e47d35d1.js"><link rel="prefetch" href="/assets/js/213.bc93c223.js"><link rel="prefetch" href="/assets/js/214.ab8ecb5b.js"><link rel="prefetch" href="/assets/js/215.8cf4c215.js"><link rel="prefetch" href="/assets/js/216.30f241da.js"><link rel="prefetch" href="/assets/js/217.0024d9ce.js"><link rel="prefetch" href="/assets/js/218.6ce2301c.js"><link rel="prefetch" href="/assets/js/219.438fb915.js"><link rel="prefetch" href="/assets/js/22.c37cc9fa.js"><link rel="prefetch" href="/assets/js/220.0886089d.js"><link rel="prefetch" href="/assets/js/221.57c60d24.js"><link rel="prefetch" href="/assets/js/222.be4e9028.js"><link rel="prefetch" href="/assets/js/223.98c5dcef.js"><link rel="prefetch" href="/assets/js/224.9c5935e1.js"><link rel="prefetch" href="/assets/js/225.4eda7826.js"><link rel="prefetch" href="/assets/js/226.b93cb259.js"><link rel="prefetch" href="/assets/js/227.29050d75.js"><link rel="prefetch" href="/assets/js/228.1e25561d.js"><link rel="prefetch" href="/assets/js/229.7ca5e0ab.js"><link rel="prefetch" href="/assets/js/23.526b5924.js"><link rel="prefetch" href="/assets/js/230.02332374.js"><link rel="prefetch" href="/assets/js/231.1552d244.js"><link rel="prefetch" href="/assets/js/232.cda13b24.js"><link rel="prefetch" href="/assets/js/233.297c5d8f.js"><link rel="prefetch" href="/assets/js/234.49da1229.js"><link rel="prefetch" href="/assets/js/235.0e92aad6.js"><link rel="prefetch" href="/assets/js/236.a7733e12.js"><link rel="prefetch" href="/assets/js/237.31fac7f1.js"><link rel="prefetch" href="/assets/js/238.6d2d80d6.js"><link rel="prefetch" href="/assets/js/239.d668b21d.js"><link rel="prefetch" href="/assets/js/24.4f58e38d.js"><link rel="prefetch" href="/assets/js/240.9e4fb5f8.js"><link rel="prefetch" href="/assets/js/25.2e1c4694.js"><link rel="prefetch" href="/assets/js/26.9dd20d3a.js"><link rel="prefetch" href="/assets/js/27.635bd2a5.js"><link rel="prefetch" href="/assets/js/28.0e543018.js"><link rel="prefetch" href="/assets/js/29.ae9ddba5.js"><link rel="prefetch" href="/assets/js/3.86caf6b0.js"><link rel="prefetch" href="/assets/js/30.a9cd6ec3.js"><link rel="prefetch" href="/assets/js/31.f1c832ac.js"><link rel="prefetch" href="/assets/js/32.824382ae.js"><link rel="prefetch" href="/assets/js/33.f8aa450d.js"><link rel="prefetch" href="/assets/js/34.40eb032e.js"><link rel="prefetch" href="/assets/js/35.068ab380.js"><link rel="prefetch" href="/assets/js/36.1a2181dd.js"><link rel="prefetch" href="/assets/js/37.5a8e1320.js"><link rel="prefetch" href="/assets/js/38.eb7e9faa.js"><link rel="prefetch" href="/assets/js/39.3ef8e6e4.js"><link rel="prefetch" href="/assets/js/4.2601b2b8.js"><link rel="prefetch" href="/assets/js/40.a04162a3.js"><link rel="prefetch" href="/assets/js/41.2b363e5f.js"><link rel="prefetch" href="/assets/js/42.d3ada882.js"><link rel="prefetch" href="/assets/js/43.2c59e3d5.js"><link rel="prefetch" href="/assets/js/44.2dccdc1c.js"><link rel="prefetch" href="/assets/js/45.21384323.js"><link rel="prefetch" href="/assets/js/46.f8cfeddb.js"><link rel="prefetch" href="/assets/js/47.1931eb78.js"><link rel="prefetch" href="/assets/js/48.af372779.js"><link rel="prefetch" href="/assets/js/49.ff2e443c.js"><link rel="prefetch" href="/assets/js/5.db71aeed.js"><link rel="prefetch" href="/assets/js/50.1d0073cb.js"><link rel="prefetch" href="/assets/js/51.2947e174.js"><link rel="prefetch" href="/assets/js/52.aae698b5.js"><link rel="prefetch" href="/assets/js/53.961c4157.js"><link rel="prefetch" href="/assets/js/54.c5979d45.js"><link rel="prefetch" href="/assets/js/55.3c1fbcca.js"><link rel="prefetch" href="/assets/js/56.498de876.js"><link rel="prefetch" href="/assets/js/57.8c1c1a48.js"><link rel="prefetch" href="/assets/js/58.39c23a96.js"><link rel="prefetch" href="/assets/js/59.93c11385.js"><link rel="prefetch" href="/assets/js/6.9dafb709.js"><link rel="prefetch" href="/assets/js/60.3ecdf03a.js"><link rel="prefetch" href="/assets/js/61.e7cd083d.js"><link rel="prefetch" href="/assets/js/62.abce1f90.js"><link rel="prefetch" href="/assets/js/63.4e194800.js"><link rel="prefetch" href="/assets/js/64.f166db1a.js"><link rel="prefetch" href="/assets/js/65.982109c1.js"><link rel="prefetch" href="/assets/js/66.ac2f358b.js"><link rel="prefetch" href="/assets/js/67.b67d6b07.js"><link rel="prefetch" href="/assets/js/68.d829d2b0.js"><link rel="prefetch" href="/assets/js/69.45b49843.js"><link rel="prefetch" href="/assets/js/7.a0276b27.js"><link rel="prefetch" href="/assets/js/70.bd774ae6.js"><link rel="prefetch" href="/assets/js/71.3cde9828.js"><link rel="prefetch" href="/assets/js/72.107bf470.js"><link rel="prefetch" href="/assets/js/73.7007a5ce.js"><link rel="prefetch" href="/assets/js/74.6e08bbcf.js"><link rel="prefetch" href="/assets/js/75.85f8da42.js"><link rel="prefetch" href="/assets/js/76.dfc3e8df.js"><link rel="prefetch" href="/assets/js/77.dfc7b715.js"><link rel="prefetch" href="/assets/js/78.c3949c54.js"><link rel="prefetch" href="/assets/js/79.005ff1d3.js"><link rel="prefetch" href="/assets/js/8.26d59edf.js"><link rel="prefetch" href="/assets/js/80.ec5caca7.js"><link rel="prefetch" href="/assets/js/81.ead29b4b.js"><link rel="prefetch" href="/assets/js/82.5b38b340.js"><link rel="prefetch" href="/assets/js/83.82d06e5e.js"><link rel="prefetch" href="/assets/js/84.e1fb9c56.js"><link rel="prefetch" href="/assets/js/85.5a0444f5.js"><link rel="prefetch" href="/assets/js/86.edb78780.js"><link rel="prefetch" href="/assets/js/87.3e1eb65b.js"><link rel="prefetch" href="/assets/js/88.d1bbb465.js"><link rel="prefetch" href="/assets/js/89.dec7a427.js"><link rel="prefetch" href="/assets/js/9.404400bd.js"><link rel="prefetch" href="/assets/js/90.0cebc9de.js"><link rel="prefetch" href="/assets/js/91.50d7a5f4.js"><link rel="prefetch" href="/assets/js/92.7b58335d.js"><link rel="prefetch" href="/assets/js/93.e3c416f6.js"><link rel="prefetch" href="/assets/js/94.1bb74f5e.js"><link rel="prefetch" href="/assets/js/95.34cb0a21.js"><link rel="prefetch" href="/assets/js/96.2e54bee1.js"><link rel="prefetch" href="/assets/js/97.4b5fab2d.js"><link rel="prefetch" href="/assets/js/98.a83c1edb.js"><link rel="prefetch" href="/assets/js/99.8a2757cd.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.c4426655.js">
    <link rel="stylesheet" href="/assets/css/0.styles.76f153c4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="前端知识" class="logo"> <span class="site-name can-hide">前端知识</span></a> <div class="links" style="max-width:nullpx;"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/catalog.html" class="nav-link">目录</a></div><div class="nav-item"><a href="/doc/es6/" class="nav-link">ES6</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">javascript</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc/js/" class="nav-link router-link-active">js</a></li><li class="dropdown-item"><!----> <a href="/doc/js/standardLibrary/" class="nav-link">js标准库</a></li><li class="dropdown-item"><!----> <a href="/doc/dom/" class="nav-link">dom操作文档</a></li><li class="dropdown-item"><!----> <a href="/doc/designPattern/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><a href="/doc/browserNetwork/" class="nav-link">浏览器</a></div><div class="nav-item"><a href="/doc/css/" class="nav-link">CSS</a></div><div class="nav-item"><a href="/doc/react/" class="nav-link">react</a></div><div class="nav-item"><a href="/doc/vue/" class="nav-link">vue</a></div><div class="nav-item"><a href="/doc/typeScript/" class="nav-link">TypeScript</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/doc/node/" class="nav-link">node</a></li><li class="dropdown-item"><!----> <a href="/doc/tool/" class="nav-link">工具</a></li><li class="dropdown-item"><!----> <a href="/doc/tool/echarts/" class="nav-link">echarts</a></li><li class="dropdown-item"><!----> <a href="/doc/problem/" class="nav-link">常见问题</a></li></ul></div></div> <a href="https://github.com/yulilong/front-end-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/catalog.html" class="nav-link">目录</a></div><div class="nav-item"><a href="/doc/es6/" class="nav-link">ES6</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">javascript</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc/js/" class="nav-link router-link-active">js</a></li><li class="dropdown-item"><!----> <a href="/doc/js/standardLibrary/" class="nav-link">js标准库</a></li><li class="dropdown-item"><!----> <a href="/doc/dom/" class="nav-link">dom操作文档</a></li><li class="dropdown-item"><!----> <a href="/doc/designPattern/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><a href="/doc/browserNetwork/" class="nav-link">浏览器</a></div><div class="nav-item"><a href="/doc/css/" class="nav-link">CSS</a></div><div class="nav-item"><a href="/doc/react/" class="nav-link">react</a></div><div class="nav-item"><a href="/doc/vue/" class="nav-link">vue</a></div><div class="nav-item"><a href="/doc/typeScript/" class="nav-link">TypeScript</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/doc/node/" class="nav-link">node</a></li><li class="dropdown-item"><!----> <a href="/doc/tool/" class="nav-link">工具</a></li><li class="dropdown-item"><!----> <a href="/doc/tool/echarts/" class="nav-link">echarts</a></li><li class="dropdown-item"><!----> <a href="/doc/problem/" class="nav-link">常见问题</a></li></ul></div></div> <a href="https://github.com/yulilong/front-end-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/doc/js/" class="sidebar-link">JavaScript部分说明</a></li><li><a href="/doc/js/001-对象原型继承.html" class="sidebar-link">对象原型继承</a></li><li><a href="/doc/js/002-this_call_apply_bind.html" class="sidebar-link">this、call、apply、bind</a></li><li><a href="/doc/js/003-数据类型转换.html" class="sidebar-link">数据类型转换</a></li><li><a href="/doc/js/004-跨域.html" class="sidebar-link">跨域</a></li><li><a href="/doc/js/005-Ajax.html" class="sidebar-link">Ajax</a></li><li><a href="/doc/js/007-作用域-执行环境.html" class="sidebar-link">作用域</a></li><li><a href="/doc/js/008-排序算法.html" class="sidebar-link">排序算法</a></li><li><a href="/doc/js/009-获取标签宽高及实例.html" class="sidebar-link">获取标签的宽高及例子</a></li><li><a href="/doc/js/013-JS数字计算精度和显示.html" class="sidebar-link">Number运算精度和大数显示问题</a></li><li><a href="/doc/js/014-Web-Worker使用教程.html" class="sidebar-link">Web Worker 使用教程</a></li><li><a href="/doc/js/015-JS常见问题解决.html" class="sidebar-link">JS常见问题解决</a></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>JS效果-代码片段</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/doc/js/01-js-example/01-常用的代码片段.html" class="one-level one-level-active active sidebar-link">常用代码片段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/js/01-js-example/01-常用的代码片段.html#_1-document" class="sidebar-link">1. document</a></li><li class="sidebar-sub-header"><a href="/doc/js/01-js-example/01-常用的代码片段.html#_2-javascript-相关" class="sidebar-link">2. JavaScript 相关</a></li><li class="sidebar-sub-header"><a href="/doc/js/01-js-example/01-常用的代码片段.html#_3-js数字相关的" class="sidebar-link">3. JS数字相关的</a></li><li class="sidebar-sub-header"><a href="/doc/js/01-js-example/01-常用的代码片段.html#其他参考资料" class="sidebar-link">其他参考资料</a></li></ul></li><li><a href="/doc/js/01-js-example/02-示例1.html" class="sidebar-link">代码示例1</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>函数</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/doc/js/006-函数.html" class="sidebar-link">函数</a></li><li><a href="/doc/js/006-1函数柯里化.html" class="sidebar-link">函数柯里化</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>JS代码执行机制和事件循环</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>高级</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>文章</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/doc/js/blog/001-JS常用的60余种工具方法.html" class="sidebar-link">JS常用的60余种工具方法</a></li><li><a href="/doc/js/blog/002-js数据类型判断.html" class="sidebar-link">JS数据类型判断</a></li><li><a href="/doc/js/blog/003-js开启摄像头照相人脸识别.html" class="sidebar-link">页面开启摄像头照相</a></li><li><a href="/doc/js/blog/004-浏览器控制台反调试.html" class="sidebar-link">浏览器控制台反调试</a></li><li><a href="/doc/js/blog/006-JS调用iframe中页面dom.html" class="sidebar-link">前端JS调用iframe中页面事件实现</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><p></p><div class="table-of-contents"><ul><li><a href="#_1-document">1. document</a><ul><li><a href="#_1-1-自动点击按钮">1.1 自动点击按钮</a></li><li><a href="#_1-2-html加载完毕再执行js">1.2 HTML加载完毕再执行JS</a></li><li><a href="#_1-3-js设置div高度、最小高度">1.3 JS设置div高度、最小高度</a></li><li><a href="#_1-4-js实现页面跳转">1.4 JS实现页面跳转</a></li><li><a href="#_1-5-事件委托指定子节点才出发事件">1.5 事件委托指定子节点才出发事件</a></li><li><a href="#_1-6-获取浏览器窗口宽度">1.6 获取浏览器窗口宽度</a></li><li><a href="#_1-7-文档的总高度-页面内容的总高度">1.7 文档的总高度(页面内容的总高度)</a></li><li><a href="#_1-8-获取浏览器可见部分的高度">1.8 获取浏览器可见部分的高度</a></li><li><a href="#_1-9-获取url上的参数-解决参数中文乱码">1.9 获取URL上的参数,解决参数中文乱码</a></li><li><a href="#_1-10-使用js页面跳转">1.10 使用JS页面跳转</a></li><li><a href="#_1-11-元素懒加载：滚动到底部触发事件">1.11 元素懒加载：滚动到底部触发事件</a></li><li><a href="#_1-12-scroll：页面已经滚动了多少距离">1.12 scroll：页面已经滚动了多少距离</a></li><li><a href="#_1-13-scroll：设置滚动到顶部">1.13 scroll：设置滚动到顶部</a></li><li><a href="#_1-14-获取一个元素距离顶部的高度">1.14 获取一个元素距离顶部的高度</a></li><li><a href="#_1-15-scroll：设置元素滚动到可视区域">1.15 scroll：设置元素滚动到可视区域</a></li><li><a href="#_1-16-js根据图片的url获取图片的像素-宽高">1.16 JS根据图片的url获取图片的像素(宽高)</a></li></ul></li><li><a href="#_2-javascript-相关">2. JavaScript 相关</a><ul><li><a href="#_2-1-遍历对象属性，获取对象中key，做相关操作">2.1 遍历对象属性，获取对象中key，做相关操作</a></li><li><a href="#_2-2-阻止事件冒泡">2.2 阻止事件冒泡</a></li><li><a href="#_2-3-阻止浏览器的默认行为">2.3 阻止浏览器的默认行为</a></li><li><a href="#_2-4-input输入框事件：获取焦点、失去焦点、值发生改变">2.4 input输入框事件：获取焦点、失去焦点、值发生改变</a></li><li><a href="#_2-5-js实现input输入框高度自适应">2.5 JS实现Input输入框高度自适应</a></li><li><a href="#_2-6-自定义一个事件监听">2.6 自定义一个事件监听</a></li><li><a href="#_2-7-复制一个对象-深拷贝">2.7 复制一个对象(深拷贝)</a></li><li><a href="#_2-8-es6语法的解构赋值和扩展运算符">2.8 ES6语法的解构赋值和扩展运算符</a></li><li><a href="#_2-9-函数防抖">2.9 函数防抖</a></li><li><a href="#_2-10-js让时间显示为多久以前">2.10 JS让时间显示为多久以前</a></li><li><a href="#_2-11-文件大小单位转换kb、mb、gb">2.11 文件大小单位转换KB、MB、GB</a></li><li><a href="#_2-12-js处理文件下载方法">2.12 JS处理文件下载方法</a></li><li><a href="#_2-13-获取文件的扩展名">2.13 获取文件的扩展名</a></li><li><a href="#_2-14-代码判断ie浏览器">2.14 代码判断IE浏览器</a></li><li><a href="#_2-15-js屏蔽iframe调用">2.15 JS屏蔽iframe调用</a></li><li><a href="#_2-16-js关闭当前页面">2.16 JS关闭当前页面</a></li><li><a href="#_2-17-js判断浏览器是pc端还是移动端">2.17 JS判断浏览器是PC端还是移动端</a></li></ul></li><li><a href="#_3-js数字相关的">3. JS数字相关的</a><ul><li><a href="#_3-1-数字千分位格式化">3.1 数字千分位格式化</a></li><li><a href="#_3-2-数字相除结果保留4位小数">3.2 数字相除结果保留4位小数</a></li></ul></li><li><a href="#其他参考资料">其他参考资料</a></li></ul></div>
[TOC]<p></p> <h1 id="常用代码片段"><a href="#常用代码片段" aria-hidden="true" class="header-anchor">#</a> 常用代码片段</h1> <h2 id="_1-document"><a href="#_1-document" aria-hidden="true" class="header-anchor">#</a> 1. document</h2> <h3 id="_1-1-自动点击按钮"><a href="#_1-1-自动点击按钮" aria-hidden="true" class="header-anchor">#</a> 1.1 自动点击按钮</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>one<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>1234<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'one'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//获取元素div</span>
  div<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token comment">//给元素增加点击事件</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我被点击了'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_1-2-html加载完毕再执行js"><a href="#_1-2-html加载完毕再执行js" aria-hidden="true" class="header-anchor">#</a> 1.2 HTML加载完毕再执行JS</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onload</span><span class="token operator">=</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;页面加载完毕&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-3-js设置div高度、最小高度"><a href="#_1-3-js设置div高度、最小高度" aria-hidden="true" class="header-anchor">#</a> 1.3 JS设置div高度、最小高度</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style language-css">
  <span class="token selector">.one</span> <span class="token punctuation">{</span> <span class="token property">border</span><span class="token punctuation">:</span> 1px solid red<span class="token punctuation">;</span> <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>one<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 1111 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">var</span> one <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.one&quot;</span><span class="token punctuation">)</span>
  one<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">&quot;100px&quot;</span><span class="token punctuation">;</span>
  one<span class="token punctuation">.</span>style<span class="token punctuation">.</span>minHeight <span class="token operator">=</span> <span class="token string">&quot;200px&quot;</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_1-4-js实现页面跳转"><a href="#_1-4-js实现页面跳转" aria-hidden="true" class="header-anchor">#</a> 1.4 JS实现页面跳转</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>new_page()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>在新窗口打开s<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>old_page()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>跳转后有后退功能<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>replace()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>跳转后没有后退功能<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">function</span> <span class="token function">old_page</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>  window<span class="token punctuation">.</span>location <span class="token operator">=</span> <span class="token string">&quot;about.html&quot;</span> <span class="token punctuation">}</span> 
  <span class="token keyword">function</span> <span class="token function">replace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>  window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;about.html&quot;</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> 
  <span class="token keyword">function</span> <span class="token function">new_page</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>  window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;about.html&quot;</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> 
  <span class="token comment">// window.history.back(-1);	返回上一页 返回两个页面: history.go(-2); </span>
  <span class="token comment">// window.history.go(-1)；</span>
  <span class="token comment">// window.navigate(&quot;xx.jsp&quot;); </span>
  <span class="token comment">// self.location='xx.htm';  self:当前窗口对象（如果是在iframe里，则为该框架的窗口对象）</span>
  <span class="token comment">// 第一种：直接跳转加参数</span>
  <span class="token comment">// window.location.href=&quot;login.jsp?backurl=&quot;+window.location.href; </span>
  <span class="token comment">// </span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">'http://www.baidu.com'</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>window.location 属性是兼容所有浏览器的。因此在实现页面跳转的时候这个比较常用。</p> <p>window.navigate(&quot;http://xx.html/&quot;) 这个方法是只针对IE的，不适用于火狐等其他浏览器，在HTML DOM Window Object中，根本没有列出window.navigate这个方法，所以这个方法尽量少用。</p> <h3 id="_1-5-事件委托指定子节点才出发事件"><a href="#_1-5-事件委托指定子节点才出发事件" aria-hidden="true" class="header-anchor">#</a> 1.5 事件委托指定子节点才出发事件</h3> <p>现在给一个场景 ul &gt; li &gt; div &gt; p，div占满li，p占满div，给ul绑定时间，需要判断点击的是不是li标签。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>11111111111<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>11111111111<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>3333333333<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>4444444<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>如上列表，有4个li，里面的内容各不相同，点击li，event对象肯定是当前点击的对象，怎么指定到li上，下面我直接给解决方案：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> oUl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
oUl<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> target <span class="token operator">=</span> ev<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span>target <span class="token operator">!==</span> oUl <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'li click~'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    target <span class="token operator">=</span> target<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>参考资料：https://www.cnblogs.com/liugang-vip/p/5616484.html</p> <h3 id="_1-6-获取浏览器窗口宽度"><a href="#_1-6-获取浏览器窗口宽度" aria-hidden="true" class="header-anchor">#</a> 1.6 获取浏览器窗口宽度</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 浏览器窗口的宽度</span>
<span class="token function">getClientWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> clientWidth <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> bodyClientWidth <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> documentClientWidth <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">{</span> bodyClientWidth <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">)</span><span class="token punctuation">{</span>
    documentClientWidth <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  clientWidth <span class="token operator">=</span> <span class="token punctuation">(</span>bodyClientWidth <span class="token operator">-</span> documentClientWidth <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> bodyClientWidth <span class="token punctuation">:</span> documentClientWidth<span class="token punctuation">;</span>
  <span class="token keyword">return</span> clientWidth<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-7-文档的总高度-页面内容的总高度"><a href="#_1-7-文档的总高度-页面内容的总高度" aria-hidden="true" class="header-anchor">#</a> 1.7 文档的总高度(页面内容的总高度)</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//文档的总高度</span>
getScrollHeight<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> scrollHeight <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> bodyScrollHeight <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> documentScrollHeight <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">{</span> bodyScrollHeight <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollHeight<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">)</span><span class="token punctuation">{</span>
    documentScrollHeight <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollHeight<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  scrollHeight <span class="token operator">=</span> <span class="token punctuation">(</span>bodyScrollHeight <span class="token operator">-</span> documentScrollHeight <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> bodyScrollHeight <span class="token punctuation">:</span> documentScrollHeight<span class="token punctuation">;</span>
  <span class="token keyword">return</span> scrollHeight<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-8-获取浏览器可见部分的高度"><a href="#_1-8-获取浏览器可见部分的高度" aria-hidden="true" class="header-anchor">#</a> 1.8 获取浏览器可见部分的高度</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 获取浏览器可见部分的高度</span>
getWindowHeight<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> windowHeight <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>compatMode <span class="token operator">==</span> <span class="token string">&quot;CSS1Compat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    windowHeight <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span> 
    windowHeight <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span> 
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> windowHeight<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-9-获取url上的参数-解决参数中文乱码"><a href="#_1-9-获取url上的参数-解决参数中文乱码" aria-hidden="true" class="header-anchor">#</a> 1.9 获取URL上的参数,解决参数中文乱码</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getParams</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'(^|&amp;)'</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'=([^&amp;]*)(&amp;|$)'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// decodeURI就是解决中文乱码问题的</span>
  <span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token function">decodeURI</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>r <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">unescape</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token function">getParams</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// chrome浏览器调试工具</span>
<span class="token comment">// https://www.baidu.com/?aa=baladadasjj%E5%B7%B4%E6%8B%89&amp;bb=dsadadada</span>
</code></pre></div><h3 id="_1-10-使用js页面跳转"><a href="#_1-10-使用js页面跳转" aria-hidden="true" class="header-anchor">#</a> 1.10 使用JS页面跳转</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 当前页面跳转</span>
window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>origin <span class="token operator">+</span> <span class="token string">'/#/'</span> <span class="token operator">+</span> targetLink<span class="token punctuation">;</span>
window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&quot;http://www.baidu.com&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 在新窗口中打开页面</span>
window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;http://www.baidu.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_1-11-元素懒加载：滚动到底部触发事件"><a href="#_1-11-元素懒加载：滚动到底部触发事件" aria-hidden="true" class="header-anchor">#</a> 1.11 元素懒加载：滚动到底部触发事件</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>father<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>son<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>son<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>son<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>son<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>son<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>son<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.father</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span> <span class="token property">border</span><span class="token punctuation">:</span> 1px solid<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.son</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>100, 200, 100, 0.5<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> father <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.father'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
father<span class="token punctuation">.</span><span class="token function-variable function">onscroll</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> clientHeight <span class="token operator">=</span> father<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span> <span class="token comment">// 可视区域高度</span>
  <span class="token keyword">var</span> scrollHeight <span class="token operator">=</span> father<span class="token punctuation">.</span>scrollHeight<span class="token punctuation">;</span> <span class="token comment">// 滚动的总高度</span>
  <span class="token keyword">var</span> scrollTop <span class="token operator">=</span> father<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span> <span class="token comment">// 已经滚动的高度</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>scrollTop <span class="token operator">+</span> clientHeight <span class="token operator">===</span> scrollHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'已经滚动到底部了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;&lt;p class=co&gt;这是p标签&lt;/p&gt;&quot;</span> <span class="token operator">+</span> i<span class="token operator">++</span><span class="token punctuation">;</span>
    father<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>http://js.jirengu.com/yahec/1/edit?html,css,js</p> <p>别的参考链接：https://blog.csdn.net/u011215669/article/details/84947036</p> <h3 id="_1-12-scroll：页面已经滚动了多少距离"><a href="#_1-12-scroll：页面已经滚动了多少距离" aria-hidden="true" class="header-anchor">#</a> 1.12 scroll：页面已经滚动了多少距离</h3> <div class="language-js extra-class"><pre class="language-js"><code>getScrollTop<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> scrollTop <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> bodyScrollTop <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> documentScrollTop <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">{</span> bodyScrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">)</span><span class="token punctuation">{</span>
    documentScrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  scrollTop <span class="token operator">=</span> <span class="token punctuation">(</span>bodyScrollTop <span class="token operator">-</span> documentScrollTop <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> bodyScrollTop <span class="token punctuation">:</span> documentScrollTop<span class="token punctuation">;</span>
  <span class="token keyword">return</span> scrollTop<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-13-scroll：设置滚动到顶部"><a href="#_1-13-scroll：设置滚动到顶部" aria-hidden="true" class="header-anchor">#</a> 1.13 scroll：设置滚动到顶部</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">clickBackTop</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 执行动画间隔时间，毫秒</span>
  <span class="token keyword">const</span> spacingTime <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
  <span class="token comment">// 运动轨迹</span>
  <span class="token keyword">let</span> space <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> scrollTimer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> scrollTop <span class="token operator">=</span>  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>scrollTop <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> scrollTop <span class="token operator">-</span> space<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> scrollTop <span class="token operator">-</span> space<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      i <span class="token operator">===</span> space<span class="token punctuation">.</span>length ？ i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>scrollTimer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 清除计时器</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> spacingTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-14-获取一个元素距离顶部的高度"><a href="#_1-14-获取一个元素距离顶部的高度" aria-hidden="true" class="header-anchor">#</a> 1.14 获取一个元素距离顶部的高度</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getTop</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> realTop <span class="token operator">=</span> element<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span> <span class="token comment">// 距离父元素的高度</span>
  <span class="token keyword">var</span> parent <span class="token operator">=</span> element<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span> <span class="token comment">// 获取父元素</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>parent <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    realTop <span class="token operator">+=</span> parent<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
    parent <span class="token operator">=</span> parent<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> realTop<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> child <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;child&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> top <span class="token operator">=</span> <span class="token function">getTop</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_1-15-scroll：设置元素滚动到可视区域"><a href="#_1-15-scroll：设置元素滚动到可视区域" aria-hidden="true" class="header-anchor">#</a> 1.15 scroll：设置元素滚动到可视区域</h3> <p>当一个元素不在浏览器可视区域时，需要把元素显示在可视区域，比如一个表单字段很多，当点击确认按钮，校验失败，需要跳转到校验失败的字段，把校验失败的字段显示在可视区域的顶部，</p> <p>实现的方法是：</p> <ul><li>1、获取该元素距离页面顶部的距离top。</li> <li>2、谁知滚动条的滚动距离为top</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 设置元素显示在窗口可视区域</span>
<span class="token function-variable function">setViewableArea</span> <span class="token operator">=</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 上面的方法</span>
  <span class="token keyword">const</span> top <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTop</span><span class="token punctuation">(</span>dom<span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> top<span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> top<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-16-js根据图片的url获取图片的像素-宽高"><a href="#_1-16-js根据图片的url获取图片的像素-宽高" aria-hidden="true" class="header-anchor">#</a> 1.16 JS根据图片的url获取图片的像素(宽高)</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">'https://threemodel.oss-cn-beijing.aliyuncs.com/barcolor2.png'</span>
<span class="token keyword">const</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
image<span class="token punctuation">.</span>src <span class="token operator">=</span> url
image<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>width<span class="token punctuation">,</span> image<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2-javascript-相关"><a href="#_2-javascript-相关" aria-hidden="true" class="header-anchor">#</a> 2. JavaScript 相关</h2> <h3 id="_2-1-遍历对象属性，获取对象中key，做相关操作"><a href="#_2-1-遍历对象属性，获取对象中key，做相关操作" aria-hidden="true" class="header-anchor">#</a> 2.1 遍历对象属性，获取对象中key，做相关操作</h3> <p>遍历对象自己的属性：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> x<span class="token punctuation">:</span><span class="token keyword">null</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> undefined<span class="token punctuation">,</span> z<span class="token punctuation">:</span> <span class="token string">'tt'</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// eslint代码检查推荐：Object.prototype.hasOwnProperty.call(object, key)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>更简洁的写法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> x<span class="token punctuation">:</span><span class="token keyword">null</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> undefined<span class="token punctuation">,</span> z<span class="token punctuation">:</span> <span class="token string">'tt'</span><span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>key <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-2-阻止事件冒泡"><a href="#_2-2-阻止事件冒泡" aria-hidden="true" class="header-anchor">#</a> 2.2 阻止事件冒泡</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 阻止事件冒泡</span>
<span class="token keyword">function</span> <span class="token function">stopHandler</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>  
  <span class="token comment">// 如果提供了事件对象，则这是一个非IE浏览器</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span> e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>stopPropagation <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 因此它支持W3C的stopPropagation()方法</span>
    e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 否则，我们需要使用IE的方式来取消事件冒泡</span>
    window<span class="token punctuation">.</span>event<span class="token punctuation">.</span>cancelBubble <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>  
</code></pre></div><h3 id="_2-3-阻止浏览器的默认行为"><a href="#_2-3-阻止浏览器的默认行为" aria-hidden="true" class="header-anchor">#</a> 2.3 阻止浏览器的默认行为</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">stopDefault</span><span class="token punctuation">(</span> e <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//阻止默认浏览器动作(W3C)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span> e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>preventDefault <span class="token punctuation">)</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//IE中阻止函数器默认动作的方式</span>
  <span class="token keyword">else</span>
    window<span class="token punctuation">.</span>event<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-4-input输入框事件：获取焦点、失去焦点、值发生改变"><a href="#_2-4-input输入框事件：获取焦点、失去焦点、值发生改变" aria-hidden="true" class="header-anchor">#</a> 2.4 input输入框事件：获取焦点、失去焦点、值发生改变</h3> <ul><li>获取焦点：onFocus</li> <li>失去焦点：onBlur</li> <li>值发生改变：onchange</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>  <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onBlur</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span> <span class="token punctuation">&quot;</span></span> <span class="token attr-name">onFocus</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span> <span class="token punctuation">&quot;</span></span> <span class="token attr-name">onchange</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>function()<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="_2-5-js实现input输入框高度自适应"><a href="#_2-5-js实现input输入框高度自适应" aria-hidden="true" class="header-anchor">#</a> 2.5 JS实现Input输入框高度自适应</h3> <p>html：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>textarea<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>回复内容<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>CSS:</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">#textarea</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span>0 auto<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span>2px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">textarea</span> <span class="token punctuation">{</span>
    <span class="token property">outline</span><span class="token punctuation">:</span> 0 none<span class="token punctuation">;</span>
    <span class="token property">border-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>82, 168, 236, 0.8<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">box-shadow</span><span class="token punctuation">:</span> inset 0 1px 3px <span class="token function">rgba</span><span class="token punctuation">(</span>0, 0, 0, 0.1<span class="token punctuation">)</span>, 0 0 8px <span class="token function">rgba</span><span class="token punctuation">(</span>82, 168, 236, 0.6<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>JS:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
* 文本框根据输入内容自适应高度
* @param                {HTMLElement}        输入框元素
* @param                {Number}             设置光标与输入框保持的距离(默认0)
* @param                {Number}             设置最大高度(可选)
*/</span>
<span class="token keyword">var</span> <span class="token function-variable function">autoTextarea</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>elem<span class="token punctuation">,</span> extra<span class="token punctuation">,</span> maxHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  extra <span class="token operator">=</span> extra <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> isFirefox <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>document<span class="token punctuation">.</span>getBoxObjectFor <span class="token operator">||</span> <span class="token string">'mozInnerScreenX'</span> <span class="token keyword">in</span> window<span class="token punctuation">,</span>
      isOpera <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>window<span class="token punctuation">.</span>opera <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token operator">!</span>window<span class="token punctuation">.</span>opera<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'Opera'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function-variable function">addEvent</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>type<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        elem<span class="token punctuation">.</span>addEventListener <span class="token operator">?</span>
          elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">:</span>
        elem<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'on'</span> <span class="token operator">+</span> type<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      getStyle <span class="token operator">=</span> elem<span class="token punctuation">.</span>currentStyle <span class="token operator">?</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> val <span class="token operator">=</span> elem<span class="token punctuation">.</span>currentStyle<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">'height'</span> <span class="token operator">&amp;&amp;</span> val<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token regex">/px/i</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> rect <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> rect<span class="token punctuation">.</span>bottom <span class="token operator">-</span> rect<span class="token punctuation">.</span>top <span class="token operator">-</span>
            <span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token string">'paddingTop'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span>
            <span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token string">'paddingBottom'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>        
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> val<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      minHeight <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>resize <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> <span class="token function-variable function">change</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> scrollTop<span class="token punctuation">,</span> height<span class="token punctuation">,</span>
        padding <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
        style <span class="token operator">=</span> elem<span class="token punctuation">.</span>style<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>_length <span class="token operator">===</span> elem<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    elem<span class="token punctuation">.</span>_length <span class="token operator">=</span> elem<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isFirefox <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isOpera<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      padding <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token string">'paddingTop'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token string">'paddingBottom'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    scrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>

    elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> minHeight <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>scrollHeight <span class="token operator">&gt;</span> minHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>maxHeight <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>scrollHeight <span class="token operator">&gt;</span> maxHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        height <span class="token operator">=</span> maxHeight <span class="token operator">-</span> padding<span class="token punctuation">;</span>
        style<span class="token punctuation">.</span>overflowY <span class="token operator">=</span> <span class="token string">'auto'</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        height <span class="token operator">=</span> elem<span class="token punctuation">.</span>scrollHeight <span class="token operator">-</span> padding<span class="token punctuation">;</span>
        style<span class="token punctuation">.</span>overflowY <span class="token operator">=</span> <span class="token string">'hidden'</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      style<span class="token punctuation">.</span>height <span class="token operator">=</span> height <span class="token operator">+</span> extra <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
      scrollTop <span class="token operator">+=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>style<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">-</span> elem<span class="token punctuation">.</span>currHeight<span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> scrollTop<span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> scrollTop<span class="token punctuation">;</span>
      elem<span class="token punctuation">.</span>currHeight <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>style<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">addEvent</span><span class="token punctuation">(</span><span class="token string">'propertychange'</span><span class="token punctuation">,</span> change<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">addEvent</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> change<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">addEvent</span><span class="token punctuation">(</span><span class="token string">'focus'</span><span class="token punctuation">,</span> change<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 执行</span>
<span class="token keyword">var</span> text <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;textarea&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">autoTextarea</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 调用</span>
</code></pre></div><p>参考链接：https://www.cnblogs.com/milude0161/p/5264102.html</p> <h3 id="_2-6-自定义一个事件监听"><a href="#_2-6-自定义一个事件监听" aria-hidden="true" class="header-anchor">#</a> 2.6 自定义一个事件监听</h3> <p>有的时候发现有的事件没有监听方法，那么此时可以手动添加一个该事件的监听函数。</p> <p>添加一个pushState监听事件：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">_wr</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> orig <span class="token operator">=</span> history<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> rv <span class="token operator">=</span> orig<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    e<span class="token punctuation">.</span>arguments <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> rv<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
history<span class="token punctuation">.</span>pushState <span class="token operator">=</span> <span class="token function">_wr</span><span class="token punctuation">(</span><span class="token string">'pushState'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pushState'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听pushState'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>参考资料：https://juejin.im/post/5c2708cd6fb9a049f06a5744#heading-6</p> <h3 id="_2-7-复制一个对象-深拷贝"><a href="#_2-7-复制一个对象-深拷贝" aria-hidden="true" class="header-anchor">#</a> 2.7 复制一个对象(深拷贝)</h3> <p>1、如果只是需要简单地复制对象的属性，而不用考虑它的constructor，也不用考虑函数，正则，Data等特殊数据类型，可使用JSON来解决</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> c<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
b<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'a.c: '</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>c<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b.c: '</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>c<span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">;</span><span class="token punctuation">}</span>
  <span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果环境支持ES6语法以上，那么还可以使用扩展预算符：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> c<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>a<span class="token punctuation">}</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">360</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'a.c: '</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>c<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b.c: '</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>c<span class="token punctuation">)</span>
</code></pre></div><p>2、需要把函数，正则等特殊数据类型也考虑在内，或者当前环境不支持JSON时。这时，我们可以通过递归来实现对象的深层复制：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> newObj <span class="token operator">=</span> obj<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Array <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  newObj<span class="token punctuation">.</span>constructor <span class="token operator">=</span> obj<span class="token punctuation">.</span>constructor<span class="token punctuation">;</span>

  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
    <span class="token keyword">return</span> <span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token constant">JSON</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//若需要考虑特殊的数据类型，如正则，函数等，需把这个else if去掉即可</span>
    newObj <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> prop <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> RegExp <span class="token operator">||</span>obj<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> Date<span class="token punctuation">)</span><span class="token punctuation">{</span>
        newObj<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//递归</span>
        newObj<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        newObj<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> 
  <span class="token keyword">return</span> newObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>参考资料：https://segmentfault.com/a/1190000008891000</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 深层复制
 * @param source    要复制的对象
 * @returns {[]|{}}
 */</span>
<span class="token keyword">function</span> <span class="token function">deepClone</span> <span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>source <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> source <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'error arguments'</span><span class="token punctuation">,</span> <span class="token string">'shallowClone'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> targetObj <span class="token operator">=</span> source<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Array <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> keys <span class="token keyword">in</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>source<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>source<span class="token punctuation">[</span>keys<span class="token punctuation">]</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> RegExp <span class="token operator">||</span>source<span class="token punctuation">[</span>keys<span class="token punctuation">]</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> Date<span class="token punctuation">)</span><span class="token punctuation">{</span>
        newObj<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>source<span class="token punctuation">[</span>keys<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> source<span class="token punctuation">[</span>keys<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 用于递归调用时，报错了，这个还有值</span>
        targetObj<span class="token punctuation">[</span>keys<span class="token punctuation">]</span> <span class="token operator">=</span> source<span class="token punctuation">[</span>keys<span class="token punctuation">]</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> Array <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        targetObj<span class="token punctuation">[</span>keys<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>source<span class="token punctuation">[</span>keys<span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        targetObj<span class="token punctuation">[</span>keys<span class="token punctuation">]</span> <span class="token operator">=</span> source<span class="token punctuation">[</span>keys<span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> targetObj
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-8-es6语法的解构赋值和扩展运算符"><a href="#_2-8-es6语法的解构赋值和扩展运算符" aria-hidden="true" class="header-anchor">#</a> 2.8 ES6语法的解构赋值和扩展运算符</h3> <h4 id="_2-8-1-解构赋值"><a href="#_2-8-1-解构赋值" aria-hidden="true" class="header-anchor">#</a> 2.8.1 解构赋值</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>bar<span class="token punctuation">,</span> foo<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>foo <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> foo<span class="token punctuation">,</span> bar <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token string">'aaa'</span><span class="token punctuation">,</span> bar<span class="token punctuation">:</span> <span class="token string">'bbb'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 如果变量名与属性名不一致，必须写成下面这样</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> baz <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token string">'aaa'</span><span class="token punctuation">,</span> bar<span class="token punctuation">:</span> <span class="token string">'bbb'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// baz === &quot;aaa&quot;</span>
</code></pre></div><p>上面代码表示，可以从数组中提取值，按照对应位置，对变量赋值。
如果解构不成功，变量的值就等于<code>undefined</code>。
解构赋值允许指定默认值。</p> <p>解构不仅可以用于数组，还可以用于对象。变量必须与属性同名，才能取到正确的值。</p> <p>注意，ES6 内部使用严格相等运算符（<code>===</code>），判断一个位置是否有值。所以，只有当一个数组成员严格等于<code>undefined</code>，默认值才会生效。</p> <p><a href="http://es6.ruanyifeng.com/?search=%E6%89%A9%E5%B1%95%E9%A2%84%E7%AE%97%E7%AC%A6&x=0&y=0#docs/destructuring" target="_blank" rel="noopener noreferrer">ES6 变量的解构赋值 阮一峰<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="_2-8-2-扩展运算符"><a href="#_2-8-2-扩展运算符" aria-hidden="true" class="header-anchor">#</a> 2.8.2 扩展运算符</h4> <p>扩展运算符（spread）是三个点（<code>...</code>）。它好比 rest 参数的逆运算，将一个数组转为用逗号分隔的参数序列。该运算符主要用于函数调用。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>					<span class="token comment">// 1 2 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>		<span class="token comment">// 1 2 3 4 5</span>
</code></pre></div><p><a href="http://es6.ruanyifeng.com/?search=%E6%89%A9%E5%B1%95%E8%BF%90%E7%AE%97%E7%AC%A6&x=0&y=0#docs/array" target="_blank" rel="noopener noreferrer">ES6 数组的扩展运算符<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ES2018在对象中引入了扩展运算符，也可以对对象使用扩展运算符</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> c<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>a<span class="token punctuation">}</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">360</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'a.c: '</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>c<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b.c: '</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>c<span class="token punctuation">)</span>
</code></pre></div><p>上面的代码实现了简单的对象深拷贝。</p> <p>参考资料：</p> <p>https://www.cnblogs.com/chrischjh/p/4848934.html</p> <h3 id="_2-9-函数防抖"><a href="#_2-9-函数防抖" aria-hidden="true" class="header-anchor">#</a> 2.9 函数防抖</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * 防抖函数
 * @param  {function}   func    执行的函数
 * @param  {number}     delay   延迟执行的时间
 * @return {function}           包装过的支持防抖动函数
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">debounce</span> <span class="token operator">=</span> <span class="token punctuation">(</span>func<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timerId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> context<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>timerId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span><span class="token function">clearTimeout</span><span class="token punctuation">(</span>timerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
      timerId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    timerId <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      func<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      timerId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-10-js让时间显示为多久以前"><a href="#_2-10-js让时间显示为多久以前" aria-hidden="true" class="header-anchor">#</a> 2.10 JS让时间显示为多久以前</h3> <p>根据这个参考：https://segmentfault.com/a/1190000005625314</p> <p>在上面参考的基础上，改为使用<a href="http://momentjs.cn/" target="_blank" rel="noopener noreferrer">moment<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 分钟、小时、天、月、年的秒数</span>
<span class="token keyword">const</span> longTime <span class="token operator">=</span> <span class="token punctuation">{</span>
  minute<span class="token punctuation">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
  hour<span class="token punctuation">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">,</span>
  day<span class="token punctuation">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">,</span>
  month<span class="token punctuation">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">30</span><span class="token punctuation">,</span>
  year<span class="token punctuation">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">30</span> <span class="token operator">*</span> <span class="token number">12</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 获取时间距离当前间隔
 * @param  {string} time    时间，格式为：'2020-01-06 10:12:54' 或者为时间戳
 * @return {string}         返回多久以前，比如： 12秒前，5天前
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">getTime</span> <span class="token operator">=</span> time <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> limit <span class="token operator">=</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">diff</span><span class="token punctuation">(</span><span class="token function">moment</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'second'</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> content <span class="token operator">=</span> <span class="token string">''</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>limit <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> limit <span class="token operator">&lt;</span> longTime<span class="token punctuation">.</span>minute<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    content <span class="token operator">=</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>limit<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">S前`</span></span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>limit <span class="token operator">&gt;=</span> longTime<span class="token punctuation">.</span>minute <span class="token operator">&amp;&amp;</span> limit <span class="token operator">&lt;</span> longTime<span class="token punctuation">.</span>hour<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    content <span class="token operator">=</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>limit <span class="token operator">/</span> longTime<span class="token punctuation">.</span>minute<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">分钟前`</span></span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>limit <span class="token operator">&gt;=</span> longTime<span class="token punctuation">.</span>hour <span class="token operator">&amp;&amp;</span> limit <span class="token operator">&lt;</span> longTime<span class="token punctuation">.</span>day<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    content <span class="token operator">=</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>limit <span class="token operator">/</span> longTime<span class="token punctuation">.</span>hour<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">小时前`</span></span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>limit <span class="token operator">&gt;=</span> longTime<span class="token punctuation">.</span>day <span class="token operator">&amp;&amp;</span> limit <span class="token operator">&lt;</span> longTime<span class="token punctuation">.</span>month<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    content <span class="token operator">=</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>limit <span class="token operator">/</span> longTime<span class="token punctuation">.</span>day<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">天前`</span></span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>limit <span class="token operator">&gt;=</span> longTime<span class="token punctuation">.</span>month <span class="token operator">&amp;&amp;</span> limit <span class="token operator">&lt;</span> longTime<span class="token punctuation">.</span>year<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    content <span class="token operator">=</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>limit <span class="token operator">/</span> longTime<span class="token punctuation">.</span>month<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">个月前`</span></span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>limit <span class="token operator">&gt;=</span> longTime<span class="token punctuation">.</span>year<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    content <span class="token operator">=</span> <span class="token string">'很久前'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> content
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-11-文件大小单位转换kb、mb、gb"><a href="#_2-11-文件大小单位转换kb、mb、gb" aria-hidden="true" class="header-anchor">#</a> 2.11 文件大小单位转换KB、MB、GB</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 格式化文件单位
 *
 * @param  {number | string} value      文件大小
 * @param  {array}           unitList   单位，数组第一个元素是传入的单位
 */</span>
<span class="token function">formatFileSize</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> unitList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> unit <span class="token operator">=</span> unitList <span class="token operator">||</span> <span class="token punctuation">[</span> <span class="token string">&quot;Bytes&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;KB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;MB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;GB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;TB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;PB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;EB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ZB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;YB&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">Number</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">0</span> <span class="token operator">+</span> unit<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> advancedUnit <span class="token operator">=</span> <span class="token number">1024</span><span class="token punctuation">;</span> <span class="token comment">// 进制单位</span>
  <span class="token keyword">const</span> originValue <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// unit单位索引</span>
  <span class="token keyword">let</span> index <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>originValue<span class="token punctuation">)</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>advancedUnit<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 如果转换的单位超出了 单位数组范围，那么取到单位数组最后一位为止</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> unit<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    index <span class="token operator">=</span> unit<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> resultValue <span class="token operator">=</span> <span class="token punctuation">(</span>originValue <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> resultValue <span class="token operator">+</span> unit<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>其他类似写法：https://www.cnblogs.com/willingtolove/p/9409979.html</p> <h3 id="_2-12-js处理文件下载方法"><a href="#_2-12-js处理文件下载方法" aria-hidden="true" class="header-anchor">#</a> 2.12 JS处理文件下载方法</h3> <p>1、先调用接口获取到下载的资源，然后在下载到电脑本地，当文件很大，非常耗时的时候，会造成点击下载按钮自后，页面好像没有执行，没有反应，只有等文件资源全部下载结束，才会显示正在下载</p> <ul><li>使用fetch</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">downLoad</span> <span class="token operator">=</span> <span class="token punctuation">(</span>record<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token punctuation">{</span> fileKey<span class="token punctuation">:</span> record<span class="token punctuation">.</span>fileId <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> downloadUrl <span class="token operator">=</span> <span class="token string">'/api/downLoad'</span><span class="token punctuation">;</span>
  <span class="token function">fetch</span><span class="token punctuation">(</span>downloadUrl<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    method<span class="token punctuation">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
    body<span class="token punctuation">:</span> window<span class="token punctuation">.</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">,</span>
    credentials<span class="token punctuation">:</span> <span class="token string">'include'</span><span class="token punctuation">,</span>
    headers<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Headers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    response<span class="token punctuation">.</span><span class="token function">blob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>blob <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>navigator <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>msSaveOrOpenBlob<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span><span class="token function">msSaveOrOpenBlob</span><span class="token punctuation">(</span>blob<span class="token punctuation">,</span> record<span class="token punctuation">.</span>origFileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> aLink <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>aLink<span class="token punctuation">)</span><span class="token punctuation">;</span>
        aLink<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> objectUrl <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
        aLink<span class="token punctuation">.</span>href <span class="token operator">=</span> objectUrl<span class="token punctuation">;</span>
        aLink<span class="token punctuation">.</span>download <span class="token operator">=</span> record<span class="token punctuation">.</span>origFileName<span class="token punctuation">;</span>
        aLink<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>aLink<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(error);</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>使用axios</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> downloadUrl <span class="token operator">=</span> <span class="token string">'/api/downLoad'</span><span class="token punctuation">;</span>
<span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  url<span class="token punctuation">:</span> downloadUrl<span class="token punctuation">,</span>
  method<span class="token punctuation">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
  headers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> formData
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;res: &quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> fileName <span class="token operator">=</span> info<span class="token punctuation">.</span>fileName<span class="token punctuation">;</span>
  <span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>res<span class="token punctuation">.</span>data<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// const blob = new Blob([res.data], {type: 'application/vnd.ms-excel'});</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>navigator <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>msSaveOrOpenBlob<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span><span class="token function">msSaveOrOpenBlob</span><span class="token punctuation">(</span>blob<span class="token punctuation">,</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> aLink <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>aLink<span class="token punctuation">)</span><span class="token punctuation">;</span>
    aLink<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> objectUrl <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
    aLink<span class="token punctuation">.</span>href <span class="token operator">=</span> objectUrl<span class="token punctuation">;</span>
    aLink<span class="token punctuation">.</span>download <span class="token operator">=</span> fileName<span class="token punctuation">;</span>
    aLink<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>aLink<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>2、直接打开链接，然后直接就显示下载的内容，这种的适用更广泛</p> <ul><li>使用form表单形式</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// fileKey: 文件标识</span>
<span class="token comment">// downloadUrl: 下载url路径</span>
<span class="token comment">// currentUserAccount: 需要的其他参数</span>
<span class="token keyword">function</span> <span class="token function">handleDownload</span> <span class="token punctuation">(</span> fileKey<span class="token punctuation">,</span> downloadUrl<span class="token punctuation">,</span> currentUserAccount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> form <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'form'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  form<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">,</span> <span class="token string">'display:none'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  form<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'method'</span><span class="token punctuation">,</span> <span class="token string">'post'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  form<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'action'</span><span class="token punctuation">,</span> downloadUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
  form<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'target'</span><span class="token punctuation">,</span> <span class="token string">'_blank'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> inputFileKey <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  inputFileKey<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">,</span> <span class="token string">'hidden'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  inputFileKey<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'fileKey'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  inputFileKey<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">,</span> fileKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
  form<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>inputFileKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> inputCurrentUserAccount <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  inputCurrentUserAccount<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">,</span> <span class="token string">'hidden'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  inputCurrentUserAccount<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'currentUserAccount'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  inputCurrentUserAccount<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">,</span> currentUserAccount<span class="token punctuation">)</span><span class="token punctuation">;</span>
  form<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>inputCurrentUserAccount<span class="token punctuation">)</span><span class="token punctuation">;</span>

  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>form<span class="token punctuation">)</span><span class="token punctuation">;</span>
  form<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  form<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>a标签，触发点击下载</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">handleDownload</span> <span class="token punctuation">(</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> aLink <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  aLink<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
  aLink<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token template-string"><span class="token string">`/api/download?id=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;aaa=33`</span></span><span class="token punctuation">;</span> <span class="token comment">// 下载链接</span>
  aLink<span class="token punctuation">.</span>download <span class="token operator">=</span> <span class="token string">'文件.xls'</span><span class="token punctuation">;</span> <span class="token comment">// 下载文件名字</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>aLink<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a标签添加到html中</span>
  aLink<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 触发点击事件，下载文件</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>aLink<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 删除添加的标签</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-13-获取文件的扩展名"><a href="#_2-13-获取文件的扩展名" aria-hidden="true" class="header-anchor">#</a> 2.13 获取文件的扩展名</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 参数fileName是文件名(带扩展名)，字符串形式，如：'天境.甘青4日游.pdf'</span>
<span class="token comment">// 返回 数组， 第一个元素是文件名，第二个元素是扩展名</span>
<span class="token keyword">function</span> <span class="token function">processFileName</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex">/\.([a-zA-Z]*)$/</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> extend <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> fileName<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    extend <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> name <span class="token operator">=</span> fileName<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> extend<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-14-代码判断ie浏览器"><a href="#_2-14-代码判断ie浏览器" aria-hidden="true" class="header-anchor">#</a> 2.14 代码判断IE浏览器</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 取得浏览器的userAgent字符串</span>
<span class="token keyword">var</span> userAgent <span class="token operator">=</span> navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">;</span>
<span class="token comment">// 判断是否IE&lt;11浏览器</span>
<span class="token keyword">var</span> isIE <span class="token operator">=</span> userAgent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;compatible&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> userAgent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;MSIE&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">// 判断是否IE的Edge浏览器</span>
<span class="token keyword">var</span> isEdge <span class="token operator">=</span> userAgent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;Edge&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isIE<span class="token punctuation">;</span>
<span class="token comment">// IE11浏览器判断， 工作中用到这个了，有效</span>
<span class="token keyword">var</span> isIE11 <span class="token operator">=</span> userAgent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'Trident'</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> userAgent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;rv:11.0&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-15-js屏蔽iframe调用"><a href="#_2-15-js屏蔽iframe调用" aria-hidden="true" class="header-anchor">#</a> 2.15 JS屏蔽iframe调用</h3> <p>通过一些方法判断是否是顶层页面URL路径和当前页面URL路径是否是一个，如果不是一个，则把顶层页面设置成当前页面打开。</p> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/top" target="_blank" rel="noopener noreferrer">Window.top<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：返回窗口层级最顶层窗口的引用。</p> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/parent" target="_blank" rel="noopener noreferrer">window.parent<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>： 返回当前窗口的直接父对象。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// self.location === window.location === location</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>top<span class="token punctuation">.</span>location <span class="token operator">!=</span> self<span class="token punctuation">.</span>location<span class="token punctuation">)</span><span class="token punctuation">{</span> 
  top<span class="token punctuation">.</span>location <span class="token operator">=</span> self<span class="token punctuation">.</span>location<span class="token punctuation">;</span> <span class="token comment">// 防止页面被框架包含 </span>
<span class="token punctuation">}</span> 
</code></pre></div><h3 id="_2-16-js关闭当前页面"><a href="#_2-16-js关闭当前页面" aria-hidden="true" class="header-anchor">#</a> 2.16 JS关闭当前页面</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ClosePage()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点击关闭网页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token comment">// 第一种</span>
  <span class="token keyword">function</span> <span class="token function">ClosePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">open</span><span class="token punctuation">(</span>location<span class="token punctuation">,</span> <span class="token string">'_self'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 第二种</span>
  <span class="token keyword">function</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;Firefox&quot;</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span> navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;Chrome&quot;</span><span class="token punctuation">)</span> <span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">&quot;about:blank&quot;</span><span class="token punctuation">;</span>
      window<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span>opener <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;_self&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      window<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 第三种：变成空白页。经过测试，手机端可以</span>
  <span class="token keyword">function</span> <span class="token function">mobileClose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&quot;about:blank&quot;</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;_self&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_2-17-js判断浏览器是pc端还是移动端"><a href="#_2-17-js判断浏览器是pc端还是移动端" aria-hidden="true" class="header-anchor">#</a> 2.17 JS判断浏览器是PC端还是移动端</h3> <p><strong>Navigator</strong> 对象包含有关浏览器的信息</p> <p><strong>userAgent</strong> 属性是一个只读的字符串，声明了<strong>浏览器用于 HTTP 请求的用户代理头的值</strong></p> <p>可以通过获取Navigator userAgent属性的属性值，再和相关的移动端类型进行匹配，来判断浏览器的类型，通过调整 match 方法的参数，也可以判断不同的浏览器类型：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 移动端浏览器的标志</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini'</span>
<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">)</span>
<span class="token comment">// 如果是移动端，则返回 true</span>
reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">)</span>

<span class="token comment">// 另外一个更全的移动端标志</span>
<span class="token keyword">const</span> str1 <span class="token operator">=</span>
<span class="token string">'Android|WebOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|phone|pad|pod|'</span> <span class="token operator">+</span>
<span class="token string">'ios|Mobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|Symbian|Windows Phone'</span>
</code></pre></div><h2 id="_3-js数字相关的"><a href="#_3-js数字相关的" aria-hidden="true" class="header-anchor">#</a> 3. JS数字相关的</h2> <h3 id="_3-1-数字千分位格式化"><a href="#_3-1-数字千分位格式化" aria-hidden="true" class="header-anchor">#</a> 3.1 数字千分位格式化</h3> <h4 id="_3-1-1-使用内置函数-tolocalestring"><a href="#_3-1-1-使用内置函数-tolocalestring" aria-hidden="true" class="header-anchor">#</a> 3.1.1 使用内置函数 toLocaleString</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">123456789012345678</span><span class="token punctuation">;</span> <span class="token comment">// num超出范围，自动变成123456789012345680</span>
num<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// '123,456,789,012,345,680'</span>

<span class="token comment">// 对于小数位数超过3个的，会自动截取到3位(四舍五入)</span>
<span class="token keyword">var</span> num1 <span class="token operator">=</span> <span class="token number">1234567894562.2256</span><span class="token punctuation">;</span>
num1<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// '1,234,567,894,562.226'</span>
<span class="token keyword">var</span> num1 <span class="token operator">=</span> <span class="token number">894562.12345678</span><span class="token punctuation">;</span>
num1<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token string">'en-US'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// '894,562.123'</span>
</code></pre></div><p>缺点：<br>
1、<code>toLocaleString('en-US')</code> 方法依赖于特定的语言环境（locale），它会根据所提供的语言环境参数对数字进行格式化。这意味着不同的语言环境会有不同的格式化结果，例如，在某些语言中，数字的分组符号不是逗号 <code>,</code> 而是其他字符，像法语中可能是空格。所以需要指定<code>'en-US'</code>。如果你需要在不同语言环境的应用程序中使用，可能需要动态切换语言环境，否则会导致显示结果不符合预期。<br>
2、此方法在数字小数位长度超过3位时，会截取保留3位小数(四舍五入)(chrome浏览器)。</p> <h4 id="_3-1-2-使用正则表达式"><a href="#_3-1-2-使用正则表达式" aria-hidden="true" class="header-anchor">#</a> 3.1.2 使用正则表达式</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 首先将数字通过 toString() 方法转换为字符串，然后使用 split('.') 将整数部分和小数部分分开</span>
<span class="token comment">// 对整数部分使用正则表达式 /\B(?=(\d{3})+(?!\d))/g 进行千分位添加操作。</span>
<span class="token comment">// 最后使用 join('.') 把整数部分和小数部分重新拼接成完整的数字字符串。</span>
<span class="token keyword">function</span> <span class="token function">formatNumberWithSplitAndJoin</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 不能转为数字的直接返回</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">Number</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> num<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> parts <span class="token operator">=</span> num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\B(?=(\d{3})+(?!\d))/g</span><span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> parts<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 示例</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">formatNumberWithSplitAndJoin</span><span class="token punctuation">(</span><span class="token number">6789123.123456789</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 6,789,123.123456789</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">formatNumberWithSplitAndJoin</span><span class="token punctuation">(</span><span class="token number">12345678901234567</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 12,345,678,901,234,568</span>
</code></pre></div><h4 id="_3-1-3-intl-numberformat-对象（es2020）"><a href="#_3-1-3-intl-numberformat-对象（es2020）" aria-hidden="true" class="header-anchor">#</a> 3.1.3 Intl.NumberFormat 对象（ES2020）</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">formatNumberWithIntl</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>NumberFormat</span><span class="token punctuation">(</span><span class="token string">'en-US'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 示例</span>
<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">123456789.123</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">formatNumberWithIntl</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><ul><li><code>Intl.NumberFormat</code> 是一个内置的对象，它可以根据不同的语言环境对数字进行格式化。</li> <li><code>new Intl.NumberFormat('en-US')</code> 创建一个使用美国语言环境的格式化对象。</li> <li><code>format(num)</code> 方法将传入的数字按照指定的语言环境进行格式化，会添加千分位分隔符。</li> <li>兼容性：主流现代浏览器（如 Chrome、Firefox、Safari、Edge 等最新版本）对 <code>Intl.NumberFormat</code> 提供了良好支持。这些浏览器能够完整实现 <code>Intl.NumberFormat</code> 的各种功能，包括不同语言环境下的数字格式化、货币格式化等。例如，在 Chrome 浏览器中，可以轻松使用以下代码实现数字的千分位格式化并按指定语言环境显示</li> <li><strong>旧版浏览器</strong>：IE 浏览器（包括 IE11 及以下版本）完全不支持 <code>Intl.NumberFormat</code>。这意味着在使用 IE 浏览器的环境中，上述代码会抛出 <code>ReferenceError</code>，提示 <code>Intl</code> 未定义。在开发需要兼容 IE 浏览器的项目时，若要实现类似功能，需使用 polyfill 来模拟 <code>Intl.NumberFormat</code> 的行为。例如，可以引入 <code>Intl.js</code> 库，它是一个 JavaScript 实现的 <code>Intl</code> API 兼容库，</li></ul> <h3 id="_3-2-数字相除结果保留4位小数"><a href="#_3-2-数字相除结果保留4位小数" aria-hidden="true" class="header-anchor">#</a> 3.2 数字相除结果保留4位小数</h3> <h4 id="_3-2-1-tofixed-4-返回字符串"><a href="#_3-2-1-tofixed-4-返回字符串" aria-hidden="true" class="header-anchor">#</a> 3.2.1 toFixed(4)(返回字符串)</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">(</span>a <span class="token operator">/</span> b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;1.6667&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// 字符串</span>
</code></pre></div><p>注意：<code>toFixed()</code> 会返回 <strong>字符串</strong>，如果需要数字，需要再转一下</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a <span class="token operator">/</span> b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1.6667（数字）</span>
</code></pre></div><h4 id="_3-2-2-math-round（返回数字）"><a href="#_3-2-2-math-round（返回数字）" aria-hidden="true" class="header-anchor">#</a> 3.2.2 Math.round（返回数字）</h4> <p><code>Math.round</code>方法用于四舍五入</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> result <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a <span class="token operator">/</span> b<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10000</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10000</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1.6667</span>
</code></pre></div><p>原理：先将小数放大 10000 倍，四舍五入后再除以 10000。</p> <h4 id="_3-2-3-number-epsilon（避免浮点误差）"><a href="#_3-2-3-number-epsilon（避免浮点误差）" aria-hidden="true" class="header-anchor">#</a> 3.2.3 Number.EPSILON（避免浮点误差）</h4> <p><code>Number.EPSILON</code> 是 ES6 新增的一个常量，表示 <strong>最小的可表示的正数与 1 之间的差值</strong>，也可以理解为 <strong>浮点数运算的最小精度误差值</strong>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">roundTo4</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>num <span class="token operator">+</span> Number<span class="token punctuation">.</span><span class="token constant">EPSILON</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10000</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10000</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">roundTo4</span><span class="token punctuation">(</span>a <span class="token operator">/</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1.6667</span>
</code></pre></div><h4 id="_3-2-4-总结"><a href="#_3-2-4-总结" aria-hidden="true" class="header-anchor">#</a> 3.2.4 总结</h4> <table><thead><tr><th>方法</th> <th>精度控制</th> <th>返回类型</th> <th>备注</th></tr></thead> <tbody><tr><td><code>toFixed(4)</code></td> <td>✅</td> <td>字符串</td> <td>常用，易读</td></tr> <tr><td><code>Math.round()</code></td> <td>✅</td> <td>数字</td> <td>推荐用于计算或逻辑处理</td></tr> <tr><td><code>+EPSILON</code></td> <td>✅✅</td> <td>数字</td> <td>更精确，适合金融/严谨场景</td></tr></tbody></table> <h2 id="其他参考资料"><a href="#其他参考资料" aria-hidden="true" class="header-anchor">#</a> 其他参考资料</h2> <ol><li><p><a href="http://www.cnblogs.com/chenyanger/p/3958656.html" target="_blank" rel="noopener noreferrer">javaScript &amp; jquery完美判断图片是否加载完毕<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://segmentfault.com/a/1190000014700549" target="_blank" rel="noopener noreferrer">分享前端开发常用代码片段<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://segmentfault.com/a/1190000013438501" target="_blank" rel="noopener noreferrer">前端简洁并实用的工具类<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ol></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/yulilong/front-end-doc/edit/master/doc/js/01-js-example/01-常用的代码片段.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">7/16/2025, 3:05:44 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/155.f7018a76.js" defer></script><script src="/assets/js/app.488c6ca2.js" defer></script>
  </body>
</html>
