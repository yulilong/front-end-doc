<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VUE3核心语法 | 前端知识</title>
    <meta name="description" content="一个总结前端知识的文档网站">
    <link rel="icon" href="/logo.png">
  <script defer="defer" src="/static/jquery.slim.min.js"></script>
  <script defer="defer" src="/static/jquery.fancybox.min.js"></script>
  <link defer="defer" rel="stylesheet" type="text/css" href="/static/jquery.fancybox.min.css">
    
    <link rel="preload" href="/assets/css/0.styles.76f153c4.css" as="style"><link rel="preload" href="/assets/js/app.488c6ca2.js" as="script"><link rel="preload" href="/assets/js/25.2e1c4694.js" as="script"><link rel="prefetch" href="/assets/js/10.fcc2aa4e.js"><link rel="prefetch" href="/assets/js/100.ac9e2cee.js"><link rel="prefetch" href="/assets/js/101.4d84add3.js"><link rel="prefetch" href="/assets/js/102.0f3836ba.js"><link rel="prefetch" href="/assets/js/103.5c1b38ae.js"><link rel="prefetch" href="/assets/js/104.d16a6024.js"><link rel="prefetch" href="/assets/js/105.c7f2dbf8.js"><link rel="prefetch" href="/assets/js/106.4c7831d8.js"><link rel="prefetch" href="/assets/js/107.9ba54cc7.js"><link rel="prefetch" href="/assets/js/108.6566aead.js"><link rel="prefetch" href="/assets/js/109.fea32e3b.js"><link rel="prefetch" href="/assets/js/11.18d3fa16.js"><link rel="prefetch" href="/assets/js/110.c347cb80.js"><link rel="prefetch" href="/assets/js/111.13bbcc83.js"><link rel="prefetch" href="/assets/js/112.e16bc7da.js"><link rel="prefetch" href="/assets/js/113.8c3ec16b.js"><link rel="prefetch" href="/assets/js/114.9d67504e.js"><link rel="prefetch" href="/assets/js/115.d9dc980e.js"><link rel="prefetch" href="/assets/js/116.cceda218.js"><link rel="prefetch" href="/assets/js/117.04c70cb1.js"><link rel="prefetch" href="/assets/js/118.21971819.js"><link rel="prefetch" href="/assets/js/119.0f3e035f.js"><link rel="prefetch" href="/assets/js/12.0313b74c.js"><link rel="prefetch" href="/assets/js/120.81681a17.js"><link rel="prefetch" href="/assets/js/121.c8a896d0.js"><link rel="prefetch" href="/assets/js/122.d653cfea.js"><link rel="prefetch" href="/assets/js/123.0a4fd0ed.js"><link rel="prefetch" href="/assets/js/124.2c706e1a.js"><link rel="prefetch" href="/assets/js/125.e3c36a6b.js"><link rel="prefetch" href="/assets/js/126.8daaa383.js"><link rel="prefetch" href="/assets/js/127.1373621a.js"><link rel="prefetch" href="/assets/js/128.0ac7f0b7.js"><link rel="prefetch" href="/assets/js/129.315e3350.js"><link rel="prefetch" href="/assets/js/13.d4c98bc3.js"><link rel="prefetch" href="/assets/js/130.ac9f1b4d.js"><link rel="prefetch" href="/assets/js/131.d57bb123.js"><link rel="prefetch" href="/assets/js/132.bad929f2.js"><link rel="prefetch" href="/assets/js/133.927b5f48.js"><link rel="prefetch" href="/assets/js/134.603065a6.js"><link rel="prefetch" href="/assets/js/135.6e072766.js"><link rel="prefetch" href="/assets/js/136.d666aab8.js"><link rel="prefetch" href="/assets/js/137.da2870ad.js"><link rel="prefetch" href="/assets/js/138.70c637b2.js"><link rel="prefetch" href="/assets/js/139.3c06b77e.js"><link rel="prefetch" href="/assets/js/14.d2661fef.js"><link rel="prefetch" href="/assets/js/140.09addeac.js"><link rel="prefetch" href="/assets/js/141.3401888e.js"><link rel="prefetch" href="/assets/js/142.d4be7d06.js"><link rel="prefetch" href="/assets/js/143.6ede3cbe.js"><link rel="prefetch" href="/assets/js/144.65c0a1c0.js"><link rel="prefetch" href="/assets/js/145.2b9b7af2.js"><link rel="prefetch" href="/assets/js/146.d84d1354.js"><link rel="prefetch" href="/assets/js/147.5c31ced0.js"><link rel="prefetch" href="/assets/js/148.9929b86f.js"><link rel="prefetch" href="/assets/js/149.b1acb31c.js"><link rel="prefetch" href="/assets/js/15.73ad3ea7.js"><link rel="prefetch" href="/assets/js/150.8246e3f7.js"><link rel="prefetch" href="/assets/js/151.de2ec522.js"><link rel="prefetch" href="/assets/js/152.0b2c8d25.js"><link rel="prefetch" href="/assets/js/153.402a6101.js"><link rel="prefetch" href="/assets/js/154.bf5b21e2.js"><link rel="prefetch" href="/assets/js/155.f7018a76.js"><link rel="prefetch" href="/assets/js/156.52bc474f.js"><link rel="prefetch" href="/assets/js/157.09a8d951.js"><link rel="prefetch" href="/assets/js/158.a6bda80b.js"><link rel="prefetch" href="/assets/js/159.3aa05399.js"><link rel="prefetch" href="/assets/js/16.c277f496.js"><link rel="prefetch" href="/assets/js/160.09d218f3.js"><link rel="prefetch" href="/assets/js/161.fa98f9b8.js"><link rel="prefetch" href="/assets/js/162.5b32cc43.js"><link rel="prefetch" href="/assets/js/163.dfcc275d.js"><link rel="prefetch" href="/assets/js/164.981b75ed.js"><link rel="prefetch" href="/assets/js/165.a467b631.js"><link rel="prefetch" href="/assets/js/166.789991be.js"><link rel="prefetch" href="/assets/js/167.d69d48e1.js"><link rel="prefetch" href="/assets/js/168.2d3ec034.js"><link rel="prefetch" href="/assets/js/169.cefabf7d.js"><link rel="prefetch" href="/assets/js/17.38459ec9.js"><link rel="prefetch" href="/assets/js/170.e6b98c5d.js"><link rel="prefetch" href="/assets/js/171.43fcc790.js"><link rel="prefetch" href="/assets/js/172.e5fc9e58.js"><link rel="prefetch" href="/assets/js/173.a97ef26e.js"><link rel="prefetch" href="/assets/js/174.ee11026f.js"><link rel="prefetch" href="/assets/js/175.c3a5db14.js"><link rel="prefetch" href="/assets/js/176.4bbb5d9f.js"><link rel="prefetch" href="/assets/js/177.14851192.js"><link rel="prefetch" href="/assets/js/178.07ebf7d5.js"><link rel="prefetch" href="/assets/js/179.938ee81b.js"><link rel="prefetch" href="/assets/js/18.94d695a0.js"><link rel="prefetch" href="/assets/js/180.5b1c3f76.js"><link rel="prefetch" href="/assets/js/181.e0f3927c.js"><link rel="prefetch" href="/assets/js/182.e07fc186.js"><link rel="prefetch" href="/assets/js/183.f6ab4a94.js"><link rel="prefetch" href="/assets/js/184.b09ee1f6.js"><link rel="prefetch" href="/assets/js/185.2e636e79.js"><link rel="prefetch" href="/assets/js/186.3408c000.js"><link rel="prefetch" href="/assets/js/187.ab04b465.js"><link rel="prefetch" href="/assets/js/188.89ba47a3.js"><link rel="prefetch" href="/assets/js/189.d9ace9b8.js"><link rel="prefetch" href="/assets/js/19.ff281af4.js"><link rel="prefetch" href="/assets/js/190.cd51e1ae.js"><link rel="prefetch" href="/assets/js/191.1a195d93.js"><link rel="prefetch" href="/assets/js/192.c9b554db.js"><link rel="prefetch" href="/assets/js/193.9ae5e7f8.js"><link rel="prefetch" href="/assets/js/194.4b0ff7fc.js"><link rel="prefetch" href="/assets/js/195.0490fc4c.js"><link rel="prefetch" href="/assets/js/196.765f834b.js"><link rel="prefetch" href="/assets/js/197.54409b93.js"><link rel="prefetch" href="/assets/js/198.80d2610b.js"><link rel="prefetch" href="/assets/js/199.cccc9f86.js"><link rel="prefetch" href="/assets/js/20.89a504a6.js"><link rel="prefetch" href="/assets/js/200.5ab3eca6.js"><link rel="prefetch" href="/assets/js/201.ebf404c2.js"><link rel="prefetch" href="/assets/js/202.35cb40fc.js"><link rel="prefetch" href="/assets/js/203.8656bd46.js"><link rel="prefetch" href="/assets/js/204.b7f53355.js"><link rel="prefetch" href="/assets/js/205.ed04d8bc.js"><link rel="prefetch" href="/assets/js/206.6217e67e.js"><link rel="prefetch" href="/assets/js/207.60117759.js"><link rel="prefetch" href="/assets/js/208.3f7cfaae.js"><link rel="prefetch" href="/assets/js/209.9fc2f379.js"><link rel="prefetch" href="/assets/js/21.149e4329.js"><link rel="prefetch" href="/assets/js/210.e0db30b2.js"><link rel="prefetch" href="/assets/js/211.786a55db.js"><link rel="prefetch" href="/assets/js/212.e47d35d1.js"><link rel="prefetch" href="/assets/js/213.bc93c223.js"><link rel="prefetch" href="/assets/js/214.ab8ecb5b.js"><link rel="prefetch" href="/assets/js/215.8cf4c215.js"><link rel="prefetch" href="/assets/js/216.30f241da.js"><link rel="prefetch" href="/assets/js/217.0024d9ce.js"><link rel="prefetch" href="/assets/js/218.6ce2301c.js"><link rel="prefetch" href="/assets/js/219.438fb915.js"><link rel="prefetch" href="/assets/js/22.c37cc9fa.js"><link rel="prefetch" href="/assets/js/220.0886089d.js"><link rel="prefetch" href="/assets/js/221.57c60d24.js"><link rel="prefetch" href="/assets/js/222.be4e9028.js"><link rel="prefetch" href="/assets/js/223.98c5dcef.js"><link rel="prefetch" href="/assets/js/224.9c5935e1.js"><link rel="prefetch" href="/assets/js/225.4eda7826.js"><link rel="prefetch" href="/assets/js/226.b93cb259.js"><link rel="prefetch" href="/assets/js/227.29050d75.js"><link rel="prefetch" href="/assets/js/228.1e25561d.js"><link rel="prefetch" href="/assets/js/229.7ca5e0ab.js"><link rel="prefetch" href="/assets/js/23.526b5924.js"><link rel="prefetch" href="/assets/js/230.02332374.js"><link rel="prefetch" href="/assets/js/231.1552d244.js"><link rel="prefetch" href="/assets/js/232.cda13b24.js"><link rel="prefetch" href="/assets/js/233.297c5d8f.js"><link rel="prefetch" href="/assets/js/234.49da1229.js"><link rel="prefetch" href="/assets/js/235.0e92aad6.js"><link rel="prefetch" href="/assets/js/236.a7733e12.js"><link rel="prefetch" href="/assets/js/237.31fac7f1.js"><link rel="prefetch" href="/assets/js/238.6d2d80d6.js"><link rel="prefetch" href="/assets/js/239.d668b21d.js"><link rel="prefetch" href="/assets/js/24.4f58e38d.js"><link rel="prefetch" href="/assets/js/240.9e4fb5f8.js"><link rel="prefetch" href="/assets/js/26.9dd20d3a.js"><link rel="prefetch" href="/assets/js/27.635bd2a5.js"><link rel="prefetch" href="/assets/js/28.0e543018.js"><link rel="prefetch" href="/assets/js/29.ae9ddba5.js"><link rel="prefetch" href="/assets/js/3.86caf6b0.js"><link rel="prefetch" href="/assets/js/30.a9cd6ec3.js"><link rel="prefetch" href="/assets/js/31.f1c832ac.js"><link rel="prefetch" href="/assets/js/32.824382ae.js"><link rel="prefetch" href="/assets/js/33.f8aa450d.js"><link rel="prefetch" href="/assets/js/34.40eb032e.js"><link rel="prefetch" href="/assets/js/35.068ab380.js"><link rel="prefetch" href="/assets/js/36.1a2181dd.js"><link rel="prefetch" href="/assets/js/37.5a8e1320.js"><link rel="prefetch" href="/assets/js/38.eb7e9faa.js"><link rel="prefetch" href="/assets/js/39.3ef8e6e4.js"><link rel="prefetch" href="/assets/js/4.2601b2b8.js"><link rel="prefetch" href="/assets/js/40.a04162a3.js"><link rel="prefetch" href="/assets/js/41.2b363e5f.js"><link rel="prefetch" href="/assets/js/42.d3ada882.js"><link rel="prefetch" href="/assets/js/43.2c59e3d5.js"><link rel="prefetch" href="/assets/js/44.2dccdc1c.js"><link rel="prefetch" href="/assets/js/45.21384323.js"><link rel="prefetch" href="/assets/js/46.f8cfeddb.js"><link rel="prefetch" href="/assets/js/47.1931eb78.js"><link rel="prefetch" href="/assets/js/48.af372779.js"><link rel="prefetch" href="/assets/js/49.ff2e443c.js"><link rel="prefetch" href="/assets/js/5.db71aeed.js"><link rel="prefetch" href="/assets/js/50.1d0073cb.js"><link rel="prefetch" href="/assets/js/51.2947e174.js"><link rel="prefetch" href="/assets/js/52.aae698b5.js"><link rel="prefetch" href="/assets/js/53.961c4157.js"><link rel="prefetch" href="/assets/js/54.c5979d45.js"><link rel="prefetch" href="/assets/js/55.3c1fbcca.js"><link rel="prefetch" href="/assets/js/56.498de876.js"><link rel="prefetch" href="/assets/js/57.8c1c1a48.js"><link rel="prefetch" href="/assets/js/58.39c23a96.js"><link rel="prefetch" href="/assets/js/59.93c11385.js"><link rel="prefetch" href="/assets/js/6.9dafb709.js"><link rel="prefetch" href="/assets/js/60.3ecdf03a.js"><link rel="prefetch" href="/assets/js/61.e7cd083d.js"><link rel="prefetch" href="/assets/js/62.abce1f90.js"><link rel="prefetch" href="/assets/js/63.4e194800.js"><link rel="prefetch" href="/assets/js/64.f166db1a.js"><link rel="prefetch" href="/assets/js/65.982109c1.js"><link rel="prefetch" href="/assets/js/66.ac2f358b.js"><link rel="prefetch" href="/assets/js/67.b67d6b07.js"><link rel="prefetch" href="/assets/js/68.d829d2b0.js"><link rel="prefetch" href="/assets/js/69.45b49843.js"><link rel="prefetch" href="/assets/js/7.a0276b27.js"><link rel="prefetch" href="/assets/js/70.bd774ae6.js"><link rel="prefetch" href="/assets/js/71.3cde9828.js"><link rel="prefetch" href="/assets/js/72.107bf470.js"><link rel="prefetch" href="/assets/js/73.7007a5ce.js"><link rel="prefetch" href="/assets/js/74.6e08bbcf.js"><link rel="prefetch" href="/assets/js/75.85f8da42.js"><link rel="prefetch" href="/assets/js/76.dfc3e8df.js"><link rel="prefetch" href="/assets/js/77.dfc7b715.js"><link rel="prefetch" href="/assets/js/78.c3949c54.js"><link rel="prefetch" href="/assets/js/79.005ff1d3.js"><link rel="prefetch" href="/assets/js/8.26d59edf.js"><link rel="prefetch" href="/assets/js/80.ec5caca7.js"><link rel="prefetch" href="/assets/js/81.ead29b4b.js"><link rel="prefetch" href="/assets/js/82.5b38b340.js"><link rel="prefetch" href="/assets/js/83.82d06e5e.js"><link rel="prefetch" href="/assets/js/84.e1fb9c56.js"><link rel="prefetch" href="/assets/js/85.5a0444f5.js"><link rel="prefetch" href="/assets/js/86.edb78780.js"><link rel="prefetch" href="/assets/js/87.3e1eb65b.js"><link rel="prefetch" href="/assets/js/88.d1bbb465.js"><link rel="prefetch" href="/assets/js/89.dec7a427.js"><link rel="prefetch" href="/assets/js/9.404400bd.js"><link rel="prefetch" href="/assets/js/90.0cebc9de.js"><link rel="prefetch" href="/assets/js/91.50d7a5f4.js"><link rel="prefetch" href="/assets/js/92.7b58335d.js"><link rel="prefetch" href="/assets/js/93.e3c416f6.js"><link rel="prefetch" href="/assets/js/94.1bb74f5e.js"><link rel="prefetch" href="/assets/js/95.34cb0a21.js"><link rel="prefetch" href="/assets/js/96.2e54bee1.js"><link rel="prefetch" href="/assets/js/97.4b5fab2d.js"><link rel="prefetch" href="/assets/js/98.a83c1edb.js"><link rel="prefetch" href="/assets/js/99.8a2757cd.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.c4426655.js">
    <link rel="stylesheet" href="/assets/css/0.styles.76f153c4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="前端知识" class="logo"> <span class="site-name can-hide">前端知识</span></a> <div class="links" style="max-width:nullpx;"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/catalog.html" class="nav-link">目录</a></div><div class="nav-item"><a href="/doc/es6/" class="nav-link">ES6</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">javascript</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc/js/" class="nav-link">js</a></li><li class="dropdown-item"><!----> <a href="/doc/js/standardLibrary/" class="nav-link">js标准库</a></li><li class="dropdown-item"><!----> <a href="/doc/dom/" class="nav-link">dom操作文档</a></li><li class="dropdown-item"><!----> <a href="/doc/designPattern/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><a href="/doc/browserNetwork/" class="nav-link">浏览器</a></div><div class="nav-item"><a href="/doc/css/" class="nav-link">CSS</a></div><div class="nav-item"><a href="/doc/react/" class="nav-link">react</a></div><div class="nav-item"><a href="/doc/vue/" class="nav-link router-link-active">vue</a></div><div class="nav-item"><a href="/doc/typeScript/" class="nav-link">TypeScript</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/doc/node/" class="nav-link">node</a></li><li class="dropdown-item"><!----> <a href="/doc/tool/" class="nav-link">工具</a></li><li class="dropdown-item"><!----> <a href="/doc/tool/echarts/" class="nav-link">echarts</a></li><li class="dropdown-item"><!----> <a href="/doc/problem/" class="nav-link">常见问题</a></li></ul></div></div> <a href="https://github.com/yulilong/front-end-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/catalog.html" class="nav-link">目录</a></div><div class="nav-item"><a href="/doc/es6/" class="nav-link">ES6</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">javascript</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc/js/" class="nav-link">js</a></li><li class="dropdown-item"><!----> <a href="/doc/js/standardLibrary/" class="nav-link">js标准库</a></li><li class="dropdown-item"><!----> <a href="/doc/dom/" class="nav-link">dom操作文档</a></li><li class="dropdown-item"><!----> <a href="/doc/designPattern/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><a href="/doc/browserNetwork/" class="nav-link">浏览器</a></div><div class="nav-item"><a href="/doc/css/" class="nav-link">CSS</a></div><div class="nav-item"><a href="/doc/react/" class="nav-link">react</a></div><div class="nav-item"><a href="/doc/vue/" class="nav-link router-link-active">vue</a></div><div class="nav-item"><a href="/doc/typeScript/" class="nav-link">TypeScript</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/doc/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/doc/node/" class="nav-link">node</a></li><li class="dropdown-item"><!----> <a href="/doc/tool/" class="nav-link">工具</a></li><li class="dropdown-item"><!----> <a href="/doc/tool/echarts/" class="nav-link">echarts</a></li><li class="dropdown-item"><!----> <a href="/doc/problem/" class="nav-link">常见问题</a></li></ul></div></div> <a href="https://github.com/yulilong/front-end-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/doc/vue/001-vue遇到的问题.html" class="sidebar-link">VUE遇到的问题</a></li><li><a href="/doc/vue/002-vue常用语法.html" class="sidebar-link">VUE常用语法</a></li><li><a href="/doc/vue/003-vue教程.html" class="sidebar-link">vue教程</a></li><li><a href="/doc/vue/004-vue生命周期.html" class="sidebar-link">vue 生命周期</a></li><li><a href="/doc/vue/005-vue指令.html" class="sidebar-link">vue指令</a></li><li><a href="/doc/vue/006-vue-scoped-css.html" class="sidebar-link">vue Scoped CSS</a></li><li><a href="/doc/vue/007-vue访问根父子组件-依赖注入.html" class="sidebar-link">vue访问根组件、父组件、子组件、依赖注入</a></li><li><a href="/doc/vue/008-vue知识点思维导图.html" class="sidebar-link">vue知识点思维导图</a></li><li><a href="/doc/vue/009-vuex使用文档.html" class="sidebar-link">Vuex 使用说明</a></li><li><a href="/doc/vue/010-vue-cli使用文档.html" class="sidebar-link">Vue CLI使用文档</a></li><li><a href="/doc/vue/011-router使用相关.html" class="sidebar-link">router使用相关</a></li><li><a href="/doc/vue/012-一个vue组件代码写法.html" class="sidebar-link">一个vue组件代码写法</a></li><li><a href="/doc/vue/013-vue的diff算法详解.html" class="sidebar-link">Vue diff算法详解</a></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>VUE3</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/doc/vue/vue3/" class="sidebar-link">简介</a></li><li><a href="/doc/vue/vue3/001-vue3开发遇到的问题.html" class="sidebar-link">VUE3 开发遇到的问题</a></li><li><a href="/doc/vue/vue3/002-vue3核心语法.html" class="one-level one-level-active active sidebar-link">VUE3核心语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/vue/vue3/002-vue3核心语法.html#_1-optionsapi-与-compositionapi-区别" class="sidebar-link">1. OptionsAPI 与 CompositionAPI 区别</a></li><li class="sidebar-sub-header"><a href="/doc/vue/vue3/002-vue3核心语法.html#_2-核心-setup" class="sidebar-link">2. 核心 setup</a></li><li class="sidebar-sub-header"><a href="/doc/vue/vue3/002-vue3核心语法.html#_3-ref：创建基本类型的响应式数据" class="sidebar-link">3. ref：创建基本类型的响应式数据</a></li><li class="sidebar-sub-header"><a href="/doc/vue/vue3/002-vue3核心语法.html#_4-reactive：创建对象类型的响应式数据" class="sidebar-link">4. reactive：创建对象类型的响应式数据</a></li><li class="sidebar-sub-header"><a href="/doc/vue/vue3/002-vue3核心语法.html#_5-ref：创建对象类型的响应式数据" class="sidebar-link">5. ref：创建对象类型的响应式数据</a></li><li class="sidebar-sub-header"><a href="/doc/vue/vue3/002-vue3核心语法.html#_6-ref-对比-reactive" class="sidebar-link">6. ref 对比 reactive</a></li><li class="sidebar-sub-header"><a href="/doc/vue/vue3/002-vue3核心语法.html#_7-torefs-与-toref" class="sidebar-link">7. toRefs 与 toRef</a></li><li class="sidebar-sub-header"><a href="/doc/vue/vue3/002-vue3核心语法.html#_8-computed" class="sidebar-link">8. computed</a></li><li class="sidebar-sub-header"><a href="/doc/vue/vue3/002-vue3核心语法.html#_9-watch" class="sidebar-link">9.watch</a></li><li class="sidebar-sub-header"><a href="/doc/vue/vue3/002-vue3核心语法.html#_10-watcheffect" class="sidebar-link">10. watchEffect</a></li><li class="sidebar-sub-header"><a href="/doc/vue/vue3/002-vue3核心语法.html#_11-标签的-ref-属性" class="sidebar-link">11. 标签的 ref 属性</a></li><li class="sidebar-sub-header"><a href="/doc/vue/vue3/002-vue3核心语法.html#_12-props" class="sidebar-link">12 props</a></li><li class="sidebar-sub-header"><a href="/doc/vue/vue3/002-vue3核心语法.html#_13-defineexpose：暴露属性和方法" class="sidebar-link">13. defineExpose：暴露属性和方法</a></li><li class="sidebar-sub-header"><a href="/doc/vue/vue3/002-vue3核心语法.html#_14-生命周期" class="sidebar-link">14. 生命周期</a></li><li class="sidebar-sub-header"><a href="/doc/vue/vue3/002-vue3核心语法.html#_15-自定义hook" class="sidebar-link">15. 自定义hook</a></li><li class="sidebar-sub-header"><a href="/doc/vue/vue3/002-vue3核心语法.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/doc/vue/vue3/003-vue3其他API和新组件.html" class="sidebar-link">Vue 3 其他API和新组件</a></li><li><a href="/doc/vue/vue3/004-vue3生命周期.html" class="sidebar-link">Vue 3 的生命周期</a></li><li><a href="/doc/vue/vue3/005-vue3组件通信.html" class="sidebar-link">组件通信</a></li><li><a href="/doc/vue/vue3/006-vue3事件.html" class="sidebar-link">事件</a></li><li><a href="/doc/vue/vue3/007-vue3常用语法.html" class="sidebar-link">vue3中常用语法</a></li><li><a href="/doc/vue/vue3/009-vue3单文件CSS.html" class="sidebar-link">Vue3 单文件组件 CSS 功能</a></li><li><a href="/doc/vue/vue3/019-vue-router4.x.html" class="sidebar-link">vue3的路由vue-router4.x.x</a></li><li><a href="/doc/vue/vue3/020-pinia状态管理.html" class="sidebar-link">Pinia - 状态管理</a></li><li><a href="/doc/vue/vue3/099-vite.html" class="sidebar-link">vite 超快的前端构建工具</a></li><li><a href="/doc/vue/vue3/100-新建vue3项目及相关问题.html" class="sidebar-link">新建vue3项目及相关问题</a></li><li><a href="/doc/vue/vue3/101-vite关于低版本浏览器的支持.html" class="sidebar-link">vite对于低版本的浏览器支持处理</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>vue3代码示例</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/doc/vue/vue3/code-demo/" class="sidebar-link">简介</a></li><li><a href="/doc/vue/vue3/code-demo/01-element-plus组件代码示例1.html" class="sidebar-link">element-plus 代码示例</a></li><li><a href="/doc/vue/vue3/code-demo/20-代码示例1.html" class="sidebar-link">代码示例1</a></li><li><a href="/doc/vue/vue3/code-demo/30-富文本编辑器的使用.html" class="sidebar-link">富文本编辑器使用</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><p></p><div class="table-of-contents"><ul><li><a href="#_1-optionsapi-与-compositionapi-区别">1. OptionsAPI 与 CompositionAPI 区别</a><ul><li><a href="#_1-1-options-api-的弊端">1.1 Options API 的弊端</a></li><li><a href="#_1-2-composition-api-的优势">1.2 Composition API 的优势</a></li></ul></li><li><a href="#_2-核心-setup">2. 核心 setup</a><ul><li><a href="#_2-1-setup-概述">2.1 setup 概述</a></li><li><a href="#_2-2-setup-的返回值">2.2 setup 的返回值</a></li><li><a href="#_2-3-setup-与-options-api-的关系">2.3 setup 与 Options API 的关系</a></li><li><a href="#_2-4-setup-语法糖">2.4 setup 语法糖</a></li></ul></li><li><a href="#_3-ref：创建基本类型的响应式数据">3. ref：创建基本类型的响应式数据</a></li><li><a href="#_4-reactive：创建对象类型的响应式数据">4. reactive：创建对象类型的响应式数据</a></li><li><a href="#_5-ref：创建对象类型的响应式数据">5. ref：创建对象类型的响应式数据</a></li><li><a href="#_6-ref-对比-reactive">6. ref 对比 reactive</a></li><li><a href="#_7-torefs-与-toref">7. toRefs 与 toRef</a></li><li><a href="#_8-computed">8. computed</a></li><li><a href="#_9-watch">9.watch</a><ul><li><a href="#_9-1-情况一：ref基本类型，写数据名">9.1 情况一：ref基本类型，写数据名</a></li><li><a href="#_9-2-情况二：ref对象类型，写数据名并开启深度监视">9.2 情况二：ref对象类型，写数据名并开启深度监视</a></li><li><a href="#_9-3-情况三：reactive对象，写数据名默认已经开启深度监视">9.3 情况三：reactive对象，写数据名默认已经开启深度监视</a></li><li><a href="#_9-4-情况四：对象的某个属性，使用函数形式">9.4 情况四：对象的某个属性，使用函数形式</a></li><li><a href="#_9-5-情况五：监视上述的多个数据">9.5 情况五：监视上述的多个数据</a></li><li><a href="#_9-6-watch第一个参数是值或函数的区别">9.6 watch第一个参数是值或函数的区别</a></li></ul></li><li><a href="#_10-watcheffect">10. watchEffect</a></li><li><a href="#_11-标签的-ref-属性">11. 标签的 ref 属性</a></li><li><a href="#_12-props">12 props</a><ul><li><a href="#_12-1-对象形式定义props（推荐）">12.1 对象形式定义props（推荐）</a></li><li><a href="#_12-2-数组形式定义（简单声明）">12.2 数组形式定义（简单声明）</a></li><li><a href="#_12-3-typescript-接口形式">12.3 TypeScript 接口形式</a></li><li><a href="#_12-4-typescript-接口-默认值">12.4 TypeScript 接口 + 默认值</a></li><li><a href="#_12-5-响应式-props-解构问题解决">12.5 响应式 Props 解构问题解决</a></li></ul></li><li><a href="#_13-defineexpose：暴露属性和方法">13. defineExpose：暴露属性和方法</a><ul><li><a href="#_13-1-子组件暴露方法-属性">13.1 子组件暴露方法/属性</a></li><li><a href="#_13-2-父-子组件调用组件实例方法">13.2 父/子组件调用组件实例方法</a></li><li><a href="#_13-3-typescript-类型支持（可选）">13.3 TypeScript 类型支持（可选）</a></li><li><a href="#_13-4-注意事项">13.4 注意事项</a></li></ul></li><li><a href="#_14-生命周期">14. 生命周期</a></li><li><a href="#_15-自定义hook">15. 自定义hook</a></li><li><a href="#参考资料">参考资料</a></li></ul></div><p></p> <p>[TOC]</p> <h1 id="vue3核心语法"><a href="#vue3核心语法" aria-hidden="true" class="header-anchor">#</a> VUE3核心语法</h1> <h2 id="_1-optionsapi-与-compositionapi-区别"><a href="#_1-optionsapi-与-compositionapi-区别" aria-hidden="true" class="header-anchor">#</a> 1. OptionsAPI 与 CompositionAPI 区别</h2> <ul><li><code>Vue2</code>的<code>API</code>设计是<code>Options</code>（配置、选项）风格的。</li> <li><code>Vue3</code>的<code>API</code>设计是<code>Composition</code>（组合）风格的。</li></ul> <h3 id="_1-1-options-api-的弊端"><a href="#_1-1-options-api-的弊端" aria-hidden="true" class="header-anchor">#</a> 1.1 Options API 的弊端</h3> <p><code>Options</code>类型的 <code>API</code>，数据、方法、计算属性等，是分散在：<code>data</code>、<code>methods</code>、<code>computed</code>中的，若想新增或者修改一个需求，就需要分别修改：<code>data</code>、<code>methods</code>、<code>computed</code>，不便于维护和复用。</p> <p><img src="/assets/img/002-option-api.8a8df937.gif" alt></p> <h3 id="_1-2-composition-api-的优势"><a href="#_1-2-composition-api-的优势" aria-hidden="true" class="header-anchor">#</a> 1.2 Composition API 的优势</h3> <p>可以用函数的方式，更加优雅的组织代码，让相关功能的代码更加有序的组织在一起。</p> <p><img src="/assets/img/003-composition-api.0be73d36.gif" alt></p> <p><img src="/assets/img/004-composition-api.808964c6.gif" alt></p> <p>说明：以上四张动图原创作者：大帅老猿</p> <h2 id="_2-核心-setup"><a href="#_2-核心-setup" aria-hidden="true" class="header-anchor">#</a> 2. 核心 setup</h2> <h3 id="_2-1-setup-概述"><a href="#_2-1-setup-概述" aria-hidden="true" class="header-anchor">#</a> 2.1 setup 概述</h3> <p><code>setup</code>是<code>Vue3</code>中一个新的配置项，值是一个函数，它是 <code>Composition API</code> <strong>“表演的舞台”</strong>，组件中所用到的：数据、方法、计算属性、监视......等等，均配置在<code>setup</code>中。</p> <p>特点如下：</p> <ul><li><code>setup</code>函数返回的对象中的内容，可直接在模板中使用。</li> <li><code>setup</code>中访问<code>this</code>是<code>undefined</code>。</li> <li><code>setup</code>函数会在<code>beforeCreate</code>之前调用，它是“领先”所有钩子执行的。</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>姓名：{{name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>年龄：{{age}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改名字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeAge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>年龄+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>showTel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点我查看联系方式<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span><span class="token string">'Person'</span><span class="token punctuation">,</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// 数据，原来写在data中（注意：此时的name、age、tel数据都不是响应式数据）</span>
      <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'张三'</span>
      <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">18</span>
      <span class="token keyword">let</span> tel <span class="token operator">=</span> <span class="token string">'13888888888'</span>

      <span class="token comment">// 方法，原来写在methods中</span>
      <span class="token keyword">function</span> <span class="token function">changeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        name <span class="token operator">=</span> <span class="token string">'zhang-san'</span> <span class="token comment">//注意：此时这么修改name页面是不变化的</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">function</span> <span class="token function">changeAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        age <span class="token operator">+=</span> <span class="token number">1</span> <span class="token comment">//注意：此时这么修改age页面是不变化的</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">function</span> <span class="token function">showTel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span>tel<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 返回一个对象，对象中的内容，模板中可以直接使用</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>tel<span class="token punctuation">,</span>changeName<span class="token punctuation">,</span>changeAge<span class="token punctuation">,</span>showTel<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_2-2-setup-的返回值"><a href="#_2-2-setup-的返回值" aria-hidden="true" class="header-anchor">#</a> 2.2 setup 的返回值</h3> <ul><li>若返回一个<strong>对象</strong>：则对象中的：属性、方法等，在模板中均可以直接使用**（重点关注）**。</li> <li>若返回一个<strong>函数</strong>：则可以自定义渲染内容(template中内容无效了)，代码如下：</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token string">'你好啊！'</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-3-setup-与-options-api-的关系"><a href="#_2-3-setup-与-options-api-的关系" aria-hidden="true" class="header-anchor">#</a> 2.3 setup 与 Options API 的关系</h3> <ul><li><code>Vue2</code> 的配置（<code>data</code>、<code>methos</code>......）中<strong>可以访问到</strong> <code>setup</code>中的属性、方法。</li> <li>但在<code>setup</code>中<strong>不能访问到</strong><code>Vue2</code>的配置（<code>data</code>、<code>methos</code>......）。</li> <li>如果与<code>Vue2</code>冲突，则<code>setup</code>优先。</li></ul> <h3 id="_2-4-setup-语法糖"><a href="#_2-4-setup-语法糖" aria-hidden="true" class="header-anchor">#</a> 2.4 setup 语法糖</h3> <p><code>setup</code>函数有一个语法糖，这个语法糖，可以让我们把<code>setup</code>独立出去，代码如下：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>姓名：{{name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>年龄：{{age}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改名字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changAge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>年龄+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>showTel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点我查看联系方式<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span><span class="token string">'Person'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 下面的写法是setup语法糖 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">//undefined</span>
  
  <span class="token comment">// 数据（注意：此时的name、age、tel都不是响应式数据）</span>
  <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'张三'</span>
  <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">18</span>
  <span class="token keyword">let</span> tel <span class="token operator">=</span> <span class="token string">'13888888888'</span>

  <span class="token comment">// 方法</span>
  <span class="token keyword">function</span> <span class="token function">changName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token string">'李四'</span><span class="token comment">//注意：此时这么修改name页面是不变化的</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">changAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span>
    age <span class="token operator">+=</span> <span class="token number">1</span> <span class="token comment">//注意：此时这么修改age页面是不变化的</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">showTel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>tel<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>扩展：上述代码，还需要编写一个不写<code>setup</code>的<code>script</code>标签，去指定组件名字，比较麻烦，我们可以借助<code>vite</code>中的插件简化</p> <ol><li>第一步：<code>npm i vite-plugin-vue-setup-extend -D</code></li> <li>第二步：<code>vite.config.ts</code></li></ol> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">import</span> VueSetupExtend <span class="token keyword">from</span> <span class="token string">'vite-plugin-vue-setup-extend'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token function">VueSetupExtend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ol start="3"><li>第三步：<code>&lt;script setup lang=&quot;ts&quot; name=&quot;Person&quot;&gt;</code></li></ol> <h2 id="_3-ref：创建基本类型的响应式数据"><a href="#_3-ref：创建基本类型的响应式数据" aria-hidden="true" class="header-anchor">#</a> 3. ref：创建基本类型的响应式数据</h2> <ul><li><strong>作用</strong>：定义响应式变量。</li> <li><strong>语法：</strong><code>let xxx = ref(初始值)</code>。</li> <li><strong>返回值</strong>：一个<code>RefImpl</code>的实例对象，简称<code>ref对象</code>或<code>ref</code>，<code>ref</code>对象的<code>value</code><strong>属性是响应式的</strong>。</li> <li><strong>注意点：</strong> <ul><li><code>JS</code>中操作数据需要：<code>xxx.value</code>，但模板中不需要<code>.value</code>，直接使用即可。</li> <li>对于<code>let name = ref('张三')</code>来说，<code>name</code>不是响应式的，<code>name.value</code>是响应式的。</li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>姓名：{{name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>年龄：{{age}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改名字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeAge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>年龄+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>showTel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点我查看联系方式<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
  <span class="token comment">// name和age是一个RefImpl的实例对象，简称ref对象，它们的value属性是响应式的。</span>
  <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>
  <span class="token comment">// tel就是一个普通的字符串，不是响应式的</span>
  <span class="token keyword">let</span> tel <span class="token operator">=</span> <span class="token string">'13888888888'</span>

  <span class="token keyword">function</span> <span class="token function">changeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// JS中操作ref对象时候需要.value</span>
    name<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'李四'</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span>value<span class="token punctuation">)</span>

    <span class="token comment">// 注意：name不是响应式的，name.value是响应式的，所以如下代码并不会引起页面的更新。</span>
    <span class="token comment">// name = ref('zhang-san')</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">changeAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// JS中操作ref对象时候需要.value</span>
    age<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">1</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">showTel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>tel<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_4-reactive：创建对象类型的响应式数据"><a href="#_4-reactive：创建对象类型的响应式数据" aria-hidden="true" class="header-anchor">#</a> 4. reactive：创建对象类型的响应式数据</h2> <ul><li><strong>作用：<strong>定义一个</strong>响应式对象</strong>（基本类型不要用它，要用<code>ref</code>，否则报错）</li> <li><strong>语法：</strong><code>let 响应式对象= reactive(源对象)</code>。</li> <li><strong>返回值</strong>：一个<code>Proxy</code>的实例对象，简称：响应式对象。</li> <li><strong>注意点</strong>：
<ul><li><code>reactive</code>定义的响应式数据是“深层次”的。</li> <li><code>reactive</code>重新分配一个新对象，会<strong>失去</strong>响应式（可以使用<code>Object.assign</code>去整体替换）。</li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>汽车信息：一台{{ car.brand }}汽车，价值{{ car.price }}万<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>游戏列表：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>g in games<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>g.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ g.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>测试：{{obj.a.b.c.d}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeCarPrice<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改汽车价格<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeFirstGame<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改第一游戏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>测试<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token comment">// 数据</span>
<span class="token keyword">let</span> car <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> brand<span class="token punctuation">:</span> <span class="token string">'奔驰'</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> games <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">'ahsgdyfa01'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'英雄联盟'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">'ahsgdyfa02'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'王者荣耀'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">'ahsgdyfa03'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'原神'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  a<span class="token punctuation">:</span><span class="token punctuation">{</span> b<span class="token punctuation">:</span><span class="token punctuation">{</span> c<span class="token punctuation">:</span><span class="token punctuation">{</span> d<span class="token punctuation">:</span><span class="token number">666</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">changeCarPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  car<span class="token punctuation">.</span>price <span class="token operator">+=</span> <span class="token number">10</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">changeFirstGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  games<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'流星蝴蝶剑'</span>
  <span class="token comment">// games需要赋值新对象，会失去响应式，需要使用Object.assign赋值，不能赋值新对象</span>
  <span class="token comment">// Object.assign(games, [{ id: 'ahsgdyfa04', name: 'CF' }])</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  obj<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b<span class="token punctuation">.</span>c<span class="token punctuation">.</span>d <span class="token operator">=</span> <span class="token number">999</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_5-ref：创建对象类型的响应式数据"><a href="#_5-ref：创建对象类型的响应式数据" aria-hidden="true" class="header-anchor">#</a> 5. ref：创建对象类型的响应式数据</h2> <ul><li>其实<code>ref</code>接收的数据可以是：<strong>基本类型</strong>、<strong>对象类型</strong>。</li> <li>若<code>ref</code>接收的是对象类型，内部其实也是调用了<code>reactive</code>函数。</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>汽车信息：一台{{ car.brand }}汽车，价值{{ car.price }}万<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>游戏列表：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>g in games<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>g.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ g.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>测试：{{obj.a.b.c.d}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeCarPrice<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改汽车价格<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeFirstGame<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改第一游戏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>测试<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token comment">// 数据</span>
<span class="token keyword">let</span> car <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span> brand<span class="token punctuation">:</span> <span class="token string">'奔驰'</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> games <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">'ahsgdyfa01'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'英雄联盟'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">'ahsgdyfa02'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'王者荣耀'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">'ahsgdyfa03'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'原神'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  a<span class="token punctuation">:</span><span class="token punctuation">{</span> b<span class="token punctuation">:</span><span class="token punctuation">{</span> c<span class="token punctuation">:</span><span class="token punctuation">{</span> d<span class="token punctuation">:</span><span class="token number">666</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">changeCarPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  car<span class="token punctuation">.</span>value<span class="token punctuation">.</span>price <span class="token operator">+=</span> <span class="token number">10</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">changeFirstGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  games<span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'流星蝴蝶剑'</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  obj<span class="token punctuation">.</span>value<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b<span class="token punctuation">.</span>c<span class="token punctuation">.</span>d <span class="token operator">=</span> <span class="token number">999</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_6-ref-对比-reactive"><a href="#_6-ref-对比-reactive" aria-hidden="true" class="header-anchor">#</a> 6. ref 对比 reactive</h2> <p>宏观角度看：</p> <blockquote><ol><li><p><code>ref</code>用来定义：<strong>基本类型数据</strong>、<strong>对象类型数据</strong>；</p></li> <li><p><code>reactive</code>用来定义：<strong>对象类型数据</strong>。</p></li></ol></blockquote> <ul><li>区别：</li></ul> <blockquote><ol><li><p><code>ref</code>创建的变量必须使用<code>.value</code>（可以使用<code>volar</code>插件自动添加<code>.value</code>）。</p> <p><img src="data:image/png;base64,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" alt></p></li> <li><p><code>reactive</code>重新分配一个新对象，会<strong>失去</strong>响应式（可以使用<code>Object.assign</code>去整体替换）。</p></li></ol></blockquote> <ul><li>使用原则：</li></ul> <blockquote><ol><li>若需要一个基本类型的响应式数据，必须使用<code>ref</code>。</li> <li>若需要一个响应式对象，层级不深，<code>ref</code>、<code>reactive</code>都可以。</li> <li>若需要一个响应式对象，且层级较深，推荐使用<code>reactive</code>。</li></ol></blockquote> <h2 id="_7-torefs-与-toref"><a href="#_7-torefs-与-toref" aria-hidden="true" class="header-anchor">#</a> 7. toRefs 与 toRef</h2> <ul><li>作用：将一个响应式对象中的每一个属性，转换为<code>ref</code>对象。</li> <li>备注：<code>toRefs</code>与<code>toRef</code>功能一致，但<code>toRefs</code>可以批量转换。</li> <li>语法如下：</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>姓名：{{person.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>年龄：{{person.age}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>性别：{{person.gender}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改名字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeAge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改年龄<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeGender<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改性别<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">,</span>reactive<span class="token punctuation">,</span>toRefs<span class="token punctuation">,</span>toRef<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
  <span class="token comment">// 数据</span>
  <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">'张三'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">,</span> gender<span class="token punctuation">:</span><span class="token string">'男'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// 通过toRefs将person对象中的n个属性批量取出，且依然保持响应式的能力</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span>gender<span class="token punctuation">}</span> <span class="token operator">=</span>  <span class="token function">toRefs</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
  <span class="token comment">// 通过toRef将person对象中的gender属性取出，且依然保持响应式的能力</span>
  <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">)</span>
  <span class="token comment">// 方法</span>
  <span class="token keyword">function</span> <span class="token function">changeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    name<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token string">'~'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">changeAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    age<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">changeGender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    gender<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'女'</span>
  <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_8-computed"><a href="#_8-computed" aria-hidden="true" class="header-anchor">#</a> 8. computed</h2> <p>作用：根据已有数据计算出新数据（和<code>Vue2</code>中的<code>computed</code>作用一致）。</p> <img src="/assets/img/006-computed.8b34efdd.gif" style="zoom: 25%;"> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    姓：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>firstName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>lastName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    全名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{fullName}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeFullName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>全名改为：li-si<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">,</span>computed<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
  <span class="token keyword">let</span> firstName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'zhang'</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> lastName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'san'</span><span class="token punctuation">)</span>

  <span class="token comment">// 计算属性——只读取，不修改</span>
  <span class="token comment">/* let fullName = computed(()=&gt;{
    return firstName.value + '-' + lastName.value
  }) */</span>

  <span class="token comment">// 计算属性——既读取又修改</span>
  <span class="token keyword">let</span> fullName <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 读取</span>
    <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> firstName<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span> lastName<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 修改</span>
    <span class="token keyword">set</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'有人修改了fullName'</span><span class="token punctuation">,</span>val<span class="token punctuation">)</span>
      firstName<span class="token punctuation">.</span>value <span class="token operator">=</span> val<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      lastName<span class="token punctuation">.</span>value <span class="token operator">=</span> val<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">function</span> <span class="token function">changeFullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    fullName<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'li-si'</span>
  <span class="token punctuation">}</span> 
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_9-watch"><a href="#_9-watch" aria-hidden="true" class="header-anchor">#</a> 9.watch</h2> <ul><li>作用：监视数据的变化（和<code>Vue2</code>中的<code>watch</code>作用一致）</li> <li>特点：<code>Vue3</code>中的<code>watch</code>只能监视以下<strong>四种数据</strong>：</li></ul> <blockquote><ol><li><code>ref</code>定义的数据。</li> <li><code>reactive</code>定义的数据。</li> <li>函数返回一个值（<code>getter</code>函数）：监视对象(ref、reactive、props)中的某个属性的时候</li> <li>一个包含上述内容的数组。</li></ol></blockquote> <p>我们在<code>Vue3</code>中使用<code>watch</code>的时候，通常会遇到以下几种情况：</p> <h3 id="_9-1-情况一：ref基本类型，写数据名"><a href="#_9-1-情况一：ref基本类型，写数据名" aria-hidden="true" class="header-anchor">#</a> 9.1 情况一：ref基本类型，写数据名</h3> <p>监视<code>ref</code>定义的【基本类型】数据：直接写数据名即可，监视的是其<code>value</code>值的改变。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>情况一：监视【ref】定义的【基本类型】数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>当前求和为：{{sum}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeSum<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点我sum+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">,</span>watch<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
  <span class="token comment">// 数据</span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token comment">// 方法</span>
  <span class="token keyword">function</span> <span class="token function">changeSum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    sum<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 监视，情况一：监视【ref】定义的【基本类型】数据</span>
  <span class="token keyword">const</span> stopWatch <span class="token operator">=</span> <span class="token function">watch</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span><span class="token punctuation">(</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sum变化了'</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>newValue <span class="token operator">&gt;=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">stopWatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_9-2-情况二：ref对象类型，写数据名并开启深度监视"><a href="#_9-2-情况二：ref对象类型，写数据名并开启深度监视" aria-hidden="true" class="header-anchor">#</a> 9.2 情况二：ref对象类型，写数据名并开启深度监视</h3> <p>监视<code>ref</code>定义的【对象类型】数据：直接写数据名，监视的是对象的【地址值】，若想监视对象内部的数据，要手动开启深度监视。</p> <blockquote><p>注意：</p> <ul><li><p>若修改的是<code>ref</code>定义的对象中的属性，<code>newValue</code> 和 <code>oldValue</code> 都是新值，因为它们是同一个对象。</p></li> <li><p>若修改整个<code>ref</code>定义的对象，<code>newValue</code> 是新值， <code>oldValue</code> 是旧值，因为不是同一个对象了。</p></li></ul></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>情况二：监视【ref】定义的【对象类型】数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>姓名：{{ person.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>年龄：{{ person.age }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改名字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeAge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改年龄<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changePerson<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改整个人<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">,</span>watch<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
  <span class="token comment">// 数据</span>
  <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span><span class="token string">'张三'</span><span class="token punctuation">,</span>
    age<span class="token punctuation">:</span><span class="token number">18</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// 方法</span>
  <span class="token keyword">function</span> <span class="token function">changeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    person<span class="token punctuation">.</span>value<span class="token punctuation">.</span>name <span class="token operator">+=</span> <span class="token string">'~'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">changeAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    person<span class="token punctuation">.</span>value<span class="token punctuation">.</span>age <span class="token operator">+=</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">changePerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    person<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">'李四'</span><span class="token punctuation">,</span>age<span class="token punctuation">:</span><span class="token number">90</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/* 
    监视，情况一：监视【ref】定义的【对象类型】数据，监视的是对象的地址值，若想监视对象内部属性的变化，需要手动开启深度监视
    watch的第一个参数是：被监视的数据
    watch的第二个参数是：监视的回调
    watch的第三个参数是：配置对象（deep、immediate等等.....） 
  */</span>
  <span class="token function">watch</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token punctuation">(</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'person变化了'</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>deep<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_9-3-情况三：reactive对象，写数据名默认已经开启深度监视"><a href="#_9-3-情况三：reactive对象，写数据名默认已经开启深度监视" aria-hidden="true" class="header-anchor">#</a> 9.3 情况三：reactive对象，写数据名默认已经开启深度监视</h3> <p>监视<code>reactive</code>定义的【对象类型】数据，且默认开启了深度监视。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>情况三：监视【reactive】定义的【对象类型】数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>姓名：{{ person.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>年龄：{{ person.age }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改名字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeAge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改年龄<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changePerson<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改整个人<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>测试：{{obj.a.b.c}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改obj.a.b.c<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span>reactive<span class="token punctuation">,</span>watch<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
  <span class="token comment">// 数据</span>
  <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span><span class="token string">'张三'</span><span class="token punctuation">,</span>
    age<span class="token punctuation">:</span><span class="token number">18</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    a<span class="token punctuation">:</span><span class="token punctuation">{</span>
      b<span class="token punctuation">:</span><span class="token punctuation">{</span>
        c<span class="token punctuation">:</span><span class="token number">666</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// 方法</span>
  <span class="token keyword">function</span> <span class="token function">changeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    person<span class="token punctuation">.</span>name <span class="token operator">+=</span> <span class="token string">'~'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">changeAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    person<span class="token punctuation">.</span>age <span class="token operator">+=</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">changePerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">'李四'</span><span class="token punctuation">,</span>age<span class="token punctuation">:</span><span class="token number">80</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    obj<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">888</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 监视，情况三：监视【reactive】定义的【对象类型】数据，且默认是开启深度监视的</span>
  <span class="token function">watch</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token punctuation">(</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'person变化了'</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">watch</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token punctuation">(</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Obj变化了'</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_9-4-情况四：对象的某个属性，使用函数形式"><a href="#_9-4-情况四：对象的某个属性，使用函数形式" aria-hidden="true" class="header-anchor">#</a> 9.4 情况四：对象的某个属性，使用函数形式</h3> <p>监视<code>ref</code>或<code>reactive</code>定义的【对象类型】数据中的<strong>某个属性</strong>，注意点如下：</p> <ol><li>若该属性值<strong>不是</strong>【对象类型】，需要写成函数形式。</li> <li>若该属性值是<strong>依然</strong>是【对象类型】，可直接编，也可写成函数，建议写成函数。</li></ol> <p>结论：监视的要是对象里的属性，那么最好写函数式，注意点：若是对象监视的是地址值，需要关注对象内部，需要手动开启深度监视。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>情况四：监视【ref】或【reactive】定义的【对象类型】数据中的某个属性<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>姓名：{{ person.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>年龄：{{ person.age }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>汽车：{{ person.car.c1 }}、{{ person.car.c2 }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改名字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeAge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改年龄<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeC1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改第一台车<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeC2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改第二台车<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeCar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改整个车<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span>reactive<span class="token punctuation">,</span>watch<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

  <span class="token comment">// 数据</span>
  <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span><span class="token string">'张三'</span><span class="token punctuation">,</span>
    age<span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">,</span>
    car<span class="token punctuation">:</span><span class="token punctuation">{</span>
      c1<span class="token punctuation">:</span><span class="token string">'奔驰'</span><span class="token punctuation">,</span>
      c2<span class="token punctuation">:</span><span class="token string">'宝马'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// 方法</span>
  <span class="token keyword">function</span> <span class="token function">changeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    person<span class="token punctuation">.</span>name <span class="token operator">+=</span> <span class="token string">'~'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">changeAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    person<span class="token punctuation">.</span>age <span class="token operator">+=</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">changeC1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    person<span class="token punctuation">.</span>car<span class="token punctuation">.</span>c1 <span class="token operator">=</span> <span class="token string">'奥迪'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">changeC2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    person<span class="token punctuation">.</span>car<span class="token punctuation">.</span>c2 <span class="token operator">=</span> <span class="token string">'大众'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">changeCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    person<span class="token punctuation">.</span>car <span class="token operator">=</span> <span class="token punctuation">{</span>c1<span class="token punctuation">:</span><span class="token string">'雅迪'</span><span class="token punctuation">,</span>c2<span class="token punctuation">:</span><span class="token string">'爱玛'</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 监视，情况四：监视响应式对象中的某个属性，且该属性是基本类型的，要写成函数式</span>
  <span class="token comment">/* watch(()=&gt; person.name,(newValue,oldValue)=&gt;{
    console.log('person.name变化了',newValue,oldValue)
  }) */</span>

  <span class="token comment">// 监视，情况四：监视响应式对象中的某个属性，且该属性是对象类型的，可以直接写，也能写函数，更推荐写函数</span>
  <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>person<span class="token punctuation">.</span>car<span class="token punctuation">,</span><span class="token punctuation">(</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'person.car变化了'</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>deep<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_9-5-情况五：监视上述的多个数据"><a href="#_9-5-情况五：监视上述的多个数据" aria-hidden="true" class="header-anchor">#</a> 9.5 情况五：监视上述的多个数据</h3> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>情况五：监视上述的多个数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>姓名：{{ person.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>年龄：{{ person.age }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>汽车：{{ person.car.c1 }}、{{ person.car.c2 }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改名字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeAge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改年龄<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeC1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改第一台车<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeC2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改第二台车<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeCar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改整个车<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span>reactive<span class="token punctuation">,</span>watch<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

  <span class="token comment">// 数据</span>
  <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span><span class="token string">'张三'</span><span class="token punctuation">,</span>
    age<span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">,</span>
    car<span class="token punctuation">:</span><span class="token punctuation">{</span> c1<span class="token punctuation">:</span><span class="token string">'奔驰'</span><span class="token punctuation">,</span> c2<span class="token punctuation">:</span><span class="token string">'宝马'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  
  <span class="token comment">// 监视，情况五：监视上述的多个数据</span>
  <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>person<span class="token punctuation">.</span>name<span class="token punctuation">,</span>person<span class="token punctuation">.</span>car<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'person.car变化了'</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>deep<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  
  <span class="token comment">// 方法</span>
  <span class="token keyword">function</span> <span class="token function">changeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    person<span class="token punctuation">.</span>name <span class="token operator">+=</span> <span class="token string">'~'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">changeAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    person<span class="token punctuation">.</span>age <span class="token operator">+=</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">changeC1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    person<span class="token punctuation">.</span>car<span class="token punctuation">.</span>c1 <span class="token operator">=</span> <span class="token string">'奥迪'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">changeC2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    person<span class="token punctuation">.</span>car<span class="token punctuation">.</span>c2 <span class="token operator">=</span> <span class="token string">'大众'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">changeCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    person<span class="token punctuation">.</span>car <span class="token operator">=</span> <span class="token punctuation">{</span>c1<span class="token punctuation">:</span><span class="token string">'雅迪'</span><span class="token punctuation">,</span>c2<span class="token punctuation">:</span><span class="token string">'爱玛'</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_9-6-watch第一个参数是值或函数的区别"><a href="#_9-6-watch第一个参数是值或函数的区别" aria-hidden="true" class="header-anchor">#</a> 9.6 watch第一个参数是值或函数的区别</h3> <p><code>watch</code> 方法的第一个参数可以是<strong>值</strong>（如 <code>ref</code>、<code>reactive</code> 对象）或<strong>函数</strong>，二者的区别主要体现在 <strong>依赖追踪方式</strong> 和 <strong>适用场景</strong> 上。</p> <h4 id="_9-6-1-直接传递-值（如-ref-或-reactive-对象）"><a href="#_9-6-1-直接传递-值（如-ref-或-reactive-对象）" aria-hidden="true" class="header-anchor">#</a> 9.6.1 直接传递 <strong>值</strong>（如 <code>ref</code> 或 <code>reactive</code> 对象）</h4> <p>特点：</p> <ol><li><strong>自动依赖追踪</strong> <ul><li>直接传递 <code>ref</code> 时，<code>watch</code> 会自动追踪其 <code>.value</code> 的变化。</li> <li>传递 <code>reactive</code> 对象时，会默认启用 <code>{ deep: true }</code>，深度观察嵌套属性的变化。</li></ul></li> <li><strong>单一依赖</strong> <ul><li>只能观察单个响应式变量，无法直接组合多个依赖。</li></ul></li> <li><strong>适用场景</strong> <ul><li>简单观察单个变量或对象的整体变化。</li> <li>需要深度监听对象内部属性时，无需额外配置。</li></ul></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> watch<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>

<span class="token comment">// 观察一个 ref</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">watch</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'count变化:'</span><span class="token punctuation">,</span> newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 观察 reactive 对象</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">watch</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'state变化:'</span><span class="token punctuation">,</span> newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_9-6-2-传递-函数（返回一个值）"><a href="#_9-6-2-传递-函数（返回一个值）" aria-hidden="true" class="header-anchor">#</a> 9.6.2 传递 <strong>函数</strong>（返回一个值）</h4> <p>特点：</p> <ol><li><p><strong>动态依赖追踪</strong></p> <ul><li>函数内部可以访问多个响应式变量，任一变量变化都会触发回调。</li> <li>例如：<code>() =&gt; state.a + state.b</code> 会同时观察 <code>state.a</code> 和 <code>state.b</code>。</li></ul></li> <li><p><strong>精准控制依赖</strong></p> <ul><li>函数返回的值会被 Vue 追踪，只有该返回值变化时才会触发回调。</li> <li>适合观察计算后的值或嵌套属性（如 <code>() =&gt; obj.foo.bar</code>）。</li></ul></li> <li><p><strong>需要显式深度监听</strong></p> <ul><li><p>如果函数返回一个对象/数组，需通过 <code>{ deep: true }</code> 深度监听其内部变化：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>nestedObj<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'nestedObj变化:'</span><span class="token punctuation">,</span> newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> deep<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p><strong>适用场景</strong></p> <ul><li>需要观察多个响应式变量的组合结果。</li> <li>需要观察嵌套属性或计算属性的变化。</li></ul></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> watch<span class="token punctuation">,</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 观察函数返回值（如计算属性）</span>
<span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>a <span class="token operator">+</span> state<span class="token punctuation">.</span>b<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>sum<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'a + b的和变化:'</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 观察 reactive 对象的某个属性</span>
<span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>a<span class="token punctuation">,</span>
  <span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'state.a变化:'</span><span class="token punctuation">,</span> newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_9-6-3-核心区别总结"><a href="#_9-6-3-核心区别总结" aria-hidden="true" class="header-anchor">#</a> 9.6.3 核心区别总结</h4> <table><thead><tr><th><strong>特性</strong></th> <th><strong>直接传值（ref/reactive）</strong></th> <th><strong>传递函数</strong></th></tr></thead> <tbody><tr><td><strong>依赖数量</strong></td> <td>单一依赖</td> <td>可包含多个依赖（动态追踪）</td></tr> <tr><td><strong>深度监听</strong></td> <td>自动启用（对 reactive 对象）</td> <td>需手动配置 <code>{ deep: true }</code></td></tr> <tr><td><strong>适用场景</strong></td> <td>观察单个变量或对象整体变化</td> <td>观察计算值、嵌套属性或多个依赖的组合</td></tr> <tr><td><strong>灵活性</strong></td> <td>较低</td> <td>更高（可动态计算返回值）</td></tr></tbody></table> <h4 id="_9-6-4-常见问题解答"><a href="#_9-6-4-常见问题解答" aria-hidden="true" class="header-anchor">#</a> 9.6.4 常见问题解答</h4> <ol><li><p>为什么观察 <code>reactive</code> 对象的属性时要用函数？</p> <ul><li>直接传递 <code>state.a</code> 会导致响应性丢失，因为 <code>state.a</code> 是原始值而非响应式引用。</li> <li>通过函数 <code>() =&gt; state.a</code>，Vue 能正确追踪 <code>state.a</code> 的依赖。</li></ul></li> <li><p>如何同时观察多个 <code>ref</code>？</p> <ul><li><p>使用函数返回一个包含多个 ref 的对象或数组：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>a<span class="token punctuation">.</span>value<span class="token punctuation">,</span> b<span class="token punctuation">.</span>value<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token punctuation">[</span>newA<span class="token punctuation">,</span> newB<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'a或b变化:'</span><span class="token punctuation">,</span> newA<span class="token punctuation">,</span> newB<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p>函数形式能否替代 <code>watchEffect</code>？</p> <ul><li>不能。<code>watchEffect</code> 会立即执行并自动追踪所有依赖，而 <code>watch</code> 的函数形式需要显式返回一个值，且仅在返回值变化时触发回调。</li></ul></li></ol> <h2 id="_10-watcheffect"><a href="#_10-watcheffect" aria-hidden="true" class="header-anchor">#</a> 10. watchEffect</h2> <ul><li><p>官网：立即运行一个函数，同时响应式地追踪其依赖，并在依赖更改时重新执行该函数。</p></li> <li><p><code>watch</code>对比<code>watchEffect</code></p> <blockquote><ol><li><p>都能监听响应式数据的变化，不同的是监听数据变化的方式不同</p></li> <li><p><code>watch</code>：要明确指出监视的数据</p></li> <li><p><code>watchEffect</code>：不用明确指出监视的数据（函数中用到哪些属性，那就监视哪些属性）。</p></li></ol></blockquote></li> <li><p>示例代码：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>需求：水温达到50℃，或水位达到20cm，则联系服务器<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>demo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>水温：{{temp}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>水位：{{height}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changePrice<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>水温+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeSum<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>水位+10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">,</span>watch<span class="token punctuation">,</span>watchEffect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
  <span class="token comment">// 数据</span>
  <span class="token keyword">let</span> temp <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> height <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token comment">// 方法</span>
  <span class="token keyword">function</span> <span class="token function">changePrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    temp<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">10</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">changeSum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    height<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 用watch实现，需要明确的指出要监视：temp、height</span>
  <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>temp<span class="token punctuation">,</span>height<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">// 从value中获取最新的temp值、height值</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>newTemp<span class="token punctuation">,</span>newHeight<span class="token punctuation">]</span> <span class="token operator">=</span> value
    <span class="token comment">// 室温达到50℃，或水位达到20cm，立刻联系服务器</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>newTemp <span class="token operator">&gt;=</span> <span class="token number">50</span> <span class="token operator">||</span> newHeight <span class="token operator">&gt;=</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'联系服务器'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// 用watchEffect实现，不用</span>
  <span class="token keyword">const</span> stopWtach <span class="token operator">=</span> <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">// 室温达到50℃，或水位达到20cm，立刻联系服务器</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>temp<span class="token punctuation">.</span>value <span class="token operator">&gt;=</span> <span class="token number">50</span> <span class="token operator">||</span> height<span class="token punctuation">.</span>value <span class="token operator">&gt;=</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'demo'</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span>innerText<span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'联系服务器'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 水温达到100，或水位达到50，取消监视</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>temp<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token number">100</span> <span class="token operator">||</span> height<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'清理了'</span><span class="token punctuation">)</span>
      <span class="token function">stopWtach</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h2 id="_11-标签的-ref-属性"><a href="#_11-标签的-ref-属性" aria-hidden="true" class="header-anchor">#</a> 11. 标签的 ref 属性</h2> <p>作用：用于注册模板引用。</p> <blockquote><ul><li><p>用在普通<code>DOM</code>标签上，获取的是<code>DOM</code>节点。</p></li> <li><p>用在组件标签上，获取的是组件实例对象。</p></li></ul></blockquote> <p>用在普通<code>DOM</code>标签上：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>尚硅谷<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>前端<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Vue<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>inpt<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>showLog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点我打印内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
	
  <span class="token keyword">let</span> title1 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> title2 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> title3 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">function</span> <span class="token function">showLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 通过id获取元素</span>
    <span class="token keyword">const</span> t1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'title1'</span><span class="token punctuation">)</span>
    <span class="token comment">// 打印内容</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t1 <span class="token keyword">as</span> HTMLElement<span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>HTMLElement<span class="token operator">&gt;</span>t1<span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>t1<span class="token operator">?</span><span class="token punctuation">.</span>innerText<span class="token punctuation">)</span>
    
		<span class="token comment">/************************************/</span>
    <span class="token comment">// 通过ref获取元素</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>title1<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>title2<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>title3<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>用在组件标签上：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- 父组件App.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Person</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ren<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>测试<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">import</span> Person <span class="token keyword">from</span> <span class="token string">'./components/Person.vue'</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

  <span class="token keyword">let</span> ren <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ren<span class="token punctuation">.</span>value<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ren<span class="token punctuation">.</span>value<span class="token punctuation">.</span>age<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 子组件Person.vue中要使用defineExpose暴露内容 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">,</span>defineExpose<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
	<span class="token comment">// 数据</span>
  <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>
  <span class="token comment">/****************************/</span>
  <span class="token comment">// 使用defineExpose将组件中的数据交给外部</span>
  <span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">,</span>age<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_12-props"><a href="#_12-props" aria-hidden="true" class="header-anchor">#</a> 12 props</h2> <p><a href="https://cn.vuejs.org/guide/components/props" target="_blank" rel="noopener noreferrer">官方 props 介绍<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>在 Vue 3 中，<code>defineProps</code> 是一个用于定义组件 <code>props</code> 的宏函数，通常与 <code>&lt;script setup&gt;</code> 语法结合使用。它简化了 <code>props</code> 的定义方式，并支持多种形式来声明 <code>props</code>。它的主要特点包括：</p> <ol><li><strong>简洁</strong>：无需显式导入，直接在 <code>&lt;script setup&gt;</code> 中使用。</li> <li><strong>类型推导</strong>：支持 TypeScript 类型标注，自动推导 <code>props</code> 类型。</li> <li><strong>灵活性</strong>：支持多种形式定义 <code>props</code>，包括对象形式、TypeScript 接口等。</li></ol> <h3 id="_12-1-对象形式定义props（推荐）"><a href="#_12-1-对象形式定义props（推荐）" aria-hidden="true" class="header-anchor">#</a> 12.1 对象形式定义props（推荐）</h3> <p>通过对象形式定义 <code>props</code>，可以指定 <code>type</code>、<code>required</code>、<code>default</code> 等配置项。</p> <p>注意，这中声明只能进行简单的类型判断，对于复杂类型无法自动推断类型，在TypeScript 中会报错。如果需要使用复杂类型，并且TypeScript 报错了，则需要使用下面的 TypeScript 方式声明。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    {{ count }}
    <span class="token comment">&lt;!-- 这种在TS中会报错：'item' is of type 'unknown'--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item in dataList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.key<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.name}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  count<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> Number<span class="token punctuation">,</span>
    required<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  dataList<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> Array<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  user<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> Object<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Guest'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">18</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>对象形式的核心配置项：</p> <table><thead><tr><th>配置项</th> <th>作用</th> <th>示例</th></tr></thead> <tbody><tr><td>type</td> <td>指定 <code>props</code> 类型（支持 <code>String</code>, <code>Number</code>, <code>Boolean</code>, <code>Array</code>, <code>Object</code>, <code>Date</code>, <code>Function</code>, <code>Symbol</code> 或自定义类）</td> <td>type: [String, Number]</td></tr> <tr><td>required</td> <td>是否必传（布尔值）</td> <td>required: true</td></tr> <tr><td>default</td> <td>默认值（对象/数组需用工厂函数返回）</td> <td>default: () =&gt; []</td></tr> <tr><td>validator</td> <td>自定义验证函数（返回 <code>true</code>/<code>false</code>）</td> <td>validator: (value) =&gt; value &gt; 0</td></tr></tbody></table> <h3 id="_12-2-数组形式定义（简单声明）"><a href="#_12-2-数组形式定义（简单声明）" aria-hidden="true" class="header-anchor">#</a> 12.2 数组形式定义（简单声明）</h3> <p>通过数组形式快速声明 <code>props</code>，但不支持类型检查和默认值。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    标题：{{ title }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'count'</span><span class="token punctuation">,</span> <span class="token string">'isActive'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_12-3-typescript-接口形式"><a href="#_12-3-typescript-接口形式" aria-hidden="true" class="header-anchor">#</a> 12.3 TypeScript 接口形式</h3> <p>使用 TypeScript 接口定义 <code>props</code>，支持类型推导和类型检查。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">interface</span> <span class="token class-name">Props</span> <span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> string
  count<span class="token operator">?</span><span class="token punctuation">:</span> number
  isActive<span class="token punctuation">:</span> boolean
<span class="token punctuation">}</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> defineProps<span class="token operator">&lt;</span>Props<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_12-4-typescript-接口-默认值"><a href="#_12-4-typescript-接口-默认值" aria-hidden="true" class="header-anchor">#</a> 12.4 TypeScript 接口 + 默认值</h3> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">interface</span> <span class="token class-name">Props</span> <span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> string
  count<span class="token operator">?</span><span class="token punctuation">:</span> number
  isActive<span class="token punctuation">:</span> boolean
<span class="token punctuation">}</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">withDefaults</span><span class="token punctuation">(</span>defineProps<span class="token operator">&lt;</span>Props<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  count<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  isActive<span class="token punctuation">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_12-5-响应式-props-解构问题解决"><a href="#_12-5-响应式-props-解构问题解决" aria-hidden="true" class="header-anchor">#</a> 12.5 响应式 Props 解构问题解决</h3> <p>1、在 vue 3.4 及以下版本：直接解构 <code>props</code> 会失去响应性，需用 <code>toRefs</code> 保持响应：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> toRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token punctuation">:</span> Number <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> count <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token comment">// 保持响应性</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>2、在 3.5 及以上版本：直接解构props不会失去响应式。访问由 <code>defineProps</code> 解构的变量时，Vue 编译器会自动在前面添加 <code>props.</code>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> foo <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在 3.5 之前只运行一次</span>
  <span class="token comment">// 在 3.5+ 中在 &quot;foo&quot; prop 变化时会重新执行。</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 上面的代码等同于以下代码：</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>foo<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_13-defineexpose：暴露属性和方法"><a href="#_13-defineexpose：暴露属性和方法" aria-hidden="true" class="header-anchor">#</a> 13. defineExpose：暴露属性和方法</h2> <p>在vue3中，通过模板引用或者 <code>$parent</code> 链获取到的组件的公开实例，是访问不到组件的任何属性和方法的，需要使用 <code>defineExpose</code> 编译器宏来显式指定在 <code>&lt;script setup&gt;</code> 组件中要暴露出去的属性和方法。</p> <h3 id="_13-1-子组件暴露方法-属性"><a href="#_13-1-子组件暴露方法-属性" aria-hidden="true" class="header-anchor">#</a> 13.1 子组件暴露方法/属性</h3> <p>使用 <code>defineExpose</code> 宏显式暴露需要公开的内容：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- ChildComponent.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>子组件计数: {{ count }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token comment">// 子组件内部状态</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token comment">// 子组件方法</span>
<span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  count<span class="token punctuation">.</span>value<span class="token operator">++</span>
<span class="token punctuation">}</span>
<span class="token comment">// 暴露指定内容给父组件</span>
<span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token punctuation">,</span> increment <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_13-2-父-子组件调用组件实例方法"><a href="#_13-2-父-子组件调用组件实例方法" aria-hidden="true" class="header-anchor">#</a> 13.2 父/子组件调用组件实例方法</h3> <p>父组件通过 <code>ref</code> 获取子组件实例并调用暴露内容：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- ParentComponent.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ChildComponent</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>childRef<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>handleClick<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>父组件按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> ChildComponent <span class="token keyword">from</span> <span class="token string">'./ChildComponent.vue'</span>

<span class="token comment">// 1. 创建模板引用</span>
<span class="token keyword">const</span> childRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token comment">// 2. 调用子组件方法（示例在挂载后调用）</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>childRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    childRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 调用子组件方法</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>childRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span>count<span class="token punctuation">)</span> <span class="token comment">// 访问子组件属性</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 3. 也可以在事件处理中调用</span>
<span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  childRef<span class="token punctuation">.</span>value<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>子组件通过<code>$parent</code> 父组件实例并调用暴露内容</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// 需要使用 Options API 格式才能访问 $parent</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 通过 $parent 调用父组件方法</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$parent <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span>parentMethod<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span><span class="token function">parentMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在 Vue3 中，官方不推荐直接使用 <code>$parent</code>（因为会增加组件耦合度），这里介绍只是为了增加知识。仅在以下情况考虑使用 <code>$parent</code>：</p> <ol><li>快速原型开发</li> <li>确定父子关系永远不会改变</li> <li>不需要维护的小型项目</li></ol> <p>可以使用替代方案推荐（优于 $parent）：</p> <table><thead><tr><th style="text-align:left">方案</th> <th style="text-align:left">优点</th> <th style="text-align:left">示例</th></tr></thead> <tbody><tr><td style="text-align:left"><strong>自定义事件</strong></td> <td style="text-align:left">松耦合，标准通信方式</td> <td style="text-align:left"><code>emit('event-name', data)</code></td></tr> <tr><td style="text-align:left"><strong>provide/inject</strong></td> <td style="text-align:left">适合跨层级通信</td> <td style="text-align:left"><code>provide('key', value)</code></td></tr> <tr><td style="text-align:left"><strong>Props 函数传递</strong></td> <td style="text-align:left">简单直接的父子通信</td> <td style="text-align:left"><code>:callback=&quot;parentMethod&quot;</code></td></tr></tbody></table> <h3 id="_13-3-typescript-类型支持（可选）"><a href="#_13-3-typescript-类型支持（可选）" aria-hidden="true" class="header-anchor">#</a> 13.3 TypeScript 类型支持（可选）</h3> <p>为组件实例添加类型定义：</p> <div class="language-vue extra-class"><pre class="language-vue"><code>// ChildComponent.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> count<span class="token punctuation">.</span>value<span class="token operator">++</span> <span class="token punctuation">}</span>

<span class="token comment">// 定义暴露接口</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ChildComponentExposed</span> <span class="token punctuation">{</span>
  count<span class="token punctuation">:</span> number
  increment<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

defineExpose<span class="token operator">&lt;</span>ChildComponentExposed<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  count<span class="token punctuation">,</span>
  increment
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

// ParentComponent.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> ChildComponent<span class="token punctuation">,</span> <span class="token punctuation">{</span> ChildComponentExposed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./ChildComponent.vue'</span>

<span class="token keyword">const</span> childRef <span class="token operator">=</span> ref<span class="token operator">&lt;</span>InstanceType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> ChildComponent<span class="token operator">&gt;</span> <span class="token operator">&amp;</span> ChildComponentExposed<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_13-4-注意事项"><a href="#_13-4-注意事项" aria-hidden="true" class="header-anchor">#</a> 13.4 注意事项</h3> <ol><li><p><strong>封装性控制</strong>：只暴露必要的接口，避免过度暴露内部实现</p></li> <li><p><strong>生命周期时机</strong>：确保子组件已挂载后再调用其方法（使用 <code>onMounted</code> 等生命周期钩子）</p></li> <li><p><strong>响应式保持</strong>：暴露的 ref 或 reactive 对象会保持响应性</p></li> <li><p><strong>方法参数传递</strong>：支持带参数的方法调用：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 子组件</span>
<span class="token keyword">const</span> <span class="token function-variable function">updateData</span> <span class="token operator">=</span> <span class="token punctuation">(</span>newValue<span class="token punctuation">:</span> string<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
<span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{</span> updateData <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 父组件</span>
childRef<span class="token punctuation">.</span>value<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">updateData</span><span class="token punctuation">(</span><span class="token string">'新值'</span><span class="token punctuation">)</span>
</code></pre></div></li></ol> <h2 id="_14-生命周期"><a href="#_14-生命周期" aria-hidden="true" class="header-anchor">#</a> 14. 生命周期</h2> <p>概念：<code>Vue</code>组件实例在创建时要经历一系列的初始化步骤，在此过程中<code>Vue</code>会在合适的时机，调用特定的函数，从而让开发者有机会在特定阶段运行自己的代码，这些特定的函数统称为：生命周期钩子</p> <p>规律：</p> <blockquote><p>生命周期整体分为四个阶段，分别是：<strong>创建、挂载、更新、销毁</strong>，每个阶段都有两个钩子，一前一后。</p></blockquote> <p><code>Vue2</code>的生命周期</p> <blockquote><p>创建阶段：<code>beforeCreate</code>、<code>created</code></p> <p>挂载阶段：<code>beforeMount</code>、<code>mounted</code></p> <p>更新阶段：<code>beforeUpdate</code>、<code>updated</code></p> <p>销毁阶段：<code>beforeDestroy</code>、<code>destroyed</code></p></blockquote> <p><code>Vue3</code>的生命周期</p> <blockquote><p>创建阶段：<code>setup</code></p> <p>挂载阶段：<code>onBeforeMount</code>、<code>onMounted</code></p> <p>更新阶段：<code>onBeforeUpdate</code>、<code>onUpdated</code></p> <p>卸载阶段：<code>onBeforeUnmount</code>、<code>onUnmounted</code></p></blockquote> <p>常用的钩子：<code>onMounted</code>(挂载完毕)、<code>onUpdated</code>(更新完毕)、<code>onBeforeUnmount</code>(卸载之前)</p> <p>示例代码：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>当前求和为：{{ sum }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>changeSum<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点我sum+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- vue3写法 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Person<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> 
    ref<span class="token punctuation">,</span> 
    onBeforeMount<span class="token punctuation">,</span> onMounted<span class="token punctuation">,</span> onBeforeUpdate<span class="token punctuation">,</span> onUpdated<span class="token punctuation">,</span> 
    onBeforeUnmount<span class="token punctuation">,</span> onUnmounted 
  <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
  <span class="token comment">// 数据</span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token comment">// 方法</span>
  <span class="token keyword">function</span> <span class="token function">changeSum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sum<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setup'</span><span class="token punctuation">)</span>
  <span class="token comment">// 生命周期钩子</span>
  <span class="token function">onBeforeMount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'挂载之前'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'挂载完毕'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">onBeforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'更新之前'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">onUpdated</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'更新完毕'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">onBeforeUnmount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'卸载之前'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'卸载完毕'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_15-自定义hook"><a href="#_15-自定义hook" aria-hidden="true" class="header-anchor">#</a> 15. 自定义hook</h2> <ul><li><p>什么是<code>hook</code>？—— 本质是一个函数，把<code>setup</code>函数中使用的<code>Composition API</code>进行了封装，类似于<code>vue2.x</code>中的<code>mixin</code>。</p></li> <li><p>自定义<code>hook</code>的优势：复用代码, 让<code>setup</code>中的逻辑更清楚易懂。</p></li></ul> <p>示例代码：</p> <p><code>useSum.ts</code>中内容如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">,</span>onMounted<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> sum<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">1</span> <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">decrement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> sum<span class="token punctuation">.</span>value <span class="token operator">-=</span> <span class="token number">1</span> <span class="token punctuation">}</span>
  <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">//向外部暴露数据</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>sum<span class="token punctuation">,</span>increment<span class="token punctuation">,</span>decrement<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>useDog.ts</code>中内容如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>reactive<span class="token punctuation">,</span>onMounted<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> axios<span class="token punctuation">,</span><span class="token punctuation">{</span>AxiosError<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> dogList <span class="token operator">=</span> reactive<span class="token operator">&lt;</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token comment">// 方法</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getDog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// 发请求</span>
      <span class="token keyword">let</span> <span class="token punctuation">{</span>data<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'https://dog.ceo/api/breed/pembroke/images/random'</span><span class="token punctuation">)</span>
      dogList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span> <span class="token comment">// 维护数据</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// 处理错误</span>
      <span class="token keyword">const</span> err <span class="token operator">=</span> <span class="token operator">&lt;</span>AxiosError<span class="token operator">&gt;</span>error
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token comment">// 挂载钩子</span>
    <span class="token function">getDog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// 向外部暴露数据</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>dogList<span class="token punctuation">,</span>getDog<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>组件中具体使用：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>当前求和为：{{sum}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>increment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点我+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>decrement<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点我-1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(u,index) in dogList.urlList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(u as string)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dogList.isLoading<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>加载中......<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>getDog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>再来一只狗<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span>defineComponent<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span><span class="token string">'App'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">import</span> useSum <span class="token keyword">from</span> <span class="token string">'./hooks/useSum'</span>
  <span class="token keyword">import</span> useDog <span class="token keyword">from</span> <span class="token string">'./hooks/useDog'</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span>sum<span class="token punctuation">,</span>increment<span class="token punctuation">,</span>decrement<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useSum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span>dogList<span class="token punctuation">,</span>getDog<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useDog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="参考资料"><a href="#参考资料" aria-hidden="true" class="header-anchor">#</a> 参考资料</h2> <p>vue3视频教程：https://www.bilibili.com/video/BV1Za4y1r7KE/</p> <p>视频教程的课件：https://gitee.com/marina-37/vue3_vite_ts</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/yulilong/front-end-doc/edit/master/doc/vue/vue3/002-vue3核心语法.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">5/7/2025, 5:03:20 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/25.2e1c4694.js" defer></script><script src="/assets/js/app.488c6ca2.js" defer></script>
  </body>
</html>
