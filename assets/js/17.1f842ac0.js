(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{421:function(s,t,a){s.exports=a.p+"assets/img/001-node-error-01.bd8c83a0.png"},422:function(s,t,a){s.exports=a.p+"assets/img/001-node-error-02.dd52915a.png"},423:function(s,t,a){s.exports=a.p+"assets/img/001-node-error-03.4977bf1e.png"},424:function(s,t,a){s.exports=a.p+"assets/img/001-node-error-03-1.fe389ef8.jpg"},425:function(s,t,a){s.exports=a.p+"assets/img/001-node-error-04.a724b883.png"},426:function(s,t,a){s.exports=a.p+"assets/img/001-node-error-05.324d3af3.png"},427:function(s,t,a){s.exports=a.p+"assets/img/001-node-error-06.52377fbd.jpg"},686:function(s,t,a){"use strict";a.r(t);var e=[function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"content"},[e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#_1-node告警：maxlistenersexceededwarning"}},[s._v("1. node告警：Maxlistenersexceededwarning")])]),e("li",[e("a",{attrs:{href:"#_2-node-内存不足：javascript-heap-out-of-memory"}},[s._v("2. node 内存不足：JavaScript heap out of memory")]),e("ul",[e("li",[e("a",{attrs:{href:"#_2-1-错误原因"}},[s._v("2.1 错误原因")])]),e("li",[e("a",{attrs:{href:"#_2-2-解决方法"}},[s._v("2.2 解决方法")])]),e("li",[e("a",{attrs:{href:"#_2-3-注意事项"}},[s._v("2.3 注意事项")])])])]),e("li",[e("a",{attrs:{href:"#_3-监听文件数量超限-enospc：system-limit-for-number-of-file-watchers-reached"}},[s._v("3. 监听文件数量超限 ENOSPC：system limit for number of file watchers reached")]),e("ul",[e("li",[e("a",{attrs:{href:"#_3-1-错误信息"}},[s._v("3.1 错误信息")])]),e("li",[e("a",{attrs:{href:"#_3-2-错误原因"}},[s._v("3.2 错误原因")])]),e("li",[e("a",{attrs:{href:"#_3-3-解决方案"}},[s._v("3.3 解决方案")])]),e("li",[e("a",{attrs:{href:"#_3-4-扩展知识"}},[s._v("3.4 扩展知识")])])])])])]),e("p"),s._v(" "),e("p",[s._v("[TOC]")]),s._v(" "),e("h1",{attrs:{id:"node环境常见问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#node环境常见问题","aria-hidden":"true"}},[s._v("#")]),s._v(" node环境常见问题")]),s._v(" "),e("h2",{attrs:{id:"_1-node告警：maxlistenersexceededwarning"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-node告警：maxlistenersexceededwarning","aria-hidden":"true"}},[s._v("#")]),s._v(" 1. node告警：Maxlistenersexceededwarning")]),s._v(" "),e("p",[e("img",{attrs:{src:a(421),alt:""}})]),s._v(" "),e("p",[s._v("告警的意思是对一个事件添加了11个监听器，溢出了监听器的最大值，需要通过setMaxListeners()增加监听器限制最大值。")]),s._v(" "),e("p",[s._v("增加监听器的limit数量，甚至取消限制，可以解决问题（后文会展示解除限制的方法）。\n但这种情况根本的解决途径是去排查什么地方对一个事件增加了11个监听器，当确定11个监听器都是有必要的时候再去增加监听器的限制数。")]),s._v(" "),e("p",[s._v("在vue.config.js文件中添加如下代码：")]),s._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{attrs:{class:"token function"}},[s._v("require")]),e("span",{attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{attrs:{class:"token string"}},[s._v("'events'")]),e("span",{attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("EventEmitter"),e("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("defaultMaxListeners "),e("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{attrs:{class:"token number"}},[s._v("20")]),e("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),e("span",{attrs:{class:"token comment"}},[s._v("// 将MaxListeners的限制数增加到20")]),s._v("\n"),e("span",{attrs:{class:"token function"}},[s._v("require")]),e("span",{attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{attrs:{class:"token string"}},[s._v("'events'")]),e("span",{attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("EventEmitter"),e("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("defaultMaxListeners "),e("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{attrs:{class:"token number"}},[s._v("0")]),e("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),e("span",{attrs:{class:"token comment"}},[s._v("// 解除限制")]),s._v("\n")])])]),e("p",[e("img",{attrs:{src:a(422),alt:""}})]),s._v(" "),e("p",[s._v("参考：https://segmentfault.com/a/1190000040710342")]),s._v(" "),e("h2",{attrs:{id:"_2-node-内存不足：javascript-heap-out-of-memory"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-node-内存不足：javascript-heap-out-of-memory","aria-hidden":"true"}},[s._v("#")]),s._v(" 2. node 内存不足：JavaScript heap out of memory")]),s._v(" "),e("p",[s._v("在vue2项目使用webpack打包报错")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("<--- JS stacktrace ---\x3e\n\nFATAL ERROR: CALL_AND_RETRY_LAST Allocation failed - JavaScript heap out of memory\n 1: 00007FF7E1BA3D05\n 2: 00007FF7E1B7DD46\n 3: 00007FF7E1B7E610\n")])])]),e("p",[e("img",{attrs:{src:a(423),alt:""}})]),s._v(" "),e("p",[s._v("在vue3项目使用vite报如下错误：")]),s._v(" "),e("p",[e("img",{attrs:{src:a(424),alt:""}})]),s._v(" "),e("h3",{attrs:{id:"_2-1-错误原因"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-错误原因","aria-hidden":"true"}},[s._v("#")]),s._v(" 2.1 错误原因")]),s._v(" "),e("p",[s._v("是由于 Node.js 进程的内存不足导致的 JavaScript 堆内存溢出。这种问题常见于处理大型项目或复杂依赖时，Node.js 默认的内存限制（通常为 2GB）不足以支持打包过程。")]),s._v(" "),e("h4",{attrs:{id:"_2-1-1-查看node运行内存大小命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-查看node运行内存大小命令","aria-hidden":"true"}},[s._v("#")]),s._v(" 2.1.1 查看node运行内存大小命令")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("node -e "),e("span",{attrs:{class:"token string"}},[s._v("\"console.log('node内存上限:', v8.getHeapStatistics().heap_size_limit / 1024 / 1024 + 'MB')\"")]),s._v("\n")])])]),e("h3",{attrs:{id:"_2-2-解决方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-解决方法","aria-hidden":"true"}},[s._v("#")]),s._v(" 2.2 解决方法")]),s._v(" "),e("p",[e("strong",[s._v("注意")]),s._v("：修改的内存单位是MB。")]),s._v(" "),e("h4",{attrs:{id:"_2-2-1-通过环境变量全局设置（推荐）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-通过环境变量全局设置（推荐）","aria-hidden":"true"}},[s._v("#")]),s._v(" 2.2.1 通过环境变量全局设置（推荐）")]),s._v(" "),e("p",[s._v("通过环境变量 "),e("code",[s._v("NODE_OPTIONS")]),s._v(" 设置 Node.js 的默认内存限制，适用于所有通过命令行启动的 Node.js 进程。")]),s._v(" "),e("p",[s._v("配置完成后可以使用"),e("code",[s._v("查看node运行内存")]),s._v("命令查看是否修改成功。")]),s._v(" "),e("p",[e("strong",[s._v("1、Linux/macOS")])]),s._v(" "),e("p",[s._v("在用户配置文件（如 "),e("code",[s._v("~/.bashrc")]),s._v("、"),e("code",[s._v("~/.zshrc")]),s._v("）中添加以下内容：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token comment"}},[s._v("# 设置 Node.js 堆内存上限为 4GB（根据需求调整）")]),s._v("\n"),e("span",{attrs:{class:"token function"}},[s._v("export")]),s._v(" NODE_OPTIONS"),e("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("--max-old-space-size"),e("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("4096\n")])])]),e("p",[s._v("保存后执行以下命令使配置生效：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token function"}},[s._v("source")]),s._v(" ~/.bashrc  "),e("span",{attrs:{class:"token comment"}},[s._v("# 或 source ~/.zshrc（取决于你的终端）")]),s._v("\n")])])]),e("p",[e("strong",[s._v("2、Windows")])]),s._v(" "),e("p",[s._v("通过系统环境变量配置：")]),s._v(" "),e("ol",[e("li",[s._v("右键点击“此电脑” → “属性” → “高级系统设置” → “环境变量”。")]),s._v(" "),e("li",[s._v("在“用户变量”或“系统变量”中，点击“新建”：\n"),e("ul",[e("li",[e("strong",[s._v("变量名")]),s._v("："),e("code",[s._v("NODE_OPTIONS")])]),s._v(" "),e("li",[e("strong",[s._v("变量值")]),s._v("："),e("code",[s._v("--max-old-space-size=4096")])])])]),s._v(" "),e("li",[s._v("重启所有命令行工具（如 CMD、PowerShell）使配置生效。")])]),s._v(" "),e("h4",{attrs:{id:"_2-2-2-修改npm命令脚本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-修改npm命令脚本","aria-hidden":"true"}},[s._v("#")]),s._v(" 2.2.2 修改npm命令脚本")]),s._v(" "),e("p",[s._v("在 "),e("code",[s._v("package.json")]),s._v(" 的脚本命令中添加 "),e("code",[s._v("--max-old-space-size")]),s._v(" 参数显式提高 Node.js 的堆内存上限。")]),s._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),e("span",{attrs:{class:"token property"}},[s._v('"scripts"')]),e("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{attrs:{class:"token property"}},[s._v('""')]),e("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{attrs:{class:"token string"}},[s._v('"对于vue2 webpack打包工具，使用如下命令："')]),e("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),e("span",{attrs:{class:"token property"}},[s._v('"build"')]),e("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{attrs:{class:"token string"}},[s._v('"node --max_old_space_size=4096 node_modules/@vue/cli-service/bin/vue-cli-service.js build"')]),e("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    \n    "),e("span",{attrs:{class:"token property"}},[s._v('""')]),e("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{attrs:{class:"token string"}},[s._v('"对于vue3 vite打包工具，使用如下命令："')]),e("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),e("span",{attrs:{class:"token property"}},[s._v('"start"')]),e("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{attrs:{class:"token string"}},[s._v('"node --max-old-space-size=4096 src/index.js"')]),e("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),e("span",{attrs:{class:"token property"}},[s._v('"build"')]),e("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{attrs:{class:"token string"}},[s._v('"node --max-old-space-size=4096 ./node_modules/vite/bin/vite.js build"')]),s._v("\n  "),e("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),e("p",[s._v("之后运行 "),e("code",[s._v("npm run build")]),s._v(" 或 "),e("code",[s._v("npm start")]),s._v(" 时，会自动应用内存限制。")]),s._v(" "),e("h4",{attrs:{id:"_2-2-3-使用increase-memory-limit工具修改"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-3-使用increase-memory-limit工具修改","aria-hidden":"true"}},[s._v("#")]),s._v(" 2.2.3 使用increase-memory-limit工具修改")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token comment"}},[s._v("# 全局安装increase-memory-limit")]),s._v("\n"),e("span",{attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),e("span",{attrs:{class:"token function"}},[s._v("install")]),s._v(" -g increase-memory-limit\n"),e("span",{attrs:{class:"token comment"}},[s._v("# 进入工程目录，执行：")]),s._v("\nincrease-memory-limit\n\n"),e("span",{attrs:{class:"token comment"}},[s._v("# 备用选项：https://www.pudn.com/news/62c43ba1502ed3121a92d0bb.html")]),s._v("\n"),e("span",{attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -g cross-env\n"),e("span",{attrs:{class:"token comment"}},[s._v("#安装结束后，运行如下命令：")]),s._v("\ncross-env LIMIT"),e("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("10240  increase-memory-limit "),e("span",{attrs:{class:"token comment"}},[s._v("# LIMIT是分配的内存大小，有3027、4096、8192、10240")]),s._v("\n")])])]),e("p",[s._v("在windows系统中，当运行"),e("code",[s._v("increase-memory-limit")]),s._v("命令提示报错，"),e("code",[s._v("node --max-old-space-size=4096不是内部或外部命令")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(425),alt:""}})]),s._v(" "),e("p",[s._v("这个问题，是因为执行 fix-memory-limit命令时，会在 当前项目的node_modules/.bin文件夹下的*.cmd文件中添加调整运行空间的命令，默认添加的"),e("code",[s._v('"%_prog%"')]),s._v("，但是项目的正常运行需要"),e("code",[s._v("%_prog%")]),s._v(",也就是去掉双引号才可以。")]),s._v(" "),e("p",[s._v("可以通过编辑器的 replace all的功能，全局进行替换，注意不要选错目录。由此目录也可以发现，当前的命令是只针对当前项目的，所以，如果新开了一个项目，或者删除了node_modules依赖后，需要重新执行命令才可以。\n如果vscode全局搜索搜不到 "),e("code",[s._v('"%_prog%"')]),s._v("关键字，需要点一下下面按钮：")]),s._v(" "),e("p",[e("img",{attrs:{src:a(426),alt:""}})]),s._v(" "),e("p",[s._v("参考链接：https://blog.csdn.net/Run_youngman/article/details/122474730")]),s._v(" "),e("p",[s._v("注意："),e("code",[s._v("increase-memory-limit")]),s._v("命令可能会导致git提交命令冲突，解决方法是删除"),e("code",[s._v("node_modules")]),s._v("文件夹，重新安装一个就好。")]),s._v(" "),e("h3",{attrs:{id:"_2-3-注意事项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-注意事项","aria-hidden":"true"}},[s._v("#")]),s._v(" 2.3 注意事项")]),s._v(" "),e("ol",[e("li",[e("p",[e("strong",[s._v("合理设置内存大小")]),s._v("：")]),s._v(" "),e("ul",[e("li",[s._v("建议值为物理内存的 50%~80%（如 8GB 物理内存可设置为 "),e("code",[s._v("4096")]),s._v("）。")]),s._v(" "),e("li",[s._v("设置过高可能导致系统卡顿甚至崩溃。")])])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("场景优先级")]),s._v("：")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("开发环境")]),s._v("：推荐使用方法一（环境变量）或方法二（npm 脚本）。")]),s._v(" "),e("li",[e("strong",[s._v("生产环境")]),s._v("：在启动命令中显式指定参数（如 "),e("code",[s._v("node --max-old-space-size=4096 server.js")]),s._v("）。")])])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("容器化部署（如 Docker）")]),s._v("：")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("在 Dockerfile 中通过环境变量设置：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("ENV NODE_OPTIONS"),e("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("--max-old-space-size"),e("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("4096\n")])])])])])]),s._v(" "),e("li",[e("p",[s._v("为什么默认内存限制是 2GB？")]),s._v(" "),e("p",[s._v("Node.js（基于 V8 引擎）默认堆内存上限为约 "),e("strong",[s._v("2GB")]),s._v("（64 位系统），这是为了平衡性能和稳定性。对于内存密集型任务（如构建工具、大数据处理），需手动调整此限制。")])])]),s._v(" "),e("h2",{attrs:{id:"_3-监听文件数量超限-enospc：system-limit-for-number-of-file-watchers-reached"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-监听文件数量超限-enospc：system-limit-for-number-of-file-watchers-reached","aria-hidden":"true"}},[s._v("#")]),s._v(" 3. 监听文件数量超限 ENOSPC：system limit for number of file watchers reached")]),s._v(" "),e("p",[s._v("当我在 统信桌面操作系统(UOS)的类Linux系统启动node服务的时候，报错。")]),s._v(" "),e("h3",{attrs:{id:"_3-1-错误信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-错误信息","aria-hidden":"true"}},[s._v("#")]),s._v(" 3.1 错误信息")]),s._v(" "),e("p",[e("code",[s._v("node:internal/errors:490 errorCaptureStackTrace(err) Error：ENOSPC：system limit for number of file watchers reached")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(427),alt:""}})]),s._v(" "),e("h3",{attrs:{id:"_3-2-错误原因"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-错误原因","aria-hidden":"true"}},[s._v("#")]),s._v(" 3.2 错误原因")]),s._v(" "),e("p",[e("code",[s._v("ENOSPC: system limit for number of file watchers reached")]),s._v(" 是 "),e("strong",[s._v("Linux/Unix 系统")]),s._v("中常见的文件监视器（inotify）数量超限问题。该错误通常发生在使用 Node.js 工具（如 Webpack、Nodemon、Vite 等）或文件监控类程序时，系统默认的文件监视器数量不足以支持当前应用的需求。")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("文件监视器（inotify）")]),s._v("：Linux 系统通过 "),e("code",[s._v("inotify")]),s._v(" 机制监控文件变化（如文件修改、新增、删除）。每个文件/目录的监控会占用一个“监视器”。")]),s._v(" "),e("li",[e("strong",[s._v("默认限制过低")]),s._v("：Linux 系统默认的 "),e("code",[s._v("max_user_watches")]),s._v("（单个用户可用的最大监视器数量）通常为 "),e("code",[s._v("8192")]),s._v("，对于大型项目或频繁文件操作的应用（如前端开发工具），此限制容易被触发。")])]),s._v(" "),e("p",[s._v("查看默认数量命令："),e("code",[s._v("cat /proc/sys/fs/inotify/max_user_watches")])]),s._v(" "),e("h3",{attrs:{id:"_3-3-解决方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-解决方案","aria-hidden":"true"}},[s._v("#")]),s._v(" 3.3 解决方案")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("永久调整限制(推荐)")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token comment"}},[s._v("# 编辑 sysctl 配置文件")]),s._v("\n"),e("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/sysctl.conf\n\n"),e("span",{attrs:{class:"token comment"}},[s._v("# 在文件末尾添加以下行（示例值为 524288）")]),s._v("\nfs.inotify.max_user_watches"),e("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("524288\n\n"),e("span",{attrs:{class:"token comment"}},[s._v("# 保存退出后，执行以下命令使配置生效")]),s._v("\n"),e("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" sysctl -p\n")])])])]),s._v(" "),e("li",[e("p",[s._v("临时调整限制(重启电脑后失效)")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token comment"}},[s._v("# 将限制提升到 524288（根据需求调整数值）")]),s._v("\n"),e("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" sysctl fs.inotify.max_user_watches"),e("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("524288\n")])])])]),s._v(" "),e("li",[e("p",[s._v("针对特定工具优化")]),s._v(" "),e("ul",[e("li",[e("p",[e("strong",[s._v("Webpack")]),s._v("：在 "),e("code",[s._v("watchOptions")]),s._v(" 中忽略 "),e("code",[s._v("node_modules")]),s._v(" 等无需监控的目录：")]),s._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{attrs:{class:"token comment"}},[s._v("// webpack.config.js")]),s._v("\nmodule"),e("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),e("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  watchOptions"),e("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    ignored"),e("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{attrs:{class:"token regex"}},[s._v("/node_modules/")]),s._v("\n  "),e("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("Vite")]),s._v("：在 "),e("code",[s._v("vite.config.js")]),s._v(" 中使用 "),e("code",[s._v("server.watch.ignored")]),s._v(" 选项。")]),s._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),e("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" defineConfig "),e("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),e("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),e("span",{attrs:{class:"token string"}},[s._v("'vite'")]),e("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),e("span",{attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),e("span",{attrs:{class:"token function"}},[s._v("defineConfig")]),e("span",{attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  server"),e("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    watch"),e("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      ignored"),e("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{attrs:{class:"token string"}},[s._v("'**/node_modules'")]),e("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{attrs:{class:"token string"}},[s._v("'**/dist'")]),e("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),e("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),e("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("Nodemon")]),s._v("：在 "),e("code",[s._v("nodemon.json")]),s._v(" 中配置忽略目录：")]),s._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),e("span",{attrs:{class:"token property"}},[s._v('"ignore"')]),e("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{attrs:{class:"token string"}},[s._v('"node_modules/**"')]),e("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])])])]),s._v(" "),e("h3",{attrs:{id:"_3-4-扩展知识"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-扩展知识","aria-hidden":"true"}},[s._v("#")]),s._v(" 3.4 扩展知识")]),s._v(" "),e("ul",[e("li",[e("strong",[e("code",[s._v("fs.inotify")]),s._v(" 参数")]),s._v("：\n"),e("ul",[e("li",[e("code",[s._v("max_user_watches")]),s._v("：单个用户可监视的文件/目录数量。")]),s._v(" "),e("li",[e("code",[s._v("max_user_instances")]),s._v("：单个用户可创建的监视器实例数量。")]),s._v(" "),e("li",[e("code",[s._v("max_queued_events")]),s._v("：事件队列的最大长度。")])])]),s._v(" "),e("li",[e("strong",[s._v("其他系统")]),s._v("：\n"),e("ul",[e("li",[e("strong",[s._v("macOS")]),s._v("：无此问题（使用不同的文件监控机制）。")]),s._v(" "),e("li",[e("strong",[s._v("Windows")]),s._v("：通过 WSL 运行时需在 Linux 子系统中调整。")])])])])])}],n=a(0),r=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},e,!1,null,null,null);r.options.__file="005-node环境常见问题.md";t.default=r.exports}}]);