(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{490:function(t,s,a){t.exports=a.p+"assets/img/020-ts-error-01.4fef7b87.jpg"},733:function(t,s,a){"use strict";a.r(s);var n=[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#_1-关闭ts校验报错"}},[t._v("1. 关闭TS校验报错")]),n("ul",[n("li",[n("a",{attrs:{href:"#_1-1-在-vue-或-ts-文件内局部关闭-ts-校验"}},[t._v("1.1 在 .vue 或 .ts 文件内局部关闭 TS 校验")])]),n("li",[n("a",{attrs:{href:"#_1-2-关闭单一语句的类型校验"}},[t._v("1.2 关闭单一语句的类型校验")])]),n("li",[n("a",{attrs:{href:"#_1-3-彻底关闭-typescript-编译校验（官方方式）"}},[t._v("1.3 彻底关闭 TypeScript 编译校验（官方方式）")])]),n("li",[n("a",{attrs:{href:"#_1-4-关闭-eslint-的-ts-规则"}},[t._v("1.4 关闭 ESLint 的 TS 规则")])]),n("li",[n("a",{attrs:{href:"#_1-5-关闭-vue-sfc-vue-的-ts-校验（volar）"}},[t._v("1.5 关闭 Vue SFC (*.vue) 的 TS 校验（Volar）")])]),n("li",[n("a",{attrs:{href:"#_1-6-vite-项目彻底禁用-ts-类型检查"}},[t._v("1.6 Vite 项目彻底禁用 TS 类型检查")])]),n("li",[n("a",{attrs:{href:"#在-vite-config-ts-中增加："}},[t._v("在 vite.config.ts 中增加：")])]),n("li",[n("a",{attrs:{href:"#或者根本不让-vite-校验-typescript："}},[t._v("或者根本不让 Vite 校验 TypeScript：")])])])]),n("li",[n("a",{attrs:{href:"#_2-规则校验类报错"}},[t._v("2. 规则校验类报错")]),n("ul",[n("li",[n("a",{attrs:{href:"#_2-1-cannot-find-module-img-one-png-or-its-corresponding-type-declarations"}},[t._v("2.1 Cannot find module './img/one.png' or its corresponding type declarations.")])])])]),n("li",[n("a",{attrs:{href:"#_3-在vue中使用ts报错"}},[t._v("3. 在vue中使用TS报错")]),n("ul",[n("li",[n("a",{attrs:{href:"#_3-1-json-parse-解析路由中的query参数类型报错"}},[t._v("3.1 JSON.parse()解析路由中的query参数类型报错")])])])])])]),n("p"),t._v(" "),n("p",[t._v("[TOC]")]),t._v(" "),n("h1",{attrs:{id:"typescript常见问题解决"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#typescript常见问题解决","aria-hidden":"true"}},[t._v("#")]),t._v(" typescript常见问题解决")]),t._v(" "),n("h2",{attrs:{id:"_1-关闭ts校验报错"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-关闭ts校验报错","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. 关闭TS校验报错")]),t._v(" "),n("h3",{attrs:{id:"_1-1-在-vue-或-ts-文件内局部关闭-ts-校验"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-在-vue-或-ts-文件内局部关闭-ts-校验","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.1 在 .vue 或 .ts 文件内局部关闭 TS 校验")]),t._v(" "),n("p",[n("strong",[t._v("文件顶部加入 magic comment：")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("// @ts-nocheck")]),t._v("\n")])])]),n("p",[t._v("该文件内的所有 TypeScript 校验"),n("strong",[t._v("全部关闭")]),t._v("。")]),t._v(" "),n("p",[t._v("在vue文件中：")]),t._v(" "),n("div",{staticClass:"language-vue extra-class"},[n("pre",{pre:!0,attrs:{class:"language-vue"}},[n("code",[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),n("span",{attrs:{class:"token attr-name"}},[t._v("setup")]),t._v(" "),n("span",{attrs:{class:"token attr-name"}},[t._v("lang")]),n("span",{attrs:{class:"token attr-value"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),n("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{attrs:{class:"token attr-value"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Component"),n("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{attrs:{class:"token script language-javascript"}},[t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// @ts-nocheck")]),t._v("\n")]),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("h3",{attrs:{id:"_1-2-关闭单一语句的类型校验"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-关闭单一语句的类型校验","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.2 关闭单一语句的类型校验")]),t._v(" "),n("div",{staticClass:"language-tsx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-tsx"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("// @ts-ignore")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" num"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token builtin"}},[t._v("number")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"abc"')]),t._v("\n")])])]),n("h3",{attrs:{id:"_1-3-彻底关闭-typescript-编译校验（官方方式）"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-彻底关闭-typescript-编译校验（官方方式）","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.3 彻底关闭 TypeScript 编译校验（官方方式）")]),t._v(" "),n("p",[t._v("在 "),n("code",[t._v("tsconfig.json")]),t._v(" 中关闭类型检查：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token property"}},[t._v('"compilerOptions"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token property"}},[t._v('"checkJs"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" // 不校验 js 文件\n    "),n("span",{attrs:{class:"token property"}},[t._v('"allowJs"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{attrs:{class:"token property"}},[t._v('"skipLibCheck"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" // 不校验第三方库类型\n    "),n("span",{attrs:{class:"token property"}},[t._v('"strict"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" // 关闭所有严格检查\n    "),n("span",{attrs:{class:"token property"}},[t._v('"noImplicitAny"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" // 允许 any\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"_1-4-关闭-eslint-的-ts-规则"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-关闭-eslint-的-ts-规则","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.4 关闭 ESLint 的 TS 规则")]),t._v(" "),n("p",[t._v("如果报错来自 ESLint（而不是 TS 编译器），在 "),n("code",[t._v(".eslintrc.cjs")]),t._v(" 中关闭：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[t._v("rules"),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token property"}},[t._v('"@typescript-eslint/no-explicit-any"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"off"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token property"}},[t._v('"@typescript-eslint/ban-ts-comment"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"off"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token property"}},[t._v('"@typescript-eslint/ban-types"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"off"')]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"_1-5-关闭-vue-sfc-vue-的-ts-校验（volar）"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-关闭-vue-sfc-vue-的-ts-校验（volar）","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.5 关闭 Vue SFC (*.vue) 的 TS 校验（Volar）")]),t._v(" "),n("p",[t._v("在 "),n("code",[t._v("tsconfig.json")]),t._v(" 或 "),n("code",[t._v("jsconfig.json")]),t._v(" 移除 "),n("code",[t._v('"vueCompilerOptions"')]),t._v(" 中的严格类型：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token property"}},[t._v('"vueCompilerOptions"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token property"}},[t._v('"strictTemplates"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("或者直接关闭整个 Volar 的类型支持（极端情况，不推荐）：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token property"}},[t._v('"vueCompilerOptions"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token property"}},[t._v('"disableTemplateSupport"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"_1-6-vite-项目彻底禁用-ts-类型检查"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-vite-项目彻底禁用-ts-类型检查","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.6 Vite 项目彻底禁用 TS 类型检查")]),t._v(" "),n("p",[t._v("如果你的项目使用 Vite（Vue3 默认用 Vite），直接在编译时关掉类型检查：")]),t._v(" "),n("h3",{attrs:{id:"在-vite-config-ts-中增加："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#在-vite-config-ts-中增加：","aria-hidden":"true"}},[t._v("#")]),t._v(" "),n("strong",[t._v("在 vite.config.ts 中增加：")])]),t._v(" "),n("div",{staticClass:"language-tsx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-tsx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("defineConfig")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  esbuild"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    tsconfigRaw"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      compilerOptions"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        noImplicitAny"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"或者根本不让-vite-校验-typescript："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#或者根本不让-vite-校验-typescript：","aria-hidden":"true"}},[t._v("#")]),t._v(" 或者根本不让 Vite 校验 TypeScript：")]),t._v(" "),n("p",[t._v("安装了 "),n("code",[t._v("vite-plugin-checker")]),t._v(" 的话，直接删除或禁用：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token function"}},[t._v("checker")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  typescript"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),n("span",{attrs:{class:"token comment"}},[t._v("// 关闭 TS 校验")]),t._v("\n  vueTsc"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h2",{attrs:{id:"_2-规则校验类报错"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-规则校验类报错","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. 规则校验类报错")]),t._v(" "),n("h3",{attrs:{id:"_2-1-cannot-find-module-img-one-png-or-its-corresponding-type-declarations"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-cannot-find-module-img-one-png-or-its-corresponding-type-declarations","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.1 Cannot find module './img/one.png' or its corresponding type declarations.")]),t._v(" "),n("p",[n("img",{attrs:{src:a(490),alt:""}})]),t._v(" "),n("p",[t._v("在vue3项目中， 使用import引入图片资源的时候，报如图所示的错误，经过确认，引用路径没有问题。")]),t._v(" "),n("h4",{attrs:{id:"_2-1-1-报错原因"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-报错原因","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.1.1 报错原因")]),t._v(" "),n("p",[t._v("在 TypeScript 项目中通过 "),n("code",[t._v("import")]),t._v(" 导入图片时出现 "),n("code",[t._v("Cannot find module")]),t._v(" 错误，通常是由于 TypeScript 无法识别非代码资源（如 "),n("code",[t._v(".png")]),t._v("、"),n("code",[t._v(".jpg")]),t._v(" 等文件）导致的。")]),t._v(" "),n("h4",{attrs:{id:"_2-1-2-解决方案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-解决方案","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.1.2 解决方案")]),t._v(" "),n("h5",{attrs:{id:"_2-1-2-1-添加类型声明文件-实测有效"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-1-添加类型声明文件-实测有效","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.1.2.1 "),n("strong",[t._v("添加类型声明文件")]),t._v("(实测有效)")]),t._v(" "),n("p",[t._v("在项目的"),n("code",[t._v("src")]),t._v("目录中创建或修改"),n("code",[t._v("images.d.ts")]),t._v("，声明图片模块类型：")]),t._v(" "),n("div",{staticClass:"language-typescript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-typescript"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("// 示例：src/images.d.ts")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("declare")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("module")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'*.png'")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" value"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token builtin"}},[t._v("string")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" value"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("declare")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("module")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'*.jpg'")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" value"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token builtin"}},[t._v("string")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" value"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// 可扩展其他图片格式（如 .svg、.jpeg、.gif、.bmp、.tif/.tiff、.webp 等）")]),t._v("\n")])])]),n("h5",{attrs:{id:"_2-1-2-2-确保声明文件被-typescript-识别"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-2-确保声明文件被-typescript-识别","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.1.2.2 "),n("strong",[t._v("确保声明文件被 TypeScript 识别")])]),t._v(" "),n("p",[t._v("检查 "),n("code",[t._v("tsconfig.json")]),t._v("‌：确保声明文件路径包含在 "),n("code",[t._v("include")]),t._v(" 或 "),n("code",[t._v("typeRoots")]),t._v(" 配置中：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token property"}},[t._v('"compilerOptions"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token property"}},[t._v('"typeRoots"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token string"}},[t._v('"./node_modules/@types"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"./src/types"')]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token property"}},[t._v('"include"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token string"}},[t._v('"src/**/*"')]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h5",{attrs:{id:"_2-1-2-3-验证导入路径"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-3-验证导入路径","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.1.2.3 "),n("strong",[t._v("验证导入路径")])]),t._v(" "),n("ul",[n("li",[n("p",[t._v("确认图片路径正确且文件存在35。")])]),t._v(" "),n("li",[n("p",[t._v("若使用别名（如 "),n("code",[t._v("@/assets")]),t._v("），需在 "),n("code",[t._v("tsconfig.json")]),t._v(" 中配置 "),n("code",[t._v("paths")]),t._v("：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token property"}},[t._v('"compilerOptions"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token property"}},[t._v('"baseUrl"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"."')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{attrs:{class:"token property"}},[t._v('"paths"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{attrs:{class:"token property"}},[t._v('"@/*"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token string"}},[t._v('"src/*"')]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),n("h5",{attrs:{id:"_2-1-2-4-替代方案-非推荐"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-4-替代方案-非推荐","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.1.2.4  "),n("strong",[t._v("替代方案")]),t._v("(非推荐)")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("使用 "),n("code",[t._v("require")]),t._v("‌：动态导入图片（需配置 Webpack 或 Vite 支持）：")]),t._v(" "),n("div",{staticClass:"language-typescript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-typescript"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" imgPath "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("require")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'./assets/image.png'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),n("span",{attrs:{class:"token builtin"}},[t._v("string")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("直接使用 URL")]),t._v("‌：将图片放在 "),n("code",[t._v("public")]),t._v(" 目录并通过绝对路径引用。")])])]),t._v(" "),n("h2",{attrs:{id:"_3-在vue中使用ts报错"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-在vue中使用ts报错","aria-hidden":"true"}},[t._v("#")]),t._v(" 3. 在vue中使用TS报错")]),t._v(" "),n("h3",{attrs:{id:"_3-1-json-parse-解析路由中的query参数类型报错"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-json-parse-解析路由中的query参数类型报错","aria-hidden":"true"}},[t._v("#")]),t._v(" 3.1 JSON.parse()解析路由中的query参数类型报错")]),t._v(" "),n("p",[t._v("1、报错原因")]),t._v(" "),n("p",[t._v("在 "),n("strong",[t._v("Vue3 + Vue Router 4 + TypeScript")]),t._v(" 中，"),n("code",[t._v("router.currentRoute.value.query")]),t._v(" 的类型是 "),n("code",[t._v("LocationQuery")]),t._v("，而不是字符串：")]),t._v(" "),n("div",{staticClass:"language-tsx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-tsx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("type")]),t._v(" LocationQuery "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Record"),n("span",{attrs:{class:"token operator"}},[t._v("<")]),n("span",{attrs:{class:"token builtin"}},[t._v("string")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{attrs:{class:"token builtin"}},[t._v("string")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token operator"}},[t._v(">")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("而 "),n("code",[t._v("JSON.parse()")]),t._v(" 只接受 "),n("code",[t._v("string")]),t._v(" 类型，所以会报错：")]),t._v(" "),n("div",{staticClass:"language-pgsql extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("Argument of type 'LocationQuery' is not assignable to parameter of type 'string'\n")])])]),n("p",[t._v("2、解决方法")]),t._v(" "),n("p",[t._v("2.1 先取具体字段，并显式转成 string：假设你的路由是 "),n("code",[t._v('/page?data={"a":1}')]),t._v("，并要解析 "),n("code",[t._v("data")]),t._v(" 字段：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useRoute "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'vue-router'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" route "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("useRoute")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" rawData "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" route"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{attrs:{class:"token comment"}},[t._v("// 类型: string | string[] | undefined")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parsed "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" rawData "),n("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{attrs:{class:"token constant"}},[t._v("JSON")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("parse")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token function"}},[t._v("String")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rawData"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("null")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parsed"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("2.2 给 JSON 数据提前 encodeURIComponent，避免特殊字符问题")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("// 传递参数")]),t._v("\nrouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("push")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'/page'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" query"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" data"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("encodeURIComponent")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token constant"}},[t._v("JSON")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("stringify")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("// 获取参数")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" rawData "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" route"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parsed "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" rawData \n    "),n("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{attrs:{class:"token constant"}},[t._v("JSON")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("parse")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token function"}},[t._v("decodeURIComponent")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token function"}},[t._v("String")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rawData"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("null")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("2.3 给返回值声明类型（推荐）：TypeScript 可以自动推断解析后的数据类型：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("MyData")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  a"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" number"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  b"),n("span",{attrs:{class:"token operator"}},[t._v("?")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" rawData "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" route"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parsed"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" MyData "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" rawData \n    "),n("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{attrs:{class:"token constant"}},[t._v("JSON")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("parse")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token function"}},[t._v("String")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rawData"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("null")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}],e=a(0),r=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},n,!1,null,null,null);r.options.__file="020-TS中常见问题解决.md";s.default=r.exports}}]);