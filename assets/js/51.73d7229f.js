(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{506:function(t,s,a){t.exports=a.p+"assets/img/015-vue-diff.6b508972.png"},507:function(t,s,a){t.exports=a.p+"assets/img/016-vue-diff.806c9001.png"},747:function(t,s,a){"use strict";a.r(s);var n=[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#_1-diff-算法作用"}},[this._v("1. diff 算法作用")])]),s("li",[s("a",{attrs:{href:"#_2-diff-算法的过程"}},[this._v("2. diff 算法的过程")]),s("ul",[s("li",[s("a",{attrs:{href:"#_2-1-没有设置key情况"}},[this._v("2.1 没有设置key情况")])]),s("li",[s("a",{attrs:{href:"#_2-2-设置了key"}},[this._v("2.2 设置了key")])])])]),s("li",[s("a",{attrs:{href:"#参考资料"}},[this._v("参考资料")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"vue-diff算法详解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue-diff算法详解","aria-hidden":"true"}},[this._v("#")]),this._v(" Vue diff算法详解")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Vue diff 是 Vue 框架中"),s("strong",[this._v("用于比较虚拟 DOM（Virtual DOM）差异的算法")]),this._v("。它的主要作用"),s("strong",[this._v("是在数据发生变化时，高效地更新用户界面")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("1、比较只会在同层级进行, 不会跨层级比较")]),this._v(" "),s("li",[this._v("2、在diff比较的过程中，循环从两边向中间比较")]),this._v(" "),s("li",[this._v("3、如果添加了key属性，在第二条的基础上，还会根据key属性提高比较效率")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_1-diff-算法作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-diff-算法作用","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. diff 算法作用")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Vue diff 是 Vue 框架中用于高效更新视图的重要机制。"),s("strong",[this._v("它通过比较虚拟 DOM（Virtual DOM）的差异，只更新实际发生变化的部分，从而减少不必要的 DOM 操作，提高了应用程序的性能")]),this._v("。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("blockquote",[a("p",[t._v("1、"),a("strong",[t._v("提高性能(减少DOM操作)：通过只更新实际发生变化的部分，Vue diff 减少了不必要的 DOM 操作")]),t._v("，从而提高了应用程序的性能。这对于需要频繁更新视图的应用程序尤为重要。")]),t._v(" "),a("p",[t._v("2、"),a("code",[t._v("减少闪烁：由于 Vue diff 只更新实际发生变化的部分")]),t._v("，因此可以减少视图的闪烁，提高用户体验。")]),t._v(" "),a("p",[t._v("3、"),a("strong",[t._v("提高开发效率：Vue diff 使得开发人员无需关心具体的 DOM 操作")]),t._v("，而是专注于业务逻辑的开发。这降低了开发的复杂性，提高了开发效率。")]),t._v(" "),a("p",[t._v("4、"),a("code",[t._v("跨平台支持：Vue diff 基于虚拟 DOM 实现，因此可以在不同的平台和浏览器上运行")]),t._v("。这使得 Vue 应用程序具有良好的跨平台支持。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_2-diff-算法的过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-diff-算法的过程","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. diff 算法的过程")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// 旧虚拟 DOM 树")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" oldTree "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'ul'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  children"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'li'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'a'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" text"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'a'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'li'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'b'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" text"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'b'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'li'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'c'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" text"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'C'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'li'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'d'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" text"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'d'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 新虚拟 DOM 树")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newTree "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'ul'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  children"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'li'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'b'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" text"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'b'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'li'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'e'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" text"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'e'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'li'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'d'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" text"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'d'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" tag"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'li'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'c'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" text"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'c'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("不设置key，新dom和旧dom智慧进行头尾两端的相互比较。设置key后，除了头尾两端的比较外，还会从用key生成的对象"),s("code",[this._v("oldKeyToIdx")]),this._v("中查找匹配的节点，所以为节点设置key可以更高效的利用dom。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_2-1-没有设置key情况"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-没有设置key情况","aria-hidden":"true"}},[this._v("#")]),this._v(" 2.1 没有设置key情况")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(506),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_2-2-设置了key"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-设置了key","aria-hidden":"true"}},[this._v("#")]),this._v(" 2.2 设置了key")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("由于dom节点设置了key，因此，在"),s("strong",[this._v("头尾两端的比较外")]),this._v("后，如果没有找到相同的节点，那么新dom开始索引节点还会用key在旧dom中的key列表里面找一遍，到后后就移到最终结果中，因此新dom第一个节点b不需要重新创建，只需要从旧dom中一过来就可以。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(507),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考资料")])}],e=a(0),_=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("p"),t._m(0),a("p"),t._v(" "),a("p",[t._v("[TOC]")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),a("p",[t._v("diff算法特点：")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),a("p",[t._v("总之，Vue diff 是 Vue 框架中用于高效更新视图的重要机制，它提高了应用程序的性能、用户体验和开发效率，为开发高质量的 Vue 应用程序提供了有力支持。")]),t._v(" "),t._m(7),t._v(" "),a("p",[t._v("假设我们有两棵虚拟 DOM 树，如下所示：")]),t._v(" "),t._m(8),a("p",[t._v("diff算法分两种情况：")]),t._v(" "),a("p",[t._v("1、dom元素添加了key属性，如代码示例中的key属性。")]),t._v(" "),a("p",[t._v("2、dom元素没有key，比如示例代码children元素中删除key属性。")]),t._v(" "),a("p",[t._v("设置key和不设置key的区别：")]),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),a("p",[t._v("由于vue diff算法是新旧虚拟dom两端同时进行比较：")]),t._v(" "),a("p",[t._v("1、新dom开始端节点b没有在旧dom两端找到，因此在结果dom创建一个新节点b。新dom开始端移到第二个节点e，旧dom两端节点索引没动。")]),t._v(" "),a("p",[t._v("2、新dom开始端节点e没有在旧dom两端找到，因此在结果dom创建新节点e。新dom开始端移到第三个节点d。旧dom两端节点索引没动。")]),t._v(" "),a("p",[t._v("3、新dom开始端节点d跟旧dom的末端索引相同，因此，把旧dom末端节点d放到结果dom后面。新dom开始端移到第四个节点c。旧dom末端索引向前移到节点c。")]),t._v(" "),a("p",[t._v("4、新dom开始端节点c跟旧dom的末端索引相同，因此，把旧dom末端节点c放到结果dom后面。由于新dom两端索引相同，结束diff比较，")]),t._v(" "),a("p",[t._v("5、由于新dom两端索引相同，结束diff比较。由于旧dom的a、b两个节点没有用了，因此移除。")]),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/aooy/blog/issues/2",target:"_blank",rel:"noopener noreferrer"}},[t._v("解析vue2.0的diff算法 杨敬卓"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://vue3js.cn/interview/vue/diff.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("面试官：你了解vue的diff算法吗？说说看"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://developer.aliyun.com/article/1428813",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue diff 算法探秘：如何实现快速渲染 阿里云"),a("OutboundLink")],1)])])},n,!1,null,null,null);_.options.__file="013-vue的diff算法详解.md";s.default=_.exports}}]);