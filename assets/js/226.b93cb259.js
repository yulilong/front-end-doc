(window.webpackJsonp=window.webpackJsonp||[]).push([[226],{739:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[n("p"),t._m(0),n("p"),t._v(" "),n("p",[t._v("[TOC]")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),n("p",[t._v("整理自：https://v3.router.vuejs.org/zh/guide/essentials/navigation.html")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),n("p",[t._v("该方法的参数可以是一个字符串路径，或者一个描述地址的对象。例如：")]),t._v(" "),t._m(9),t._m(10),t._v(" "),t._m(11),t._m(12),t._v(" "),t._m(13),t._v(" "),n("p",[n("strong",[t._v("注意")]),t._v("： 如果目的地和当前路由相同，只有参数发生了改变 (比如从一个用户资料到另一个 "),n("code",[t._v("/users/1")]),t._v(" -> "),n("code",[t._v("/users/2")]),t._v(")，你需要使用 "),n("a",{attrs:{href:"https://v3.router.vuejs.org/zh/guide/essentials/dynamic-matching.html#%E5%93%8D%E5%BA%94%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0%E7%9A%84%E5%8F%98%E5%8C%96",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("beforeRouteUpdate")]),n("OutboundLink")],1),t._v(" 来响应这个变化 (比如抓取用户信息)。")]),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),n("p",[t._v("例子")]),t._v(" "),t._m(19),t._m(20),t._v(" "),n("p",[n("code",[t._v("router.push")]),t._v("、 "),n("code",[t._v("router.replace")]),t._v(" 和 "),n("code",[t._v("router.go")]),t._v(" 跟 "),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/History",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("window.history.pushState")]),t._v("、 "),n("code",[t._v("window.history.replaceState")]),t._v(" 和 "),n("code",[t._v("window.history.go")]),t._v(" "),n("OutboundLink")],1),t._v("好像， 实际上它们确实是效仿 "),n("code",[t._v("window.history")]),t._v(" API 的。")]),t._v(" "),n("p",[t._v("因此，如果你已经熟悉 "),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/History_API",target:"_blank",rel:"noopener noreferrer"}},[t._v("Browser History APIs (opens new window)"),n("OutboundLink")],1),t._v("，那么在 Vue Router 中操作 history 就是超级简单的。")]),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),n("p",[t._v("整理自：https://router.vuejs.org/zh/guide/advanced/navigation-guards.html")]),t._v(" "),n("p",[t._v("导航守卫主要用来通过跳转或取消的方式守卫导航。这里有很多方式植入路由导航中：全局的，单个路由独享的，或者组件级的。")]),t._v(" "),n("p",[t._v("完整的导航解析流程：")]),t._v(" "),t._m(23),t._v(" "),n("p",[t._v("路由对象说明：")]),t._v(" "),t._m(24),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._m(28),t._v(" "),n("p",[t._v("此方法接受三个参数：")]),t._v(" "),n("ul",[t._m(29),t._v(" "),n("li",[t._v("from(Route对象): 当前导航正要离开的路由")]),t._v(" "),n("li",[t._v("next(函数)：必填，一定要调用该方法来 "),n("strong",[t._v("resolve")]),t._v(" 这个钩子。执行效果依赖 "),n("code",[t._v("next")]),t._v(" 方法的调用参数\n"),n("ul",[t._m(30),t._v(" "),t._m(31),t._v(" "),n("li",[t._m(32),t._v(": 跳转到一个不同的地址。当前的导航被中断，然后进行一个新的导航。你可以向 "),n("code",[t._v("next")]),t._v(" 传递任意位置对象，且允许设置诸如 "),n("code",[t._v("replace: true")]),t._v("、"),n("code",[t._v("name: 'home'")]),t._v(" 之类的选项以及任何用在 "),n("a",{attrs:{href:"https://v3.router.vuejs.org/zh/api/#to",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("router-link")]),t._v(" 的 "),n("code",[t._v("to")]),t._v(" prop"),n("OutboundLink")],1),t._v(" 或 "),n("a",{attrs:{href:"https://v3.router.vuejs.org/zh/api/#router-push",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("router.push")]),n("OutboundLink")],1),t._v(" 中的选项。")]),t._v(" "),n("li",[t._m(33),t._v(": (2.4.0+) 如果传入 "),n("code",[t._v("next")]),t._v(" 的参数是一个 "),n("code",[t._v("Error")]),t._v(" 实例，则导航会被终止且该错误会被传递给 "),n("a",{attrs:{href:"https://v3.router.vuejs.org/zh/api/#router-onerror",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("router.onError()")]),n("OutboundLink")],1),t._v(" 注册过的回调。")])])])]),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),t._m(38),t._v(" "),t._m(39),t._v(" "),t._m(40),t._v(" "),t._m(41),n("p",[t._v("它们对于分析、更改页面标题、声明页面等辅助功能以及许多其他事情都很有用。")]),t._v(" "),t._m(42),t._v(" "),t._m(43),t._v(" "),t._m(44),t._m(45),t._v(" "),t._m(46),t._v(" "),t._m(47),t._v(" "),t._m(48),t._v(" "),t._m(49),t._m(50),t._v(" "),t._m(51),t._v(" "),t._m(52),t._m(53),t._v(" "),t._m(54),t._m(55),t._v(" "),t._m(56)])},[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#_1-编程式的导航-js代码里面跳转"}},[t._v("1. 编程式的导航(JS代码里面跳转)")]),n("ul",[n("li",[n("a",{attrs:{href:"#_1-1-router-push-location-oncomplete-onabort"}},[t._v("1.1 router.push(location, onComplete?, onAbort?)")])]),n("li",[n("a",{attrs:{href:"#_1-2-router-replace-location-oncomplete-onabort"}},[t._v("1.2 router.replace(location, onComplete?, onAbort?)")])]),n("li",[n("a",{attrs:{href:"#_1-3-router-go-n"}},[t._v("1.3 router.go(n)")])]),n("li",[n("a",{attrs:{href:"#_1-4-router方法跟window-history方法类似"}},[t._v("1.4 router方法跟window.history方法类似")])])])]),n("li",[n("a",{attrs:{href:"#_2-导航守卫"}},[t._v("2. 导航守卫")]),n("ul",[n("li",[n("a",{attrs:{href:"#_2-1-全局前置守卫：beforeeach"}},[t._v("2.1 全局前置守卫：beforeEach")])]),n("li",[n("a",{attrs:{href:"#_2-2-全局解析守卫：beforeresolve"}},[t._v("2.2 全局解析守卫：beforeResolve")])]),n("li",[n("a",{attrs:{href:"#_2-3-全局后置钩子：aftereach"}},[t._v("2.3 全局后置钩子：afterEach")])]),n("li",[n("a",{attrs:{href:"#_2-4-路由独享的守卫"}},[t._v("2.4 路由独享的守卫")])]),n("li",[n("a",{attrs:{href:"#_2-5-组件内的路由守卫"}},[t._v("2.5 组件内的路由守卫")])])])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"router使用相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#router使用相关","aria-hidden":"true"}},[this._v("#")]),this._v(" router使用相关")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_1-编程式的导航-js代码里面跳转"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-编程式的导航-js代码里面跳转","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. 编程式的导航(JS代码里面跳转)")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("除了使用 "),s("code",[this._v("<router-link>")]),this._v(" 创建 a 标签来定义导航链接，我们还可以借助 router 的实例方法，通过编写代码来实现。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_1-1-router-push-location-oncomplete-onabort"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-router-push-location-oncomplete-onabort","aria-hidden":"true"}},[this._v("#")]),this._v(" 1.1 router.push(location, onComplete?, onAbort?)")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("注意：在 Vue 实例内部，你可以通过 "),s("code",[this._v("$router")]),this._v(" 访问路由实例。因此你可以调用 "),s("code",[this._v("this.$router.push")]),this._v("。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("想要导航到不同的 URL，则使用 "),s("code",[this._v("router.push")]),this._v(" 方法。这个方法会向 history 栈添加一个新的记录，所以，当用户点击浏览器后退按钮时，则回到之前的 URL。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("当你点击 "),s("code",[this._v("<router-link>")]),this._v(" 时，这个方法会在内部调用，所以说，点击 "),s("code",[this._v('<router-link :to="...">')]),this._v(" 等同于调用 "),s("code",[this._v("router.push(...)")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("table",[s("thead",[s("tr",[s("th",[this._v("声明式")]),this._v(" "),s("th",[this._v("编程式")])])]),this._v(" "),s("tbody",[s("tr",[s("td",[s("code",[this._v('<router-link :to="...">')])]),this._v(" "),s("td",[s("code",[this._v("router.push(...)")])])])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("// 字符串")]),t._v("\nrouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("push")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'home'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// 对象")]),t._v("\nrouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("push")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'home'")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// 命名的路由")]),t._v("\nrouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("push")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'user'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" userId"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'123'")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// 带查询参数，变成 /register?plan=private")]),t._v("\nrouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("push")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'register'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" query"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" plan"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'private'")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[n("strong",[t._v("注意：如果提供了 "),n("code",[t._v("path")]),t._v("，"),n("code",[t._v("params")]),t._v(" 会被忽略，上述例子中的 "),n("code",[t._v("query")]),t._v(" 并不属于这种情况。取而代之的是下面例子的做法，你需要提供路由的 "),n("code",[t._v("name")]),t._v(" 或手写完整的带有参数的 "),n("code",[t._v("path")]),t._v("：")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" userId "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'123'")]),t._v("\nrouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("push")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'user'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" userId "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// -> /user/123")]),t._v("\nrouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("push")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[t._v("`/user/")]),n("span",{attrs:{class:"token interpolation"}},[n("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("userId"),n("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{attrs:{class:"token string"}},[t._v("`")])]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// -> /user/123")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// 这里的 params 不生效")]),t._v("\nrouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("push")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'/user'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" userId "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// -> /user")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("同样的规则也适用于 "),s("code",[this._v("router-link")]),this._v(" 组件的 "),s("code",[this._v("to")]),this._v(" 属性。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("在 2.2.0+，可选的在 "),n("code",[t._v("router.push")]),t._v(" 或 "),n("code",[t._v("router.replace")]),t._v(" 中提供 "),n("code",[t._v("onComplete")]),t._v(" 和 "),n("code",[t._v("onAbort")]),t._v(" 回调作为第二个和第三个参数。这些回调将会在导航成功完成 (在所有的异步钩子被解析之后) 或终止 (导航到相同的路由、或在当前导航完成之前导航到另一个不同的路由) 的时候进行相应的调用。在 3.1.0+，可以省略第二个和第三个参数，此时如果支持 Promise，"),n("code",[t._v("router.push")]),t._v(" 或 "),n("code",[t._v("router.replace")]),t._v(" 将返回一个 Promise。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_1-2-router-replace-location-oncomplete-onabort"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-router-replace-location-oncomplete-onabort","aria-hidden":"true"}},[this._v("#")]),this._v(" 1.2 router.replace(location, onComplete?, onAbort?)")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("跟 "),s("code",[this._v("router.push")]),this._v(" 很像，唯一的不同就是，它不会向 history 添加新记录，而是跟它的方法名一样 —— 替换掉当前的 history 记录。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("table",[s("thead",[s("tr",[s("th",[this._v("声明式")]),this._v(" "),s("th",[this._v("编程式")])])]),this._v(" "),s("tbody",[s("tr",[s("td",[s("code",[this._v('<router-link :to="..." replace>')])]),this._v(" "),s("td",[s("code",[this._v("router.replace(...)")])])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_1-3-router-go-n"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-router-go-n","aria-hidden":"true"}},[this._v("#")]),this._v(" 1.3 router.go(n)")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这个方法的参数是一个整数，意思是在 history 记录中向前或者后退多少步，类似 "),s("code",[this._v("window.history.go(n)")]),this._v("。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("// 在浏览器记录中前进一步，等同于 history.forward()")]),t._v("\nrouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("go")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// 后退一步记录，等同于 history.back()")]),t._v("\nrouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("go")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token operator"}},[t._v("-")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// 前进 3 步记录")]),t._v("\nrouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("go")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("3")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// 如果 history 记录不够用，那就默默地失败呗")]),t._v("\nrouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("go")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token operator"}},[t._v("-")]),n("span",{attrs:{class:"token number"}},[t._v("100")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nrouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("go")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("100")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_1-4-router方法跟window-history方法类似"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-router方法跟window-history方法类似","aria-hidden":"true"}},[this._v("#")]),this._v(" 1.4 router方法跟window.history方法类似")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("还有值得提及的，Vue Router 的导航方法 ("),n("code",[t._v("push")]),t._v("、 "),n("code",[t._v("replace")]),t._v("、 "),n("code",[t._v("go")]),t._v(") 在各类路由模式 ("),n("code",[t._v("history")]),t._v("、 "),n("code",[t._v("hash")]),t._v(" 和 "),n("code",[t._v("abstract")]),t._v(") 下表现一致。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_2-导航守卫"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-导航守卫","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. 导航守卫")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ol",[n("li",[t._v("导航被触发。")]),t._v(" "),n("li",[t._v("在失活的组件里调用 "),n("code",[t._v("beforeRouteLeave")]),t._v(" 守卫。")]),t._v(" "),n("li",[t._v("调用全局的 "),n("code",[t._v("beforeEach")]),t._v(" 守卫。")]),t._v(" "),n("li",[t._v("在重用的组件里调用 "),n("code",[t._v("beforeRouteUpdate")]),t._v(" 守卫(2.2+)。")]),t._v(" "),n("li",[t._v("在路由配置里调用 "),n("code",[t._v("beforeEnter")]),t._v("。")]),t._v(" "),n("li",[t._v("解析异步路由组件。")]),t._v(" "),n("li",[t._v("在被激活的组件里调用 "),n("code",[t._v("beforeRouteEnter")]),t._v("。")]),t._v(" "),n("li",[t._v("调用全局的 "),n("code",[t._v("beforeResolve")]),t._v(" 守卫(2.5+)。")]),t._v(" "),n("li",[t._v("导航被确认。")]),t._v(" "),n("li",[t._v("调用全局的 "),n("code",[t._v("afterEach")]),t._v(" 钩子。")]),t._v(" "),n("li",[t._v("触发 DOM 更新。")]),t._v(" "),n("li",[t._v("调用 "),n("code",[t._v("beforeRouteEnter")]),t._v(" 守卫中传给 "),n("code",[t._v("next")]),t._v(" 的回调函数，创建好的组件实例会作为回调函数的参数传入。")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" route "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  path"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'/foo/bar'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v('// 字符串，对应当前路由的路径，总是解析为绝对路径，如 "/foo/bar"')]),t._v("\n  params"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 一个 key/value 对象，包含了动态片段和全匹配片段，如果没有路由参数，就是一个空对象。")]),t._v("\n  query"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 一个 key/value 对象，表示 URL 查询参数。例如，对于路径 /foo?user=1，则有 $route.query.user == 1，如果没有查询参数，则是个空对象。")]),t._v("\n  hash"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("''")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 当前路由的 hash 值 (带 #) ，如果没有 hash 值，则为空字符串。")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// 完成解析后的 URL，包含查询参数和 hash 的完整路径。")]),t._v("\n  fullPath"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("''")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// 一个数组，包含当前路由的所有嵌套路径片段的路由记录 。路由记录就是 routes 配置数组中的对象副本 (还有在 children 数组)。")]),t._v("\n  matched"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// 当前路由的名称，如果有的话。")]),t._v("\n  name"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("''")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// 如果存在重定向，即为重定向来源的路由的名字。")]),t._v("\n  redirectedFrom"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("''")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_2-1-全局前置守卫：beforeeach"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-全局前置守卫：beforeeach","aria-hidden":"true"}},[this._v("#")]),this._v(" 2.1 全局前置守卫：beforeEach")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("你可以使用 "),s("code",[this._v("router.beforeEach")]),this._v(" 注册一个全局前置守卫：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" VueRouter "),n("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'vue-router'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" router "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("VueRouter")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 3.X 版本的， 4.X的版本不一样")]),t._v("\nrouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("beforeEach")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("to"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("from")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("当一个导航触发时，全局前置守卫按照创建顺序调用。守卫是异步解析执行，此时导航在所有守卫 resolve 完之前一直处于 "),s("strong",[this._v("等待中")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[this._v("to(Route对象)：即将要进入的目标"),s("code",[this._v("路由对象")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("strong",[s("code",[this._v("next()")])]),this._v(": 进行管道中的下一个钩子。如果全部钩子执行完了，则导航的状态就是 "),s("strong",[this._v("confirmed")]),this._v(" (确认的)")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("strong",[s("code",[this._v("next(false)")])]),this._v(": 中断当前的导航。如果浏览器的 URL 改变了 (可能是用户手动或者浏览器后退按钮)，那么 URL 地址会重置到 "),s("code",[this._v("from")]),this._v(" 路由对应的地址")])},function(){var t=this.$createElement,s=this._self._c||t;return s("strong",[s("code",[this._v("next('/')")]),this._v(" 或者 "),s("code",[this._v("next({ path: '/' })")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("strong",[s("code",[this._v("next(error)")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("确保 "),s("code",[this._v("next")]),this._v(" 函数在任何给定的导航守卫中都被严格调用一次。它可以出现多于一次，但是只能在所有的逻辑路径都不重叠的情况下，否则钩子永远都不会被解析或报错")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_2-2-全局解析守卫：beforeresolve"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-全局解析守卫：beforeresolve","aria-hidden":"true"}},[this._v("#")]),this._v(" 2.2 全局解析守卫：beforeResolve")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在 2.5.0+ 版本以上，你可以用 "),s("code",[this._v("router.beforeResolve")]),this._v(" 注册一个全局守卫。这和 "),s("code",[this._v("router.beforeEach")]),this._v(" 类似，区别是在导航被确认之前，"),s("strong",[this._v("同时在所有组件内守卫和异步路由组件被解析之后")]),this._v("，解析守卫就被调用。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("router"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("beforeResolve")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("to"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("from")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("router.beforeResolve")]),this._v(" 是获取数据或执行任何其他操作（如果用户无法进入页面时你希望避免执行的操作）的理想位置。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_2-3-全局后置钩子：aftereach"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-全局后置钩子：aftereach","aria-hidden":"true"}},[this._v("#")]),this._v(" 2.3 全局后置钩子：afterEach")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("你也可以注册全局后置钩子，然而和守卫不同的是，这些钩子不会接受 "),s("code",[this._v("next")]),this._v(" 函数也不会改变导航本身：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("router"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("afterEach")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("to"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("from")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_2-4-路由独享的守卫"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-路由独享的守卫","aria-hidden":"true"}},[this._v("#")]),this._v(" 2.4 路由独享的守卫")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在路由配置上定义 "),s("code",[this._v("beforeEnter")]),this._v(" 守卫：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" routes "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'/users/:id'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    component"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" UserDetails"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// 与全局前置守卫的方法参数是一样的")]),t._v("\n    beforeEnter"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("to"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("from")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// reject the navigation")]),t._v("\n      "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[n("code",[t._v("beforeEnter")]),t._v(" 守卫 "),n("strong",[t._v("只在进入路由时触发")]),t._v("，不会在 "),n("code",[t._v("params")]),t._v("、"),n("code",[t._v("query")]),t._v(" 或 "),n("code",[t._v("hash")]),t._v(" 改变时触发。例如，从 "),n("code",[t._v("/users/2")]),t._v(" 进入到 "),n("code",[t._v("/users/3")]),t._v(" 或者从 "),n("code",[t._v("/users/2#info")]),t._v(" 进入到 "),n("code",[t._v("/users/2#projects")]),t._v("。它们只有在 "),n("strong",[t._v("从一个不同的")]),t._v(" 路由导航时，才会被触发。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("你也可以将一个函数数组传递给 "),s("code",[this._v("beforeEnter")]),this._v("，这在为不同的路由重用守卫时很有用.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_2-5-组件内的路由守卫"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-组件内的路由守卫","aria-hidden":"true"}},[this._v("#")]),this._v(" 2.5 组件内的路由守卫")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("code",[this._v("beforeRouteEnter")])]),this._v(" "),s("li",[s("code",[this._v("beforeRouteUpdate")]),this._v(" (2.2 新增)")]),this._v(" "),s("li",[s("code",[this._v("beforeRouteLeave")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Foo "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  template"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[t._v("`...`")])]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token function"}},[t._v("beforeRouteEnter")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("to"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("from")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// 在渲染该组件的对应路由被 confirm 前调用")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// 不！能！获取组件实例 `this`")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// 因为当守卫执行前，组件实例还没被创建")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token function"}},[t._v("beforeRouteUpdate")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("to"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("from")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// 在当前路由改变，但是该组件被复用时调用")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// 举例来说，对于一个带有动态参数的路径 /foo/:id，在 /foo/1 和 /foo/2 之间跳转的时候，")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// 由于会渲染同样的 Foo 组件，因此组件实例会被复用。而这个钩子就会在这个情况下被调用。")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// 可以访问组件实例 `this`")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token function"}},[t._v("beforeRouteLeave")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("to"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("from")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// 导航离开该组件的对应路由时调用")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// 可以访问组件实例 `this`")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("beforeRouteEnter")]),this._v(" 守卫 "),s("strong",[this._v("不能")]),this._v(" 访问 "),s("code",[this._v("this")]),this._v("，因为守卫在导航确认前被调用，因此即将登场的新组件还没被创建。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("不过，你可以通过传一个回调给 "),s("code",[this._v("next")]),this._v("来访问组件实例。在导航被确认的时候执行回调，并且把组件实例作为回调方法的参数。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token function"}},[t._v("beforeRouteEnter")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("to"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("from")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token function"}},[t._v("next")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// 通过 `vm` 访问组件实例")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("注意 "),n("code",[t._v("beforeRouteEnter")]),t._v(" 是支持给 "),n("code",[t._v("next")]),t._v(" 传递回调的唯一守卫。对于 "),n("code",[t._v("beforeRouteUpdate")]),t._v(" 和 "),n("code",[t._v("beforeRouteLeave")]),t._v(" 来说，"),n("code",[t._v("this")]),t._v(" 已经可用了，所以"),n("strong",[t._v("不支持")]),t._v("传递回调，因为没有必要了。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token function"}},[t._v("beforeRouteUpdate")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("to"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("from")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// just use `this`")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("this")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" to"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name\n  "),n("span",{attrs:{class:"token function"}},[t._v("next")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这个离开守卫通常用来禁止用户在还未保存修改前突然离开。该导航可以通过 "),s("code",[this._v("next(false)")]),this._v(" 来取消。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token function"}},[t._v("beforeRouteLeave")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("to"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("from")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" answer "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("confirm")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'Do you really want to leave? you have unsaved changes!'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("answer"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("next")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("next")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])}],!1,null,null,null);e.options.__file="011-router使用相关.md";s.default=e.exports}}]);